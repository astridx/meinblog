{"componentChunkName":"component---src-templates-post-js","path":"/joomla-einen-service-hinzufuegen-routing/","result":{"data":{"markdownRemark":{"html":"<p>Suchmaschinenfreundliche URLs funktionieren nicht. Anhand eines Services reparieren wir diesen Missstand.</p>\n<h2>Für Ungeduldige</h2>\n<p>Sieh dir den geänderten Programmcode in der <a href=\"https://github.com/astridx/boilerplate/compare/t26...t27\">Diff-Ansicht</a> an und übernimm diese Änderungen in deine Entwicklungsversion.</p>\n<h2>Schritt für Schritt</h2>\n<h3>Neue Dateien</h3>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-6e8e84b1a865c4d53d5a754fe6331601\">src/components/com_foos/src/Service/Router.php</a></h4>\n<p>Der Service wandelt die URLs in suchmaschinenfreundliche Versionen.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/components/com_foos/src/Service/Router.php\">src/components/com_foos/src/Service/Router.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Foos<span class=\"token punctuation\">\\</span>Site<span class=\"token punctuation\">\\</span>Service</span><span class=\"token punctuation\">;</span>\n\n\\<span class=\"token package\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'_JEXEC'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token keyword\">die</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Application<span class=\"token punctuation\">\\</span>SiteApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Categories<span class=\"token punctuation\">\\</span>CategoryFactoryInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Categories<span class=\"token punctuation\">\\</span>CategoryInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>ComponentHelper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>RouterView</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>RouterViewConfiguration</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>Rules<span class=\"token punctuation\">\\</span>MenuRules</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>Rules<span class=\"token punctuation\">\\</span>NomenuRules</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>Rules<span class=\"token punctuation\">\\</span>StandardRules</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Menu<span class=\"token punctuation\">\\</span>AbstractMenu</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>DatabaseInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>Database<span class=\"token punctuation\">\\</span>ParameterType</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Router</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RouterView</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token variable\">$noIDs</span> <span class=\"token operator\">=</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token variable\">$categoryFactory</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token variable\">$categoryCache</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token variable\">$db</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span>SiteApplication <span class=\"token variable\">$app</span><span class=\"token punctuation\">,</span> AbstractMenu <span class=\"token variable\">$menu</span><span class=\"token punctuation\">,</span> CategoryFactoryInterface <span class=\"token variable\">$categoryFactory</span><span class=\"token punctuation\">,</span> DatabaseInterface <span class=\"token variable\">$db</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">categoryFactory</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$categoryFactory</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span>              <span class=\"token operator\">=</span> <span class=\"token variable\">$db</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token variable\">$params</span> <span class=\"token operator\">=</span> ComponentHelper<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">getParams</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'com_foos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">noIDs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>bool<span class=\"token punctuation\">)</span> <span class=\"token variable\">$params</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'sef_ids'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$categories</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterViewConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$categories</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerView</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$categories</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$category</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterViewConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'category'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$category</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$categories</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'catid'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setNestable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerView</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$foo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterViewConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$foo</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setParent</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'catid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerView</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$foo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerView</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterViewConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'featured'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$form</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterViewConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$form</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setKey</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerView</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$form</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$app</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$menu</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">attachRule</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MenuRules</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">attachRule</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">StandardRules</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">attachRule</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NomenuRules</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategorySegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$category</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCategories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$path</span> <span class=\"token operator\">=</span> <span class=\"token function\">array_reverse</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean constant\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$path</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'1:root'</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">noIDs</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$path</span> <span class=\"token keyword\">as</span> <span class=\"token operator\">&amp;</span><span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">list</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">':'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$path</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoriesSegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCategorySegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getFooSegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">strpos</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">':'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$id</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$dbquery</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getQuery</span><span class=\"token punctuation\">(</span><span class=\"token boolean constant\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$dbquery</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'alias'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'#__foos_details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' = :id'</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">':id'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> ParameterType<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">INTEGER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$dbquery</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token variable\">$id</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">':'</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">noIDs</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">list</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$void</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">':'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$void</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span> <span class=\"token variable\">$id</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getFormSegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getFooSegment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoryId</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$segment</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$category</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCategories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'access'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$query</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$category</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getChildren</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$child</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">noIDs</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$child</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">alias</span> <span class=\"token operator\">==</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$child</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token keyword\">else</span>\n\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$child</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$child</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategoriesId</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$segment</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getCategoryId</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$segment</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getFooId</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$segment</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">noIDs</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$dbquery</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getQuery</span><span class=\"token punctuation\">(</span><span class=\"token boolean constant\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$dbquery</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'#__foos_details'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\t<span class=\"token punctuation\">[</span>\n\t\t\t\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'alias'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' = :alias'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">quoteName</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'catid'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">' = :catid'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token punctuation\">]</span>\n\t\t\t\t<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">':alias'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">':catid'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'id'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> ParameterType<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token constant\">INTEGER</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$dbquery</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">loadResult</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>int<span class=\"token punctuation\">)</span> <span class=\"token variable\">$segment</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCategories</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span> <span class=\"token variable\">$options</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> CategoryInterface\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$key</span> <span class=\"token operator\">=</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$options</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">categoryCache</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$key</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">categoryCache</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$key</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">categoryFactory</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">createCategory</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$options</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">categoryCache</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$key</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Geänderte Dateien</h3>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-6f6a8e05c359293ccc2ab0a2046bce7f\">src/administrator/components/com_foos/services/provider.php</a></h4>\n<p>Im Service Provider registrieren wir den Service.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/administrator/components/com_foos/services/provider.php\">src/administrator/components/com_foos/services/provider.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">\\<span class=\"token package\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'_JEXEC'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token keyword\">die</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>RouterFactoryInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Extension<span class=\"token punctuation\">\\</span>Service<span class=\"token punctuation\">\\</span>Provider<span class=\"token punctuation\">\\</span>RouterFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span>Container <span class=\"token variable\">$container</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>AssociationExtensionInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AssociationsHelper</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerServiceProvider</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CategoryFactory</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'\\\\Joomla\\\\Component\\\\Foos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerServiceProvider</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MVCFactory</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'\\\\Joomla\\\\Component\\\\Foos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerServiceProvider</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ComponentDispatcherFactory</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'\\\\Joomla\\\\Component\\\\Foos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">registerServiceProvider</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RouterFactory</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'\\\\Joomla\\\\Component\\\\Foos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>\n\t\t\tComponentInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Container <span class=\"token variable\">$container</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token variable\">$component</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FoosComponent</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>ComponentDispatcherFactoryInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token variable\">$component</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setRegistry</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>Registry<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token variable\">$component</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setMVCFactory</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>MVCFactoryInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token variable\">$component</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setCategoryFactory</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>CategoryFactoryInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token variable\">$component</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setAssociationExtension</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>AssociationExtensionInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token variable\">$component</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">setRouterFactory</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$container</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>RouterFactoryInterface<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$component</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">$container-&gt;registerServiceProvider(new RouterFactory(&#39;\\\\Joomla\\\\Component\\\\Foos&#39;));</code> und <code class=\"language-text\">$component-&gt;setRouterFactory($container-&gt;get(RouterFactoryInterface::class));</code> kommen hinzu.</p>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-38764f2b1343234561c0d02cd2991ea1\">src/administrator/components/com_foos/src/Extension/FoosComponent.php</a></h4>\n<p>Wir implementieren <code class=\"language-text\">RouterServiceInterface</code> und nutzen <code class=\"language-text\">RouterServiceTrait</code>, so dass diese Dateien gefunden werden.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/administrator/components/com_foos/src/Extension/FoosComponent.php\">src/administrator/components/com_foos/src/Extension/FoosComponent.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Foos<span class=\"token punctuation\">\\</span>Administrator<span class=\"token punctuation\">\\</span>Extension</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'JPATH_PLATFORM'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token keyword\">die</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>RouterServiceInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Router<span class=\"token punctuation\">\\</span>RouterServiceTrait</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FoosComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">MVCComponent</span>\n<span class=\"token keyword\">implements</span> <span class=\"token class-name\">BootableExtensionInterface</span><span class=\"token punctuation\">,</span> CategoryServiceInterface<span class=\"token punctuation\">,</span> AssociationServiceInterface<span class=\"token punctuation\">,</span> RouterServiceInterface\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">use</span> <span class=\"token package\">CategoryServiceTrait</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">use</span> <span class=\"token package\">AssociationServiceTrait</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">use</span> <span class=\"token package\">HTMLRegistryAwareTrait</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">use</span> <span class=\"token package\">RouterServiceTrait</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span></code></pre></div>\n<h2>Teste deine Joomla-Komponente</h2>\n<ol>\n<li>Installiere deine Komponente in Joomla! Version 4, um sie zu testen:</li>\n</ol>\n<p>Kopiere die Dateien im <code class=\"language-text\">administrator</code> Ordner in den <code class=\"language-text\">administrator</code> Ordner deiner Joomla! 4 Installation.<br>\nKopiere die Dateien im <code class=\"language-text\">components</code> Ordner in den <code class=\"language-text\">components</code> Ordner deiner Joomla! 4 Installation.<br>\nKopiere die Dateien im <code class=\"language-text\">media</code> Ordner in den <code class=\"language-text\">media</code> Ordner deiner Joomla! 4 Installation.</p>\n<p>Installiere deine Komponenten wie in Teil eins beschrieben, nachdem du alle Dateien kopiert hast. Joomla! aktualisiert bei der Installation die Namespaces für dich. Da eine neue Datei hinzugekommen ist, ist dies erforderlich.</p>\n<ol start=\"2\">\n<li>Aktiviere die Einstellung suchmaschinenfreundliche URLs in der globalen Konfiguration.</li>\n<li>Überprüfe die URLs im Frontend. Anstelle von <code class=\"language-text\">/index.php/component/foos?view=foo&amp;id=1:test&amp;catid=4</code> sollte beispielsweise <code class=\"language-text\">http://localhost/joomla-cms4/index.php/list-foos-in-a-category/1-test</code> erscheinen - jenachdem wie du deine Menüpunkte genannt hast.</li>\n</ol>\n<h2>Geänderte Dateien</h2>\n<h3>Übersicht</h3>\n<p><a href=\"https://github.com/joomla/joomla-cms/pull/27693/files\">https://github.com/joomla/joomla-cms/pull/27693/files</a></p>","excerpt":"Suchmaschinenfreundliche URLs funktionieren nicht. Anhand eines Services reparieren wir diesen Missstand. Für Ungeduldige Sieh dir den…","fields":{"slug":"/joomla-einen-service-hinzufuegen-routing/"},"frontmatter":{"title":"Einen Service hinzufügen - Routing","date":"01.01.2020","tags":["CMS","Joomla"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACZ0lEQVQ4y2P4T2XAAGP8+/cPjAmx0cWQxTEMhNF//vwB479//2I1FJ88A7JzkW2CgV+/foE1gvDv37/hhsAAOh/Dhd9//PhfUVX7Pz0z5/+nT5+whlPfhEn/w6Ni/1+7fgNuKIYLQbaDwIqVq/+zcPL+FxCV/B8SHvW/q6fv/3Wgxnfv3v+fMGnK/8KSsv/S8sr/WTh4/0fFJoD1gLyPYeCfPxCnX7x0+b+uocl/JTWt/5Kyiv/FpOT+B4VG/Lexd/7PLyLxX0xaHiwHMnTy1Om4DUR25br1G/5z8Aj+37Jt+/8zZ8/+19IzAhu+fsOm/9dv3PwvJCb1v6q2HsO7GGEIsgkEjh47/p+dW+D/tBmz/nv7BYFdFBOf9F/f2Oz/8pWr/osDXTl7zjwUR2C4EBb1MImM7Nz/gsBwBBl45erV/x8/fvpvaevwX0JG8X96Vu7/j9AIQ0+TWBP2x48fgQbm/Te1sAEbumnzVnDYevsH/dfUNQC61Pz/gwcPUbyMNwwPHTn6n4md+//O3Xv+F5dW/Hd29wJ728Pb7//5CxfBkQOLEFA6xellWCJt7ej6zyMoCk4mO3bu+i+npPZfWV37//yFi/6vBUYYKAwjouPg6RQ5cSOlQ0iEgLwnICL5X11LD2woMwfPf9/AkP91jc3/eYF8UOyDDAepSUnPwpcOIQbu2bcfnCxAGto7u/8fO37i//fv38Eajp84+X/Dxs3/tfWNwQm7vLIat4HIAQsyFORSXPn8wsVL/5cuWwG2CGdpg00jrECAWQZyCSzisJVSeIsvUJiil38wPsxgbOUjA81KbGoBAOxFbQm0w5BOAAAAAElFTkSuQmCC","width":80,"height":80,"src":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png","srcSet":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png 1x"}}}}}},"pageContext":{"slug":"/joomla-einen-service-hinzufuegen-routing/","previous":{"id":"aaa053e0-66b8-5e99-82e0-234ecaf8a2bd","frontmatter":{"title":"Ansicht nach Kategorien","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/joomla-ansicht-nach-kategorien/"}},"next":{"id":"ba739664-42fb-573b-a7b6-1bacb847a59f","frontmatter":{"title":"Zugriff auf das Dashboard","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/joomla-dashboard-fuer-deine-erweiterung/"}}}}}