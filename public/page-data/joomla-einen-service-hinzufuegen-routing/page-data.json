{"componentChunkName":"component---src-templates-post-js","path":"/joomla-einen-service-hinzufuegen-routing/","result":{"data":{"markdownRemark":{"html":"<p>Suchmaschinenfreundliche URLs funktionieren bisher nicht. Anhand eines Services reparieren wir diesen Missstand. Gleichzeitig ist dies ein gutes Beispiel, um herauszuarbeiten, was notwendig ist, um einen Service in einer Joomla Erweiterung zu integrieren.<!-- \\index{Service} --></p>\n<p><em>Suchmaschinenfreundlich (SEF)</em>, <a href=\"https://de.wikipedia.org/wiki/Clean_URL\">menschlich lesbare</a><sup id=\"fnref-de.wikipedia.org/wiki/clean_url\"><a href=\"#fn-de.wikipedia.org/wiki/clean_url\" class=\"footnote-ref\">de.wikipedia.org/wiki/clean_url</a></sup> sind URLs, die sowohl für Menschen als auch für Suchmaschinen Sinn machen, weil sie den Pfad zu der bestimmten Seite erklären. Joomla ist in der Lage, URLs in jedem Format zu erstellen. Dies hängt nicht vom URL-Rewriting ab, das vom Webserver ausgeführt wird, so dass es auch dann funktioniert, wenn Joomla einen anderen Server als Apache mit dem Modul mod_rewrite verwendet. Die SEF-URLs folgen einem bestimmten festen Muster, aber der Benutzer kann einen kurzen beschreibenden Text <a href=\"https://docs.joomla.org/Alias/de\">Alias</a><sup id=\"fnref-docs.joomla.org/alias/de\"><a href=\"#fn-docs.joomla.org/alias/de\" class=\"footnote-ref\">docs.joomla.org/alias/de</a></sup> für jedes Segment der URL definieren.<!-- \\index{Suchmaschinenfreundlich (SEF)} --><!-- \\index{Service!Suchmaschinenfreundlich (SEF)} --></p>\n<blockquote>\n<p>Intern wird der lokale Teil einer SEF-URL (der Teil nach dem Domainnamen) als <em>Route</em> bezeichnet. Das Erstellen und Verarbeiten von SEF-URLs wird daher als <em>Routing</em> bezeichnet, und der entsprechende Code wird <em>Router</em> genannt.</p>\n</blockquote>\n<blockquote>\n<p>Ein Beispiel für das Routing ist die URL zum Artikel \"Willkommen bei Joomla\" in den Beispieldaten. Ohne eingeschaltete SEF-URLs ist die URL <code class=\"language-text\">/index.php?option=com_content&amp;view=article&amp;id=1:welcome-to-joomla&amp;catid=1:latest-news&amp;Itemid=50</code>. Mit eingeschalteten SEF-URLs und ausgeschaltetem mod<em>rewrite ist es <code class=\"language-text\">/index.php/the-news/1-latest-news/1-welcome-to-joomla</code>. Mit eingeschalteten SEF-URLs und mod</em>rewrite ist es <code class=\"language-text\">/the-news/1-latest-news/1-welcome-to-joomla</code>.</p>\n</blockquote>\n<p>Suchmaschinenfreundliche URLs können aktiviert werden, indem die Option <em>Search Engine Friendly URLs</em> in der <em>Globalen Konfiguration</em> eingeschaltet wird. Diese Option ist standardmäßig aktiviert. Weitere Informationen findest du unter <a href=\"https://docs.joomla.org/Enabling_Search_Engine_Friendly_(SEF)_URLs\">Aktivieren von suchmaschinenfreundlichen (SEF) URLs in der Dokumentation</a>.</p>\n<blockquote>\n<p>Für Ungeduldige: Sieh dir den geänderten Programmcode in der <a href=\"https://github.com/astridx/boilerplate/compare/t26...t27\">Diff-Ansicht</a><sup id=\"fnref-github.com/astridx/boilerplate/compare/t26...t27\"><a href=\"#fn-github.com/astridx/boilerplate/compare/t26...t27\" class=\"footnote-ref\">github.com/astridx/boilerplate/compare/t26...t27</a></sup> an und übernimm diese Änderungen in deine Entwicklungsversion.</p>\n</blockquote>\n<h2>Schritt für Schritt</h2>\n<h3>Neue Dateien</h3>\n<!-- prettier-ignore -->\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-6e8e84b1a865c4d53d5a754fe6331601\">components/com_foos/ src/Service/Router.php</a></h4>\n<p>Der Service <code class=\"language-text\">components/com_foos/ src/Service/Router.php</code> erledigt die eigentliche Arbeit und wandelt die URLs in suchmaschinenfreundliche Versionen.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/components/com_foos/src/Service/Router.php\">components/com_foos/ src/Service/Router.php</a></p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"php\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// https://raw.githubusercontent.com/astridx/boilerplate/t27/src/components/com_foos/src/Service/Router.php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">&lt;?</span><span class=\"mtk4\">php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * </span><span class=\"mtk8 mtki\">@package</span><span class=\"mtk3 mtki\">     Joomla.Site</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * </span><span class=\"mtk8 mtki\">@subpackage</span><span class=\"mtk3 mtki\">  com_foos</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * </span><span class=\"mtk8 mtki\">@copyright</span><span class=\"mtk3 mtki\">   Copyright (C) 2005 - 2020 Open Source Matters, Inc. All rights reserved.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * </span><span class=\"mtk8 mtki\">@license</span><span class=\"mtk3 mtki\">     GNU General Public License version 2 or later; see LICENSE.txt</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">namespace</span><span class=\"mtk1\"> </span><span class=\"mtk7\">FooNamespace\\Component\\Foos\\Site\\Service</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\\</span><span class=\"mtk7\">defined</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;_JEXEC&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk8\">or</span><span class=\"mtk1\"> </span><span class=\"mtk8\">die</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Application\\</span><span class=\"mtk8\">SiteApplication</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Categories\\</span><span class=\"mtk8\">CategoryFactoryInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Categories\\</span><span class=\"mtk8\">CategoryInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\</span><span class=\"mtk8\">ComponentHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\</span><span class=\"mtk8\">RouterView</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\</span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\Rules\\</span><span class=\"mtk8\">MenuRules</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\Rules\\</span><span class=\"mtk8\">NomenuRules</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\Rules\\</span><span class=\"mtk8\">StandardRules</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Menu\\</span><span class=\"mtk8\">AbstractMenu</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\Database\\</span><span class=\"mtk8\">DatabaseInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\Database\\</span><span class=\"mtk8\">ParameterType</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * Routing class from com_foos</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">  __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Router</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">extends</span><span class=\"mtk1\"> RouterView</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Flag to remove IDs</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@var</span><span class=\"mtk3 mtki\">    </span><span class=\"mtk8 mtki\">boolean</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * The category factory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@var</span><span class=\"mtk3 mtki\"> </span><span class=\"mtk8 mtki\">CategoryFactoryInterface</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">  __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"47\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">private</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">categoryFactory</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"48\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"49\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"50\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * The category cache</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"51\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"52\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@var</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">array</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"53\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"54\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">  __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"55\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"56\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">private</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">categoryCache</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"57\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"58\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"59\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * The db</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"60\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"61\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@var</span><span class=\"mtk3 mtki\"> </span><span class=\"mtk8 mtki\">DatabaseInterface</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"62\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"63\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">  __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"64\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"65\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">private</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">db</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"66\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"67\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"68\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Content Component router constructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"69\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"70\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">SiteApplication</span><span class=\"mtk3 mtki\">           $app              The application object</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"71\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">AbstractMenu</span><span class=\"mtk3 mtki\">              $menu             The menu object to work with</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"72\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">CategoryFactoryInterface</span><span class=\"mtk3 mtki\">  $categoryFactory  The category object</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"73\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">DatabaseInterface</span><span class=\"mtk3 mtki\">         $db               The database object</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"74\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"75\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">__construct</span><span class=\"mtk1\">(</span><span class=\"mtk13 mtkb\">SiteApplication</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">app</span><span class=\"mtk1\">, </span><span class=\"mtk13 mtkb\">AbstractMenu</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">menu</span><span class=\"mtk1\">, </span><span class=\"mtk13 mtkb\">CategoryFactoryInterface</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">categoryFactory</span><span class=\"mtk1\">, </span><span class=\"mtk13 mtkb\">DatabaseInterface</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">db</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"76\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"77\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">categoryFactory</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">categoryFactory</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"78\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk1\">              </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">db</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"79\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"80\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">params</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">ComponentHelper::</span><span class=\"mtk7\">getParams</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;com_foos&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"81\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk13 mtkb\">bool</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">params</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;sef_ids&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"82\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">categories</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;categories&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"83\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">categories</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setKey</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"84\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">registerView</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">categories</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"85\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;category&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"86\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setKey</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setParent</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">categories</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;catid&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setNestable</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"87\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">registerView</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"88\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">foo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;foo&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"89\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">foo</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setKey</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setParent</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;catid&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"90\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">registerView</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">foo</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"91\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">registerView</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;featured&#39;</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"92\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">form</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterViewConfiguration</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;form&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"93\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">form</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setKey</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"94\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">registerView</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">form</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"95\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"96\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk13 mtkb\">parent</span><span class=\"mtk8\">::</span><span class=\"mtk7\">__construct</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">app</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">menu</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"97\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"98\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">attachRule</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">MenuRules</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"99\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">attachRule</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">StandardRules</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"100\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">attachRule</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk8\">NomenuRules</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"101\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"102\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"103\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"104\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a category</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"105\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"106\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $id     ID of the category to retrieve the segments for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"107\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query  The request that is built right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"108\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"109\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">|</span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  The segments of this item</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"110\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"111\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getCategorySegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"112\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"113\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getCategories</span><span class=\"mtk1\">()</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"114\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"115\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"116\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">path</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">array_reverse</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getPath</span><span class=\"mtk1\">(), </span><span class=\"mtk5\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"117\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">path</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;1:root&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"118\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"119\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"120\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">foreach</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">path</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">&amp;</span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"121\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t</span><span class=\"mtk7\">list</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">) </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">explode</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;:&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">, </span><span class=\"mtk6\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"122\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"123\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"124\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"125\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">path</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"126\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"127\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"128\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"129\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"130\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"131\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"132\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a category</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"133\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"134\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $id     ID of the category to retrieve the segments for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"135\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query  The request that is built right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"136\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"137\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">|</span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  The segments of this item</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"138\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"139\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getCategoriesSegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"140\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"141\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getCategorySegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"142\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"143\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"144\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"145\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a foo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"146\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"147\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $id     ID of the foo to retrieve the segments for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"148\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query  The request that is built right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"149\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"150\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">|</span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  The segments of this item</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"151\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"152\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getFooSegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"153\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"154\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk7\">strpos</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk11\">&#39;:&#39;</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"155\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk13 mtkb\">int</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"156\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getQuery</span><span class=\"mtk1\">(</span><span class=\"mtk5\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"157\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">select</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;alias&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"158\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">from</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;#__foos_details&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"159\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">where</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk8\">.</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39; = :id&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"160\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">bind</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;:id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk8\">ParameterType::</span><span class=\"mtk4\">INTEGER</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"161\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setQuery</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"162\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"163\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">.=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;:&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">.</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">loadResult</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"164\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"165\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"166\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"167\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk7\">list</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">void</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">) </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">explode</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;:&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk6\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"168\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"169\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> [</span><span class=\"mtk8\">$</span><span class=\"mtk7\">void</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"170\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"171\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"172\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> [(</span><span class=\"mtk13 mtkb\">int</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"173\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"174\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"175\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"176\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a form</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"177\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"178\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $id     ID of the foo form to retrieve the segments for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"179\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query  The request that is built right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"180\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"181\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">|</span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  The segments of this item</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"182\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"183\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">   __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"184\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"185\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getFormSegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"186\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"187\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getFooSegment</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">id</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"188\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"189\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"190\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"191\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the id for a category</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"192\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"193\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $segment  Segment to retrieve the ID for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"194\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query    The request that is parsed right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"195\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"196\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">mixed</span><span class=\"mtk3 mtki\">   The id of this item or false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"197\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"198\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getCategoryId</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"199\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"200\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">isset</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">[</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"201\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getCategories</span><span class=\"mtk1\">([</span><span class=\"mtk11\">&#39;access&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">false</span><span class=\"mtk1\">])</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">[</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"202\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"203\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"204\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">foreach</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">category</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getChildren</span><span class=\"mtk1\">() </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">child</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"205\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"206\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">child</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">alias</span><span class=\"mtk1\"> </span><span class=\"mtk8\">==</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"207\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">child</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"208\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"209\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t} </span><span class=\"mtk8\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"210\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">child</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">==</span><span class=\"mtk1\"> (</span><span class=\"mtk13 mtkb\">int</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"211\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">child</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"212\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"213\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"214\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"215\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"216\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"217\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"218\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk5\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"219\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"220\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"221\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"222\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a category</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"223\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"224\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $segment  Segment to retrieve the ID for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"225\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query    The request that is parsed right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"226\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"227\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">mixed</span><span class=\"mtk3 mtki\">   The id of this item or false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"228\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"229\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getCategoriesId</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"230\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"231\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getCategoryId</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"232\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"233\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"234\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"235\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get the segment(s) for a foo</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"236\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"237\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">string</span><span class=\"mtk3 mtki\">  $segment  Segment of the foo to retrieve the ID for</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"238\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">   $query    The request that is parsed right now</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"239\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"240\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">mixed</span><span class=\"mtk3 mtki\">   The id of this item or false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"241\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"242\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">public</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getFooId</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">,</span><span class=\"mtk7\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"243\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"244\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">noIDs</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"245\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">getQuery</span><span class=\"mtk1\">(</span><span class=\"mtk5\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"246\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">select</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"247\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">from</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;#__foos_details&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"248\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">where</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"249\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t[</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"250\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;alias&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk8\">.</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39; = :alias&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"251\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;catid&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk8\">.</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39; = :catid&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"252\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t\t]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"253\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"254\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">bind</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;:alias&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"255\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">bind</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;:catid&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">$</span><span class=\"mtk7\">query</span><span class=\"mtk1\">[</span><span class=\"mtk11\">&#39;id&#39;</span><span class=\"mtk1\">], </span><span class=\"mtk8\">ParameterType::</span><span class=\"mtk4\">INTEGER</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"256\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">setQuery</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">dbquery</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"257\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"258\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk13 mtkb\">int</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">db</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">loadResult</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"259\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"260\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"261\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span><span class=\"mtk13 mtkb\">int</span><span class=\"mtk1\">) </span><span class=\"mtk8\">$</span><span class=\"mtk7\">segment</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"262\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"263\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"264\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"265\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * Method to get categories from cache</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"266\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"267\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@param</span><span class=\"mtk3 mtki\">   </span><span class=\"mtk8 mtki\">array</span><span class=\"mtk3 mtki\">  $options   The options for retrieving categories</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"268\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"269\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@return</span><span class=\"mtk3 mtki\">  </span><span class=\"mtk8 mtki\">CategoryInterface</span><span class=\"mtk3 mtki\">  The object containing categories</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"270\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"271\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">   __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"272\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"273\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk13 mtkb\">private</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getCategories</span><span class=\"mtk1\">(</span><span class=\"mtk13 mtkb\">array</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">options</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> [])</span><span class=\"mtk8\">:</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">CategoryInterface</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"274\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"275\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">key</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">serialize</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">options</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"276\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"277\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk9\">isset</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">categoryCache</span><span class=\"mtk1\">[</span><span class=\"mtk8\">$</span><span class=\"mtk7\">key</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"278\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">categoryCache</span><span class=\"mtk1\">[</span><span class=\"mtk8\">$</span><span class=\"mtk7\">key</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">categoryFactory</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">createCategory</span><span class=\"mtk1\">(</span><span class=\"mtk8\">$</span><span class=\"mtk7\">options</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"279\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"280\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"281\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">$</span><span class=\"mtk7\">this</span><span class=\"mtk8\">-&gt;</span><span class=\"mtk7\">categoryCache</span><span class=\"mtk1\">[</span><span class=\"mtk8\">$</span><span class=\"mtk7\">key</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"282\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"283\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3>Geänderte Dateien</h3>\n<!-- prettier-ignore -->\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-6f6a8e05c359293ccc2ab0a2046bce7f\">administrator/components/ com_foos/ services/provider.php</a></h4>\n<p>Im Service Provider registrieren wir den Service.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/administrator/components/com_foos/services/provider.php\">administrator/components/com_foos/ services/provider.php</a></p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"php\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> FooNamespace\\Component\\Foos\\Administrator\\Extension\\</span><span class=\"mtk8\">FoosComponent</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> FooNamespace\\Component\\Foos\\Administrator\\Helper\\</span><span class=\"mtk8\">AssociationsHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Association\\</span><span class=\"mtk8\">AssociationExtensionInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\</span><span class=\"mtk8\">RouterFactoryInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Extension\\Service\\Provider\\</span><span class=\"mtk8\">RouterFactory</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">  * The foos service provider.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> public function register(Container $container)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t$container-&gt;registerServiceProvider(new CategoryFactory(&#39;\\\\FooNamespace\\\\Component\\\\Foos&#39;));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t$container-&gt;registerServiceProvider(new MVCFactory(&#39;\\\\FooNamespace\\\\Component\\\\Foos&#39;));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t$container-&gt;registerServiceProvider(new ComponentDispatcherFactory(&#39;\\\\FooNamespace\\\\Component\\\\Foos&#39;));</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t\t$container-&gt;registerServiceProvider(new RouterFactory(&#39;\\\\FooNamespace\\\\Component\\\\Foos&#39;));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t$container-&gt;set(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\tComponentInterface::class,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> function (Container $container) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\t\t$component-&gt;setMVCFactory($container-&gt;get(MVCFactoryInterface::class));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\t\t$component-&gt;setCategoryFactory($container-&gt;get(CategoryFactoryInterface::class));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\t\t$component-&gt;setAssociationExtension($container-&gt;get(AssociationExtensionInterface::class));</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">\t\t\t\t$component-&gt;setRouterFactory($container-&gt;get(RouterFactoryInterface::class));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\t\treturn $component;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t\t\t}</span></span></span></code></pre>\n<p><code class=\"language-text\">$container->registerServiceProvider (new RouterFactory('\\\\Joomla\\\\Component\\\\Foos'));</code> und <code class=\"language-text\">$component->setRouterFactory ($container->get(RouterFactoryInterface::class));</code> kommen hinzu.</p>\n<!-- prettier-ignore -->\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t26...t27#diff-38764f2b1343234561c0d02cd2991ea1\">administrator/components/ com_foos/ src/Extension/FoosComponent.php</a></h4>\n<p>Wir implementieren <code class=\"language-text\">RouterServiceInterface</code> und nutzen <code class=\"language-text\">RouterServiceTrait</code>, so dass diese Dateien zur Verfügung stehen.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4f83301e4e7e8cb611ffec99adf00f89aecc599c/src/administrator/components/com_foos/src/Extension/FoosComponent.php\">administrator/components/com_foos/ src/Extension/FoosComponent.php</a></p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"php\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> FooNamespace\\Component\\Foos\\Administrator\\Service\\HTML\\</span><span class=\"mtk8\">Icon</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> Psr\\Container\\</span><span class=\"mtk8\">ContainerInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Helper\\</span><span class=\"mtk8\">ContentHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\</span><span class=\"mtk8\">RouterServiceInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Component\\Router\\</span><span class=\"mtk8\">RouterServiceTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">  * Component class for com_foos</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">  *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">  * </span><span class=\"mtk8 mtki\">@since</span><span class=\"mtk3 mtki\">  __BUMP_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">  */</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">FoosComponent</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">extends</span><span class=\"mtk1\"> MVCComponent </span><span class=\"mtk13 mtkb\">implements</span><span class=\"mtk1\"> BootableExtensionInterface, CategoryServiceInterface, AssociationServiceInterface</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">class FoosComponent extends MVCComponent implements BootableExtensionInterface, CategoryServiceInterface, AssociationServiceInterface, RouterServiceInterface</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t</span><span class=\"mtk8\">use</span><span class=\"mtk1\"> </span><span class=\"mtk8\">CategoryServiceTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t</span><span class=\"mtk8\">use</span><span class=\"mtk1\"> </span><span class=\"mtk8\">AssociationServiceTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t</span><span class=\"mtk8\">use</span><span class=\"mtk1\"> </span><span class=\"mtk8\">HTMLRegistryAwareTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">use</span><span class=\"mtk1\"> </span><span class=\"mtk8\">RouterServiceTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t</span><span class=\"mtk3 mtki\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\"> \t * Booting the extension. This is the function to set up the environment of the extension like</span></span></span></code></pre>\n<h2>Teste deine Joomla-Komponente</h2>\n<ol>\n<li>Installiere deine Komponente in Joomla Version 4, um sie zu testen:</li>\n</ol>\n<p>Kopiere die Dateien im <code class=\"language-text\">administrator</code> Ordner in den <code class=\"language-text\">administrator</code> Ordner deiner Joomla 4 Installation.<br>\nKopiere die Dateien im <code class=\"language-text\">components</code> Ordner in den <code class=\"language-text\">components</code> Ordner deiner Joomla 4 Installation.</p>\n<p>Installiere deine Komponente wie in Teil eins beschrieben, nachdem du alle Dateien kopiert hast. Joomla aktualisiert bei der Installation die Namespaces für dich. Da eine neue Datei hinzugekommen ist, ist dies erforderlich.</p>\n<ol start=\"2\">\n<li>Aktiviere die Einstellung suchmaschinenfreundliche URLs in der globalen Konfiguration.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26d7ed1b6e171fc7402349feb54903da/191e2/j4x32x1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVQoz21S2U7EMAzc/5cQfwIfg4R44409hDZpcznnYCe02xYsjZKm8XjG8en59R1PLx94+/xGjITJODgX4AOhtbZDrbXjeC6RUgJRxAm/MZkAbTMmhqyzyz15iZQzJxAiJ5ZSVnJBEfAZpYJT8ATjCDftMYUK7QoUw/CeKMHxfwlJEBVbpVtIwRCZsFmLxh/mpqDPd+gLr1eNmQuU2vpFIYk5diVHuw+wACHs5fnAsmWl2LbmlSGWYy69pxJXfcPMxcf11nMWjD62Qbg01Qa2asuwLD2cCYl7tiiUqHWx2w4YygfhqAnrM5QZD6LmyC3QiLOB8aH38kud4SmsCv++dNtYXgnTIBSF/ChiWTNpjAkXfeGm08PyJpbPjeWDQjPGJqUM731HLXWjDv/O4qpQDvaEia3yGLDVuzb9cggy7HvLx70Q/gDVHA9RX8dK6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Suchmaschinenfreundliche URLs in der globalen Konfiguration von Joomla\"\n        title=\"Suchmaschinenfreundliche URLs in der globalen Konfiguration von Joomla\"\n        src=\"/static/26d7ed1b6e171fc7402349feb54903da/f058b/j4x32x1.png\"\n        srcset=\"/static/26d7ed1b6e171fc7402349feb54903da/c26ae/j4x32x1.png 158w,\n/static/26d7ed1b6e171fc7402349feb54903da/6bdcf/j4x32x1.png 315w,\n/static/26d7ed1b6e171fc7402349feb54903da/f058b/j4x32x1.png 630w,\n/static/26d7ed1b6e171fc7402349feb54903da/40601/j4x32x1.png 945w,\n/static/26d7ed1b6e171fc7402349feb54903da/78612/j4x32x1.png 1260w,\n/static/26d7ed1b6e171fc7402349feb54903da/191e2/j4x32x1.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>Erstelle einen Menüpunkt für ein Foo-Element</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e345593ffb071d12f7aa77aa3d1d6b5/191e2/j4x32x2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoklEQVQoz42RSW4UQRBF63TIXjAItsCCQRwBGQkjLsEJOIGPwAHYIe+sVret6u6ac6qcqj4/s5pyL0npKbK+In5EVhQvPn7D8w/XuHhzhSevP+d4+fYLLs64XLlaNOY8e3+dSbWvPn3HS/L03VcU7SCRUNpCSg1jPawLGIk9oUeX9UWLq/5IXOr1mAwVJAuEIf/iiYFJibrXqFqBpmeudmwQoMw5PmuS96IRDs1gmTyibg2azqBqNKcec4LQYY1C+4y2U9Ye8TkOyqOQ2mCKE/T+gPr+HuJwQM/7sNtB9D2EEJmBKCWxrzr8uPmDY6tgRgvP2hBnOB/5WzihdR4I7L7dYkeT8uEBZVmi3mxQ7feo6hpVVWVq3ks2+3nzC8em51NH+LAYapuezQmTCGPgWCCPR9imJQ1c18E5x85+iScCv4E5T9cPAp7fPmvgciYUQirEeeboMSfFacqEBLXA6c+JMTDPcasGvRpgPWv47F2zQSsHFMl5puEKjVbO9RMT9XR8SAtScGGZ7vfdHcr2zDBH/P/xnlsVNGRM53Yrcegs/gIa7eQcsbliYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Suchmaschinenfreundliche URLs in Joomla - Menüpunkt erstellen\"\n        title=\"Suchmaschinenfreundliche URLs in Joomla - Menüpunkt erstellen\"\n        src=\"/static/2e345593ffb071d12f7aa77aa3d1d6b5/f058b/j4x32x2.png\"\n        srcset=\"/static/2e345593ffb071d12f7aa77aa3d1d6b5/c26ae/j4x32x2.png 158w,\n/static/2e345593ffb071d12f7aa77aa3d1d6b5/6bdcf/j4x32x2.png 315w,\n/static/2e345593ffb071d12f7aa77aa3d1d6b5/f058b/j4x32x2.png 630w,\n/static/2e345593ffb071d12f7aa77aa3d1d6b5/40601/j4x32x2.png 945w,\n/static/2e345593ffb071d12f7aa77aa3d1d6b5/78612/j4x32x2.png 1260w,\n/static/2e345593ffb071d12f7aa77aa3d1d6b5/191e2/j4x32x2.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>Überprüfe die URLs mit der der Menüpunkt im Frontend aufgerufen wird. Anstelle von <code class=\"language-text\">http://localhost/ single-foo-astrid?view=foo&amp;id=2</code> sollte <code class=\"language-text\">http://localhost/ single-foo-astrid</code> erscheinen - jenachdem wie du deine Menüpunkte genannt hast. Im Falle von Kategorien ist die Verbesserung noch augenscheinlicher.</li>\n</ol>\n<blockquote>\n<p>Beachte: Die URL <code class=\"language-text\">http://localhost/ single-foo-astrid?view=foo&amp;id=2</code> ist technisch gesehen weiterhin vorhanden und aufrufbar.</p>\n</blockquote>\n<h2>Links</h2>\n<p><a href=\"https://github.com/joomla/joomla-cms/pull/27693\">Routing in com_contact</a><sup id=\"fnref-https://github.com/joomla/joomla-cms/pull/27693\"><a href=\"#fn-https://github.com/joomla/joomla-cms/pull/27693\" class=\"footnote-ref\">https://github.com/joomla/joomla-cms/pull/27693</a></sup>\n<img src=\"https://vg08.met.vgwort.de/na/779f197311f04131bb5cde65a7793b56\" width=\"1\" height=\"1\" alt=\"\"></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk4 { color: #CB4B16; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .mtk9 { color: #D30102; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/joomla/32joomla-einen-service-hinzufuegen-routing.md","excerpt":"Suchmaschinenfreundliche URLs funktionieren bisher nicht. Anhand eines Services reparieren wir diesen Missstand. Gleichzeitig ist dies ein…","fields":{"slug":"/joomla-einen-service-hinzufuegen-routing/"},"frontmatter":{"title":"Joomla 4.x-Tutorial - Entwicklung von Erweiterungen - Einen Service hinzufügen - Routing","date":"01.01.2021","tags":["CMS","Joomla"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXUlEQVQ4y2P4T2XAAGP8+/cPTsMwNj6yGDobbiCy4N+/f7EqhPFh8uhqMVyILPH12ze42O/fv8Ea//z5A8Yg8P37dwxDMVwIU7x67br/GjoG/wuKSrGG0ekzZ/4bmFj8Dw6P+v/u3XsMQ+EGwgRdPXz+c/OL/JdVVP3v4Oz2PzU96/+9+/f/T585+7+nTwDQMPP/knJK/1k4ef9v3LwF7gucLlyzbv1/dW39//LK6v/tgQY6uLj/d3Tx+C8qKfvf2c3rvybQ9bKKav9D8LkQ3dDQiOj/Zla2YDbI6/wiEv89fQP+f/z48f/U6TP+8wqJ/X/8+AlYHqYHayzDJMsra8Berq6t/y8iIQOkG/7bO7n+t7Rx+J+VWwAOw48fP+FONugx9vrNm/8WNvb/xaTl/7e2d4HFjp84+V9RVROMN23ZihJ2ONMhzIVz5i347+LhDfa2nJLa/8NHj/5PTEmHhKGu4X+/oFCwYdgSPYoLYTaCwtDY3Pr/p0+f/ienZfw3MrP8Lywu/f/EyVP/5y1Y9J9HQOT/q1ev8IchzLunTp/5r29s9l9FQ+d/34RJ/0OAhguJSf33DQj+P3Hy1P9efoH/xYFBUVpe9f8XPi/DDHT39vsvKCr1XxboVQERSbAX16xd/z8tM+c/v7DEf0lZxf9Kalr/Wbn4/m/YtJlwOuzq6QNrDAgO+//w0aP/36DZEGQhKAhWr1n3XwqYsI3MrP7fvXcPfzqEgatXr/3/8uUrRtjCwJ07d/+/ePkSf17GlqZArkaWA2kmurRB1ohuEHr5h2ww3mRD1RKbWgAAOadtyeo+NXgAAAAASUVORK5CYII=","width":80,"height":80,"src":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png","srcSet":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png 1x"}}}}}},"pageContext":{"slug":"/joomla-einen-service-hinzufuegen-routing/","previous":{"id":"ca9e9419-1779-5989-bbaf-d82c3150221b","frontmatter":{"title":"Joomla 4.x Tutorial - Extension Development - View by Categories","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/en/joomla-ansicht-nach-kategorien/"}},"next":{"id":"7cc9c187-8118-530e-ba15-3e81bb4b8df4","frontmatter":{"title":"Joomla 4.x Tutorial - Extension Development - Add a Service - Routing","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/en/joomla-einen-service-hinzufuegen-routing/"}}}},"staticQueryHashes":[]}