{"componentChunkName":"component---src-templates-post-js","path":"/maplibre-blog-with-gatsby/","result":{"data":{"markdownRemark":{"html":"<p>Ich gestalte gerne Webseiten mit <a href=\"https://www.gatsbyjs.com/\">Gatsby</a> und habe vor kurzem angefangen, <a href=\"https://maplibre.org/\">MapLibre GL</a> zu benutzen. Ich wünsche mir, beides zu kombinieren. Die Idee ist, einen Reiseblog zu erstellen, bei dem die Karte den Textinhalt verdeutlicht, indem sie dynamisch in den relevanten Bereich zoomt. Idealerweise werden die Orte aus einem Blogbeitrag mit einem Marker markiert. Beim Navigieren zwischen verschiedenen Beiträgen hebt die digitale Map kontinuierlich die neuen Bereiche hervor, anstatt jedes Mal die gesamte Karte zu aktualisieren. Dadurch ist es für den Leser leichter, den räumlicher Kontext zu erkennen.</p>\n<h2>Einrichtung</h2>\n<p>Im nachfolgenden Beispielcode gehe ich nicht auf jede einzelne Codezeile ein. Dafür stelle ich das Ergebnis online in meinem <a href=\"https://github.com/astridx/gatsby-maplibre-blog-tutorial\">Github Repo</a> zur Verfügung. Der Branch <code class=\"language-text\">main</code> ist für MapLibre GL in Version 1.x erstellt. Der Branch <code class=\"language-text\">test_maplibre_v2</code> enthält Ergänzungen für MapLibre GL 2.x.</p>\n<blockquote>\n<p>Ich gehe davon aus, dass du mit Gatsby und React vertraut bist und die grundlegenden Abhängigkeiten installiert hast: Erste Schritte mit <a href=\"https://de.reactjs.org/docs/getting-started.html\">React</a> oder <a href=\"https://www.gatsbyjs.com/docs/tutorial/\">Gatsby</a></p>\n</blockquote>\n<p>Als erstes erstellen wir ein leeres Gatsby-Projekt. Ich verwende das von Gatsby zur Verfügung gestellt <a href=\"https://www.gatsbyjs.com/docs/starters/\">Startprojekt</a>. So ist das Wesentliche vorkonfiguriert. Das Endergebnis dieses Tutorials ist eine Boilerplate-Struktur. Passe die im Anschluß gerne an deine individuellen Bedürfnisse an.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ gatsby new gatsby-maplibre-blog</span></span></code></pre>\n<p>Nachdem du das Projekt erstellt hast, wechsele mittels <code class=\"language-text\">cd gatsby-maplibre-blog</code> in das Projektverzeichnis und rufe <code class=\"language-text\">gatsby develop</code> auf. Als Ergebnis siehst du die folgende Ausgabe unter der URL <code class=\"language-text\">http://localhost:8000/</code> im Browser:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25deba7b0d00540365f0eafe2efd017f/191e2/bloggatsby1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVQoz62OwQ7BQBCG+4aIN3AT3oC4uwgP4IybA03cXFzFzQVFGgeCYNtut7v7ayttWk1JxSRfJvPP/09Gqed78Cn0UXN7ozhAp6qiXVHRKo/cPkazNEQt9/KE/hQUh3EEcEfANCxs1ho2Kw0GMUM96vuEgrcSQuD+uIOYxMebs5QipUQMV5Scg5xvWM52YJT7xoQvhfDDQPCKnC+YdifQFvvE7uuH0SEIMYthPdc9IaZnOijDMHA52bgeTQgufv8wCDhMYqsxHHT2n4NetxmFYVBQ6iuZDj4BRPepNcGOXugAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ein Bildschirmfoto des Gatsby-Standard-Starters\"\n        title=\"Ein Bildschirmfoto des Gatsby-Standard-Starters\"\n        src=\"/static/25deba7b0d00540365f0eafe2efd017f/f058b/bloggatsby1.png\"\n        srcset=\"/static/25deba7b0d00540365f0eafe2efd017f/c26ae/bloggatsby1.png 158w,\n/static/25deba7b0d00540365f0eafe2efd017f/6bdcf/bloggatsby1.png 315w,\n/static/25deba7b0d00540365f0eafe2efd017f/f058b/bloggatsby1.png 630w,\n/static/25deba7b0d00540365f0eafe2efd017f/40601/bloggatsby1.png 945w,\n/static/25deba7b0d00540365f0eafe2efd017f/78612/bloggatsby1.png 1260w,\n/static/25deba7b0d00540365f0eafe2efd017f/191e2/bloggatsby1.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Um etwas aufzuräumen habe ich im Ordner <code class=\"language-text\">src</code> die Dateien <code class=\"language-text\">components/layout.js</code>, <code class=\"language-text\">pages/404.js</code> und <code class=\"language-text\">pages/index.js</code> abgeändert. </p>\n<blockquote>\n<p>Wenn du mit Gatsby vertraut bist, kannst du auch noch weitere Inhalte des Boilerplates löschen. Um diese Beispiel übersichtlich zu halten, reicht das Ändern der Dateien <code class=\"language-text\">components/layout.js</code>, <code class=\"language-text\">pages/404.js</code> und <code class=\"language-text\">pages/index.js</code> aus. Nachfolgend siehst du den von mir ausgewechselten Code.</p>\n</blockquote>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;../components/layout&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">IndexPage</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Layout</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Reise Blog</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">Layout</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">IndexPage</span></span></span></code></pre>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// layout.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;prop-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ children }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">children</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Layout</span><span class=\"mtk1\">.</span><span class=\"mtk7\">propTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  children: </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\">.</span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">isRequired</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span></span></span></code></pre>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// 404.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NotFoundPage</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Page Not Found</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NotFoundPage</span></span></span></code></pre>\n<p>Weiterhin habe ich die Datei <code class=\"language-text\">gatsby-config.js</code> aufgeräumt. Auch hier wollte ich mit einem Minimum beginnen. So habe ich eine Menge entfernt und den Quellpfad der Datei in <code class=\"language-text\">content</code> geändert. </p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// gatsby-config.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">module</span><span class=\"mtk1\">.</span><span class=\"mtk8\">exports</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  siteMetadata: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    title: </span><span class=\"mtk11\">`Gatsby MapLibre Blog`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    description: </span><span class=\"mtk11\">``</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    author: </span><span class=\"mtk11\">`Me`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  plugins: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-plugin-react-helmet`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      resolve: </span><span class=\"mtk11\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      options: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        name: </span><span class=\"mtk11\">`content`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        path: </span><span class=\"mtk11\">`${</span><span class=\"mtk1\">__dirname</span><span class=\"mtk11\">}/content`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-transformer-sharp`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-plugin-sharp`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Zusätzlich stelle ich sicher, dass es den Ordner namens <code class=\"language-text\">content</code> im Stammverzeichnis meines Projekts gibt. Weil es ihn im Projekt noch nicht gibt, lege ich ihn an. Wir benötigen ihn im Moment nicht, aber hier werde ich später Markdown-Dateien für Blogbeiträge anlegen.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">mkdir content</span></span></code></pre>\n<p>Starte an dieser Stelle den Entwicklungsserver neu, um sicherzustellen, dass kein Fehler vorliegt. Führe <code class=\"language-text\">gatsby develop</code> erneut aus. Wenn du keine Fehlermeldungen siehst ist alles gut.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07366bd56fb5e0eea5cfe415c6dd0054/191e2/bloggatsby2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANklEQVQoz2N48+bN/9evX///+fPnfxD49+/ff0oAAzKHUsPABoIMgWGquJDqBv6nMhg1kHIAAKc+zKpuXfXjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"A screenshot of Gatsby default starter after tidy up\"\n        title=\"A screenshot of Gatsby default starter after tidy up\"\n        src=\"/static/07366bd56fb5e0eea5cfe415c6dd0054/f058b/bloggatsby2.png\"\n        srcset=\"/static/07366bd56fb5e0eea5cfe415c6dd0054/c26ae/bloggatsby2.png 158w,\n/static/07366bd56fb5e0eea5cfe415c6dd0054/6bdcf/bloggatsby2.png 315w,\n/static/07366bd56fb5e0eea5cfe415c6dd0054/f058b/bloggatsby2.png 630w,\n/static/07366bd56fb5e0eea5cfe415c6dd0054/40601/bloggatsby2.png 945w,\n/static/07366bd56fb5e0eea5cfe415c6dd0054/78612/bloggatsby2.png 1260w,\n/static/07366bd56fb5e0eea5cfe415c6dd0054/191e2/bloggatsby2.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>MapLibre GL JS installieren</h2>\n<p>Wir werden MapLibre GL JS von NPM installieren. Du kannst <a href=\"https://www.npmjs.com/package/maplibre-gl\">der Anleitung</a> folgen. Im Grunde genommen reicht es aus, den nachfolgenden Befehl im Terminal auszuführen:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ npm i maplibre-gl</span></span></code></pre>\n<blockquote>\n<p>Anmerkung: Die aktuelle Version von <code class=\"language-text\">maplibre-gl</code> ist <code class=\"language-text\">2.0.0-pre.6</code> zum Zeitpunkt des Schreibens. Ich möchte diese Version installieren, auch wenn es keine stabile Version ist. Deshalb rufe ich <code class=\"language-text\">npm i maplibre-gl@2.0.0-pre.6</code> auf.</p>\n</blockquote>\n<p>Das NPM Paket beinhaltet eine CSS-Datei. Diese werde ich später direkt aus dem npm-Modul in meine Komponente importiere. </p>\n<blockquote>\n<p>Alternativ ist es möglich, die CSS-Datei mittels der Zeile <code class=\"language-text\">&lt;link href='https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css' rel='stylesheet' /></code> im Kopfbereich der <a href=\"https://www.gatsbyjs.com/docs/custom-html/\">statischen HTML-Seite zu importieren</a>. MapLibre verwendet <a href=\"https://github.com/maplibre/maplibre-gl-js/blob/main/docs/README-unpkg.md\">unpkg.com</a>.</p>\n</blockquote>\n<h2>Die Karte anzeigen</h2>\n<p>Ich möchte, dass dieselbe Karte in allen Blogeinträgen verwendet wird. Anstatt also auf jeder Seite eine Karte hinzuzufügen, werde ich sie in die Komponente <code class=\"language-text\">Layout</code> einfügen. So wird jede Seite meiner Website die Karte beinhalten. Um den Code wiederverwendbar zu machen, werde ich eine separate Komponente namens <code class=\"language-text\">Map</code> erstellen. Beginnen wir mit der Datei  <code class=\"language-text\">components/map.js</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">useRef</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useState</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibre-gl&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibre-gl/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">mapContainerStyle</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  width: </span><span class=\"mtk11\">&quot;100%&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  height: </span><span class=\"mtk11\">&quot;120px&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">mapContainerRef</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useRef</span><span class=\"mtk1\">(</span><span class=\"mtk5\">null</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">map</span><span class=\"mtk1\">, </span><span class=\"mtk7\">setMap</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useState</span><span class=\"mtk1\">(</span><span class=\"mtk5\">null</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Map</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      container: </span><span class=\"mtk7\">mapContainerRef</span><span class=\"mtk1\">.</span><span class=\"mtk7\">current</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      style: </span><span class=\"mtk11\">&#39;https://demotiles.maplibre.org/style.json&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      center: [</span><span class=\"mtk8\">-</span><span class=\"mtk6\">0.687787</span><span class=\"mtk1\">, </span><span class=\"mtk6\">38.185674462487874</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      zoom: </span><span class=\"mtk6\">10</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addControl</span><span class=\"mtk1\">(</span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk7\">NavigationControl</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">&quot;top-right&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">setMap</span><span class=\"mtk1\">(</span><span class=\"mtk7\">map</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">remove</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ref</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerRef</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerStyle</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk8\">Map</span></span></span></code></pre>\n<blockquote>\n<p>Der Kartenstil '<a href=\"https://demotiles.maplibre.org/style.json\">https://demotiles.maplibre.org/style.json</a>' zeigt eine sehr einfach gehaltene Karte an. Diese ist für Demoseiten ideal, weil kein Zugriffstoken notwendig ist. Sieh dir das <a href=\"https://maplibre.org/maplibre-gl-js-docs/example/simple-map/\">Beispiel</a> in der MapLibre Dokumentation an, um weitere Informationen zu erhalten. Beispiele mit detaillierteren Karten findest du ebenfalls in der <a href=\"https://maplibre.org/maplibre-gl-js-docs/\">MapLibre Dokumentation</a> inklusive Erläuterungen zur Nutzung von Tokens.</p>\n</blockquote>\n<p>Und integriere die Kartenkomponente in die Datei ´layout.js´.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// layout.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;prop-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./map&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ children }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">children</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Layout</span><span class=\"mtk1\">.</span><span class=\"mtk7\">propTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  children: </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\">.</span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">isRequired</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span></span></span></code></pre>\n<p>Starte an dieser Stelle den Entwicklungsserver neu, um sicherzustellen, dass die Karte korrekt angezeigt wird. Führe <code class=\"language-text\">gatsby develop</code> erneut aus. Wenn du die Karte im oberen Bereich siehst ist alles gut.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cfd311d61a7754d612bfeaa9d2343130/191e2/bloggatsby3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVQoz82NzU7CQBSF5/3fwCdwh1GjxqBiMIrxD4tYW4MBoRQqjWGQ0hba+Zy2mrAQw8KFJznzzT3JPVdcOvvU/QG2BHuitAtaMs3/zzLkxtml0TExhl0urAZ7VpUt94qzdpnqy4Adw+D2usZ56x5x5z/ki9Yk1c6ocpryi+OEUueJzd4RNbeJ6b5z3HWoPJ7QbG1w6pU4tLaxywfU7Qrite/R7vUZT0PmCqJEFU4h1gwW4OlhFL0xC33mcUCss0RnaewzXYxIwiGR/GAWBQiU3lS6icz8wmX9lBUS31VZp9LPaq5nsTzkt9Xq6+tI8Mf6/4Wf4sy5bvQR5DgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Anzeige einer Karte auf der Indexseite\"\n        title=\"Anzeige einer Karte auf der Indexseite\"\n        src=\"/static/cfd311d61a7754d612bfeaa9d2343130/f058b/bloggatsby3.png\"\n        srcset=\"/static/cfd311d61a7754d612bfeaa9d2343130/c26ae/bloggatsby3.png 158w,\n/static/cfd311d61a7754d612bfeaa9d2343130/6bdcf/bloggatsby3.png 315w,\n/static/cfd311d61a7754d612bfeaa9d2343130/f058b/bloggatsby3.png 630w,\n/static/cfd311d61a7754d612bfeaa9d2343130/40601/bloggatsby3.png 945w,\n/static/cfd311d61a7754d612bfeaa9d2343130/78612/bloggatsby3.png 1260w,\n/static/cfd311d61a7754d612bfeaa9d2343130/191e2/bloggatsby3.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ich verwende React Hooks - <code class=\"language-text\">useRef()</code> um auf das Map Container DOM Element zuzugreifen. <code class=\"language-text\">UseState()</code>, um das Map-Objekt als Status zu speichern, so dass ich den Wert in anderen Teilen der Komponente verwenden kann, und <code class=\"language-text\">UseEffect()</code>, um das Map-Objekt zu erstellen, wenn die Komponente aktiviert wird. Das leere Abhängigkeits-Array als zweites Argument für <code class=\"language-text\">useEffect()</code> ist wichtig. Wenn du das zweite Argument entfernst, wirst du feststellen, dass die Funktion in eine Endlosschleife gerät. Das liegt daran, dass <code class=\"language-text\">useEffect()</code> immer dann ausgeführt wird, wenn sich der Zustand ändert. Da wir <code class=\"language-text\">setMap(map)</code> innerhalb desselben Hooks verwenden, wird es immer wieder ausgeführt. Durch das leere Array wird der Effekt-Hook nur einmal ausgeführt, wenn die Komponente initialisiert wird. Das ist das was wir erzielen möchten. Uns ist wichtig, dass nur einmal eine neue Map erstellt wird. Danach soll dieselbe Map verwendet werden. Mit <code class=\"language-text\">return () => map.remove()</code> wird aufgeräumt, wenn die Komponente entfernt wird.</p>\n<h2>Marker hinzufügen</h2>\n<p>Erstellen wir nun einige Marker auf der Karte. Jeder Blogbeitrag wird ein Array von Ortsdaten enthalten, und ich möchte für jeden Ort eine Markierung erstellen. Später wird dies über das Formatieren der Markdown-Dateien erfolgen, aber für den Anfang erstellen wir ein einfaches Objekt mit den Koordinaten als Datenquelle.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// on top of map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    name: </span><span class=\"mtk11\">&quot;Spanien&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    longitude: </span><span class=\"mtk8\">-</span><span class=\"mtk6\">0.687787</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    latitude: </span><span class=\"mtk6\">38.185674462487874</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    name: </span><span class=\"mtk11\">&quot;Germany&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    longitude: </span><span class=\"mtk6\">7.587787</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    latitude: </span><span class=\"mtk6\">50.7438</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    name: </span><span class=\"mtk11\">&quot;Frankreich&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    longitude: </span><span class=\"mtk6\">3.687787</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    latitude: </span><span class=\"mtk6\">45.753</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">]</span></span></span></code></pre>\n<blockquote>\n<p>Die Koordinaten meiner Plätze sind mir bekannt. Dies ist nicht in jedem Anwendungsfall so. Eventuell kennst du nur die Adreese oder den Namen eines POI. In diesem Fall wäre es schön, wenn ein Dienst integriert wäre, der anhand eines Textes die Koordinate errechnet. Ein solcher Dienst nennt sich Geocoding. Falls du einen solchen integrieren möchtest, schaue dir die Variante von Openstreetmap an. Dies ist <a href=\"https://nominatim.org/\">Nominatim</a>. </p>\n</blockquote>\n<p>Als nächstes werde ich zwei neue Komponenten erstellen: <code class=\"language-text\">Marker</code> and <code class=\"language-text\">Markers</code>. Beide implementiere ich in der Datei <code class=\"language-text\">markers.js</code></p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// markers.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">useRef</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibre-gl&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Marker</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ map, place }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">markerRef</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useRef</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">marker</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Marker</span><span class=\"mtk1\">(</span><span class=\"mtk7\">markerRef</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk7\">setLngLat</span><span class=\"mtk1\">([</span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">longitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">latitude</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk7\">addTo</span><span class=\"mtk1\">(</span><span class=\"mtk7\">map</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">marker</span><span class=\"mtk1\">.</span><span class=\"mtk7\">remove</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ref</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">markerRef</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Markers</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ map, places }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">places</span><span class=\"mtk1\">.</span><span class=\"mtk7\">map</span><span class=\"mtk1\">(place </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Marker</span><span class=\"mtk1\"> </span><span class=\"mtk3\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">name</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">map</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">map</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">place</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">place</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ))</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Markers</span></span></span></code></pre>\n<p>Die Komponente <code class=\"language-text\">Markers</code> verwendet zwei Eigenschaften der Komponente <code class=\"language-text\">Map</code>. In React werden die Eigenschaften 'props' genannt. Das erste 'props' ist ein Verweis auf die Karte 'map'. Das zweite <code class=\"language-text\">props</code> sind die Daten der Marker. Diese geben wir in der Eigenschaft 'Places' an die Komponente 'Marker' weiter. Diese Komponente kümmert sich dann um die Darstellung auf der Karte.</p>\n<p>Ich verwende die [Turf.js-Bibliothek] (<a href=\"http://turfjs.org/\">http://turfjs.org/</a>), um den Bereich der Karte zu berechnen, der angezeigt werden soll. Dieser Bereich wird als Bounding Box bezeichnet. Ich möchte, dass alle Markierungen, die zum Blogbeitrag gehören, sichtbar sind. Es kann also sein, dass die Bounding Box einen kleinen Ausschnitt der Welt darstellt. Es kann aber auch sein, dass die ganze Welt relevant ist. Bei jedem neuen Aufruf ist es daher wichtig, dass die Karte den Mittelpunkt und die Zoomstufe neu berechnet. Neben <code class=\"language-text\">Turf.js</code> installiere ich <code class=\"language-text\">@turf/helpers</code>, damit die Werte in ein GeoJson-Objekt umgewandelt werden. Das ist es, was <code class=\"language-text\">Turf.js</code> erwarten. </p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ npm install @turf/bbox @turf/helpers</span></span></code></pre>\n<p>In the <code class=\"language-text\">map.js</code>, I will create a new <code class=\"language-text\">useEffect()</code> hook. The first effect hook we used was to run <em>once</em> to create a new map, but the markers will be created and removed many times whenever we navigate between pages, so the new effect hook with different dependency array will be necessary.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">useRef</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useState</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibre-gl&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">bbox</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@turf/bbox&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">multiPoint</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@turf/helpers&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Markers</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./markers&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibre-gl/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// ... variables</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">// add new effect hook</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk7\">map</span><span class=\"mtk1\">) </span><span class=\"mtk8\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">places</span><span class=\"mtk1\">.length </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">coords</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">places</span><span class=\"mtk1\">.</span><span class=\"mtk7\">forEach</span><span class=\"mtk1\">(place </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">coords</span><span class=\"mtk1\">.</span><span class=\"mtk7\">push</span><span class=\"mtk1\">([</span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">longitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">latitude</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">feature</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">multiPoint</span><span class=\"mtk1\">(</span><span class=\"mtk7\">coords</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">box</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">bbox</span><span class=\"mtk1\">(</span><span class=\"mtk7\">feature</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">fitBounds</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          [</span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">], </span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">1</span><span class=\"mtk1\">]],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          [</span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">2</span><span class=\"mtk1\">], </span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">3</span><span class=\"mtk1\">]],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          padding: </span><span class=\"mtk6\">20</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          maxZoom: </span><span class=\"mtk6\">14</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          duration: </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    } </span><span class=\"mtk8\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">easeTo</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        center: [</span><span class=\"mtk8\">-</span><span class=\"mtk6\">73.9856</span><span class=\"mtk1\">, </span><span class=\"mtk6\">40.7497</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        zoom: </span><span class=\"mtk6\">10</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        duration: </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk7\">map</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ref</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerRef</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerStyle</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Markers</span><span class=\"mtk1\"> </span><span class=\"mtk3\">map</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">map</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">places</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">places</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk8\">Map</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9fd345cf08b5b6e67fe79fdb1b216dc8/191e2/bloggatsby4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/ElEQVQoz82OUUvCUBiG9/9/QeBNV3UXRBRhWRRLycnmdLo1NdIMItq0bW7TM8/TaRBEMPCiiz54eL7vcHh5NWtiY5kpTifGcFP6rwV+DA+RxFd4CRiWSbd1iOE0MDsJ86dbrGGLq5uAk0vBeTNg5NcIhwdozbd9rqdHtF96DBayDPIU7sdWGQbLEN2r0526yg7HbpuL5wb6uMeZ6XJ336U+PkWf72FPamiPM4/RzGaZrhBAXkgFZMqZci7WRGJFslVvG0GQLQjygETEBJs1eZaQind1h0RFiIZUKV+UIyv8e68eTaqPUn5DhXdH+3mUPeRuTSob8sfz/wM/AYuUt0u0HO08AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Neu hinzugefügte Marker\"\n        title=\"Neu hinzugefügte Marker\"\n        src=\"/static/9fd345cf08b5b6e67fe79fdb1b216dc8/f058b/bloggatsby4.png\"\n        srcset=\"/static/9fd345cf08b5b6e67fe79fdb1b216dc8/c26ae/bloggatsby4.png 158w,\n/static/9fd345cf08b5b6e67fe79fdb1b216dc8/6bdcf/bloggatsby4.png 315w,\n/static/9fd345cf08b5b6e67fe79fdb1b216dc8/f058b/bloggatsby4.png 630w,\n/static/9fd345cf08b5b6e67fe79fdb1b216dc8/40601/bloggatsby4.png 945w,\n/static/9fd345cf08b5b6e67fe79fdb1b216dc8/78612/bloggatsby4.png 1260w,\n/static/9fd345cf08b5b6e67fe79fdb1b216dc8/191e2/bloggatsby4.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Wir haben jetzt Marker auf der Karte für einen Ort in Spanien, einen Ort in Frankreich und einen in Deutschland. MapLibre bietet sehr nützliche Methoden wie <code class=\"language-text\">fitBounds()</code> und <code class=\"language-text\">easeTo()</code>. Es gibt noch mehr Funktionen und Optionen. Sieh dir die MapLibre Dokumentation an.</p>\n<h2>Hinzufügen von Markdown-Dateien</h2>\n<p>Es ist an der Zeit, die Daten von echten Blog-Einträgen anstelle des \"Places\"-Objekts zu verwenden. Ich habe Markdown <code class=\"language-text\">.md</code>-Dateien im <code class=\"language-text\">content</code>-Ordner erstellt, welche die Daten für die Marker beinhalten. Hier ist ein Beispiel (<code class=\"language-text\">content/spanien.md</code>):</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">---</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">title: Spanien</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">date: 2021-12-27</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">places:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">- {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    name: &quot;Spanien&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    longitude: -0.687787,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    latitude: 38.185674462487874,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">---</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Die Anreise war ein Abenteuer.</span></span></code></pre>\n<h2>Seiten (Pages) generieren</h2>\n<p>Um Seiten aus Markdown-Seiten in Gatsby zu generieren, sind zusätzliche Schritte erforderlich. Hier gehe ich nur auf den Code ein, der für unseres Projekts relevant ist. Installiere als erstes das Plugin <code class=\"language-text\">gatsby-transformer-remark</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ npm install gatsby-transformer-remark</span></span></code></pre>\n<p>Dann aktualisiere die Dateien <code class=\"language-text\">gatsby-config.js</code> und <code class=\"language-text\">gatsby-node.js</code> so, dass das Plugin <code class=\"language-text\">gatsby-transformer-remark</code> eingebunden wird.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// gatsby-config.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">module</span><span class=\"mtk1\">.</span><span class=\"mtk8\">exports</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  siteMetadata: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    title: </span><span class=\"mtk11\">`Gatsby MapLibre Blog`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    description: </span><span class=\"mtk11\">``</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    author: </span><span class=\"mtk11\">`Me`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  plugins: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-plugin-react-helmet`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      resolve: </span><span class=\"mtk11\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      options: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        name: </span><span class=\"mtk11\">`content`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        path: </span><span class=\"mtk11\">`${</span><span class=\"mtk1\">__dirname</span><span class=\"mtk11\">}/content`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-transformer-remark`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-transformer-sharp`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">`gatsby-plugin-sharp`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// gatsby-node.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">path</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;path&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createFilePath</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`gatsby-source-filesystem`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">exports</span><span class=\"mtk1\">.</span><span class=\"mtk7\">onCreateNode</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ node, getNode, actions }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createNodeField</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">internal</span><span class=\"mtk1\">.</span><span class=\"mtk7\">type</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;MarkdownRemark&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">slug</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createFilePath</span><span class=\"mtk1\">({ </span><span class=\"mtk7\">node</span><span class=\"mtk1\">, </span><span class=\"mtk7\">getNode</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">createNodeField</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">node</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      name: </span><span class=\"mtk11\">`slug`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      value: </span><span class=\"mtk7\">slug</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">exports</span><span class=\"mtk1\">.</span><span class=\"mtk7\">onCreateWebpackConfig</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ stage, loaders, actions }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">stage</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;build-html&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">||</span><span class=\"mtk1\"> </span><span class=\"mtk7\">stage</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;develop-html&quot;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">actions</span><span class=\"mtk1\">.</span><span class=\"mtk7\">setWebpackConfig</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      module: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        rules: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            test:</span><span class=\"mtk9\"> /maplibre-gl/</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            use: </span><span class=\"mtk7\">loaders</span><span class=\"mtk1\">.</span><span class=\"mtk7\">null</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">exports</span><span class=\"mtk1\">.</span><span class=\"mtk7\">createPages</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> ({ graphql, actions }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">createPage</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">graphql</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    query {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      allMarkdownRemark {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        edges {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          node {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">            fields {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">              slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  `</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">result</span><span class=\"mtk1\">.</span><span class=\"mtk7\">data</span><span class=\"mtk1\">.</span><span class=\"mtk7\">allMarkdownRemark</span><span class=\"mtk1\">.</span><span class=\"mtk7\">edges</span><span class=\"mtk1\">.</span><span class=\"mtk7\">forEach</span><span class=\"mtk1\">(({ node }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">createPage</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      path: </span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk7\">slug</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      component: </span><span class=\"mtk7\">path</span><span class=\"mtk1\">.</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">`./src/templates/postTemplate.js`</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        slug: </span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk7\">slug</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Wir erstellen die Datei <code class=\"language-text\">./src/templates/postTemplate.js</code>, welche als Template für unsere Markdown-Dateien verwendet wird.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// postTemplate.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Link</span><span class=\"mtk1\">, </span><span class=\"mtk7\">graphql</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;gatsby&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;../components/layout&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PostTemplate</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ data }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">frontmatter</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk1\">.</span><span class=\"mtk7\">markdownRemark</span><span class=\"mtk1\">.</span><span class=\"mtk7\">frontmatter</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">html</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk1\">.</span><span class=\"mtk7\">markdownRemark</span><span class=\"mtk1\">.</span><span class=\"mtk7\">html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Layout</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">frontmatter</span><span class=\"mtk1\">.</span><span class=\"mtk7\">title</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">h1</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">dangerouslySetInnerHTML</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">{ __html: </span><span class=\"mtk7\">html</span><span class=\"mtk1\"> }</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk3\">to</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&#39;/&#39;</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Back to Index</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">Link</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">Layout</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PostTemplate</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pageQuery</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">graphql</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  query($slug: String!) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    markdownRemark(fields: { slug: { eq: $slug }}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        places {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          name</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          longitude</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          latitude</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">`</span></span></span></code></pre>\n<p>Nun ist es erforderlich den Entwicklungsserver neu zu starten, da wir die <code class=\"language-text\">gatsby-node.js</code> aktualisiert haben. Wenn alles gut geht, wird Gatsby Seiten für uns generieren. </p>\n<h2>Add Navigation</h2>\n<p>Damit wir die einzelnen Seiten aufrufen können, fügen wir eine einfache Navigation in einer neuen <code class=\"language-text\">PostList</code> Komponente in der Datei <code class=\"language-text\">postList.js</code> hinzu. Wir verwenden <code class=\"language-text\">useStaticQuery</code>, um GraphQL Abfragen zu nutzen.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// components/postList.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Link</span><span class=\"mtk1\">, </span><span class=\"mtk7\">graphql</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useStaticQuery</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;gatsby&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">query</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">graphql</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  query MyQuery {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    allMarkdownRemark {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      nodes {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        fields {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">          slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PostList</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useStaticQuery</span><span class=\"mtk1\">(</span><span class=\"mtk7\">query</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">nodes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk1\">.</span><span class=\"mtk7\">allMarkdownRemark</span><span class=\"mtk1\">.</span><span class=\"mtk7\">nodes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">ul</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        listStyleType: </span><span class=\"mtk11\">&quot;none&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        padding: </span><span class=\"mtk6\">0</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk7\">nodes</span><span class=\"mtk1\">.</span><span class=\"mtk7\">map</span><span class=\"mtk1\">(node </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">title</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">frontmatter</span><span class=\"mtk1\">.</span><span class=\"mtk7\">title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">li</span><span class=\"mtk1\"> </span><span class=\"mtk3\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">title</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk3\">to</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">fields</span><span class=\"mtk1\">.</span><span class=\"mtk7\">slug</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">title</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">Link</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">li</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">ul</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PostList</span></span></span></code></pre>\n<p>Am Ende integrieren wir die Navigation <code class=\"language-text\">&lt;PostList /></code> in das Layout, also in die Datei <code class=\"language-text\">layout.js</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// components/layout.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;prop-types&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./map&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PostList</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;./postList&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ children }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">{ margin: </span><span class=\"mtk11\">&#39;0 40px&#39;</span><span class=\"mtk1\"> }</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">children</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">main</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">PostList</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Layout</span><span class=\"mtk1\">.</span><span class=\"mtk7\">propTypes</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  children: </span><span class=\"mtk7\">PropTypes</span><span class=\"mtk1\">.</span><span class=\"mtk7\">node</span><span class=\"mtk1\">.</span><span class=\"mtk7\">isRequired</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk8\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span></span></span></code></pre>\n<p>Wir können jetzt zwischen den Seiten navigieren. Alles passt aber noch nicht. Die Karte wird bei jedem Laden der Seite neu geladen. Das verursacht unnötige API-Aufrufe und beeinträchtigt die Benutzerfreundlichkeit. Ein weiteres Problem ist, dass die Marker auf allen Seiten gleich sind. Wir haben bisher die GraphQL-Abfragedaten noch nicht mit unserer Kartenkomponente verbunden. Wir benötigen Props , um das zu handhaben.</p>\n<h2>Gatsby Browser API</h2>\n<p>Warum die Karte neu geladen wird, <a href=\"https://www.gatsbyjs.com/docs/how-to/routing/layout-components/#how-to-prevent-layout-components-from-unmounting\">findest du auf der Gatsby-Website</a> erklärt. Kurz: Wir müssen die umhüllende <code class=\"language-text\">Layout</code> Komponente von unseren Seiten entfernen und die <code class=\"language-text\">wrapPageElement</code> Browser API in <code class=\"language-text\">gatsby-browser.js</code> verwenden. Mehr Informationen zu dieser Schnittstelle findest du unter [der API-Referenz] (<a href=\"https://www.gatsbyjs.com/docs/reference/config-files/gatsby-browser/#wrapPageElement\">https://www.gatsbyjs.com/docs/reference/config-files/gatsby-browser/#wrapPageElement</a>).\nVerwendet den gleichen Code in <code class=\"language-text\">gatsby-ssr.js</code> für Server-Side Rendering.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// gatsby-browser.js &amp; gatsby-ssr.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;react&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">require</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;./src/components/layout&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk7\">default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">exports</span><span class=\"mtk1\">.</span><span class=\"mtk7\">wrapPageElement</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ element, props }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk9\">{</span><span class=\"mtk8\">...</span><span class=\"mtk7\">props</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span><span class=\"mtk9\">{</span><span class=\"mtk7\">element</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">Layout</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<blockquote>\n<p>Denke daran, alle Layout-Komponenten, zu entfernen. Es tritt zwar kein Fehler auf, aber du siehst die Karte zweimal. </p>\n</blockquote>\n<p>Wenn du nun zwischen den Seiten navigierst, wird die Karte nicht neu geladen. Im nächsten Schritt sorgen wir nun dafür, dass sich der Inhalt der Karte dynamisch an die Eigenschaften des Blogbeitrags anpasst.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c46e78647711a2aed93c3369bb08779/191e2/bloggatsby5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCklEQVQoz62NUUsCQRSF5///gsCXnuoxIoqwjApTamXVVl3bFLTMopq11l13dXbna7DyYSGI8sDhuzOXc66w+01se4ZTm2K5Ec5TijeFm0DjGXdDsOo2jeo2VquEXQsZDc6pd6qcnEn2jhWHFcmtV8DvbCEqz5uc3u1gjR3aE1MQfNp9zwyh/eZT7hZpDF3DFrvuFUf3Jcq9aw5sl4vLBsXePuXRBs1+ATF+GdDp1xg+PjDPIEm1McSGsWGi5gQqIjS7eKGQ8QSZSEI1RS7mJHHITL2at0+Q+ogoMAEZo8xSZya1lM4xP/8skaqULM1WEa21cZ6/t1jd//r4nv8qkS/6T9mykDVr7YUfgzK2vmJgWPUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Pages and navigation and no reload\"\n        title=\"Pages and navigation and no reload\"\n        src=\"/static/9c46e78647711a2aed93c3369bb08779/f058b/bloggatsby5.png\"\n        srcset=\"/static/9c46e78647711a2aed93c3369bb08779/c26ae/bloggatsby5.png 158w,\n/static/9c46e78647711a2aed93c3369bb08779/6bdcf/bloggatsby5.png 315w,\n/static/9c46e78647711a2aed93c3369bb08779/f058b/bloggatsby5.png 630w,\n/static/9c46e78647711a2aed93c3369bb08779/40601/bloggatsby5.png 945w,\n/static/9c46e78647711a2aed93c3369bb08779/78612/bloggatsby5.png 1260w,\n/static/9c46e78647711a2aed93c3369bb08779/191e2/bloggatsby5.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Die Kartenkomponente für die Verwendung von props anpassen.</h2>\n<p>Um unterschiedliche Koordinaten von den Blogbeiträgen an unsere \"Map\"-Komponente zu senden, müssen wir die <code class=\"language-text\">Map</code>-Komponente ändern. Wir verwenden wieder Eigenschaften oder <code class=\"language-text\">props</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// in map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// ... remove const places</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// add props &amp; update places to props.places</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> props </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3 mtki\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk7\">map</span><span class=\"mtk1\">) </span><span class=\"mtk8\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">.length </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">coords</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">.</span><span class=\"mtk7\">forEach</span><span class=\"mtk1\">(place </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">coords</span><span class=\"mtk1\">.</span><span class=\"mtk7\">push</span><span class=\"mtk1\">([</span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">longitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">latitude</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3 mtki\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk7\">map</span><span class=\"mtk1\">, </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3 mtki\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk8\">!</span><span class=\"mtk7\">map</span><span class=\"mtk1\">) </span><span class=\"mtk8\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">.length </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk6\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">coords</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> []</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">.</span><span class=\"mtk7\">forEach</span><span class=\"mtk1\">(place </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">coords</span><span class=\"mtk1\">.</span><span class=\"mtk7\">push</span><span class=\"mtk1\">([</span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">longitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">place</span><span class=\"mtk1\">.</span><span class=\"mtk7\">latitude</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">feature</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">multiPoint</span><span class=\"mtk1\">(</span><span class=\"mtk7\">coords</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">box</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">bbox</span><span class=\"mtk1\">(</span><span class=\"mtk7\">feature</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">fitBounds</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          [</span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">], </span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">1</span><span class=\"mtk1\">]],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          [</span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">2</span><span class=\"mtk1\">], </span><span class=\"mtk7\">box</span><span class=\"mtk1\">[</span><span class=\"mtk6\">3</span><span class=\"mtk1\">]],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          padding: </span><span class=\"mtk6\">20</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          maxZoom: </span><span class=\"mtk6\">14</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          duration: </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    } </span><span class=\"mtk8\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">easeTo</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        center: [</span><span class=\"mtk8\">-</span><span class=\"mtk6\">73.9856</span><span class=\"mtk1\">, </span><span class=\"mtk6\">40.7497</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        zoom: </span><span class=\"mtk6\">10</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        duration: </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk7\">map</span><span class=\"mtk1\">, </span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">ref</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerRef</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">mapContainerStyle</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Markers</span><span class=\"mtk1\"> </span><span class=\"mtk3\">map</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">map</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">places</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">props</span><span class=\"mtk1\">.</span><span class=\"mtk7\">places</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2>Die Koordinaten in der Layout-Komponente verwenden</h2>\n<p>Last but not least werden die Koordinaten an die Komponente <code class=\"language-text\">Layout</code> weiter gegeben. Ich verwende den <code class=\"language-text\">useState()</code>-Hook, weil die Daten für jede Seite unterschiedlich sind. So werden diese jedem neuen Seitenaufruf aktualisiert. Der <code class=\"language-text\">useEffect()</code>-Hook bewirkt, dass die Daten nur wenn <code class=\"language-text\">props</code> sich ändert aktualisiert werden.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// components/layout.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3 mtki\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk3\">places</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">places</span><span class=\"mtk9\">}</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      // ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3 mtki\">// ...</span></span></span></code></pre>\n<p>Das war's! Jetzt werden die Daten und Markierungen korrekt aktualisieren.</p>\n<p>Todo</p>\n<ul>\n<li>Popup für jede Markierung hinzufügen</li>\n<li>Hinzufügen eines eigenen Markierungsdesigns (z.B. SVG)</li>\n<li>Hinzufügen von Marker-Animationen</li>\n<li>Hinzufügen von benutzerdefinierten Kartenstilen</li>\n</ul>\n<h2>Referenzen</h2>\n<ul>\n<li><a href=\"https://github.com/maplibre/maplibre-react-examples\">MapLibre React examples repo</a>: There are only a few examples but I got a lot of help from the repo as they covered almost everything I needed to know.</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/\">MapLibre examples</a></li>\n<li><a href=\"https://erraticgenerator.com/blog/gatsby-blog-with-mapbox-gl-js-using-react-hooks/\">Mapbox Gatsby Blog with Hooks</a>.</li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .mtk9 { color: #D30102; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/maplibregl/2021-11-07-maplibre-gatsby-starter-first.steps.md","excerpt":"Ich gestalte gerne Webseiten mit Gatsby und habe vor kurzem angefangen, MapLibre GL zu benutzen. Ich wünsche mir, beides zu kombinieren. Die…","fields":{"slug":"/maplibre-blog-with-gatsby/"},"frontmatter":{"title":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","date":"07.11.2021","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","Gatsby"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACj0lEQVQ4y3WU3UtTcRjHz5/RhV7MuS23IrCuIsqgm64GobTNuQkVg14cFtFFFybilUW7KFtBVKvNvbloS2PNytk2i8xLQaIa6FUGUerEuZc+O2c7nR3s8HD4Ps/z/f6e5/cqVBtfpVLhv17Ynkx/u+jJdA3ETc4o1uWO4xIkJdOkT1AqE9n8icsvW3sCmL43ZLDXDCBFSCVyeaW+Li5XKqO+RRgaS5Bqenuw3TohVQbgAkhBgFaWxRIYefJ5z6lnRkfE6IxorROHL7067/0yHP2JAXAJkoIADbJYX6xMt63d/g5HLUed41dmPMnC4w9Vb3oHA9xOFgiSggCtpdsfz9b6Fza3ikxGY6kNvLcv3OEID0fXHs1Xrz1dPTqYwgC4BElBgAYZCUIhlv7KSCZnbUjGPuJOjr/b8bzeOuhKaE77MQAuQVIQoEFGwvoLFzwZpfjYYOrebGls6g8udcReIrgESSnFCAW2sd0WklpiVw6ceT42tf7gfaVn9BOLhAFwCZKCIE0NCULB5KxXkIq0WQKu8eWHueqdme2rvhUMgEuQlNwOhlAt1tmCh1yJW9Mb3nTp/lwZA9yc3iBISi1Wtt0o7j95fc47W7r7togxW1yCilVotC0vmDwkm6m1+M035pFhAFxjc836grHiKrHBHjb0hXW2gHkoZx7KAgxiUCVmjxWHRBwbEsdgMv19YXntzcIKBsAlKOmh/TsknDLOWot4PJmMrjfUeTb2e7P4IpMf8S1iAFyCpCBA4ywnpOPZdDHE5ukqtbC6lP/1cekHBsCVUvzVF0N5JdusQRrb3x/tPBeTbV9/lCAp9ZVsegxy9ceAWWitQT0vgT0EwK0/BtndHoNdniF34xka+O8z9Bc/dL8PGNk6AAAAAABJRU5ErkJggg==","width":80,"height":80,"src":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/829e2/maplibre.png","srcSet":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/829e2/maplibre.png 1x,\n/static/7c1705d3acc30aff7fec6028c9c6c6b0/e94d6/maplibre.png 1.5x,\n/static/7c1705d3acc30aff7fec6028c9c6c6b0/af1a8/maplibre.png 2x"}}}}}},"pageContext":{"slug":"/maplibre-blog-with-gatsby/","previous":{"id":"b5d9267a-aa69-5c87-ab40-823ccf431476","frontmatter":{"title":"Gatsby Blog with MapLibre GL JS and React Hooks","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","Gatsby"],"template":"post"},"fields":{"slug":"/en/maplibre-blog-with-gatsby/"}},"next":{"id":"b42dcf62-f0f4-5869-9b14-0a305261105a","frontmatter":{"title":"Joomla 4.x Tutorial - Excursion - Extension Development - Dependency Injection","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/en/joomla-dependency-injection/"}}}},"staticQueryHashes":[]}