{"componentChunkName":"component---src-templates-post-js","path":"/joomla-erweiterung-mit-dpdocker/","result":{"data":{"markdownRemark":{"html":"<p>Zur Erinnerung: <em>Docker</em> erleichtert die Verwaltung von Software in Containern. <em>Docker Compose</em> ist ein Tool, welches die Arbeit mit mehreren Containern vereinfacht. <em>DPDocker</em> enthält vorgefertigte Images, Container und Skripte, die dich bei der Entwicklung mit und für Joomla unterstützen.</p>\n<p>DPDocker bietet den Task <code class=\"language-text\">build</code>, mit dem Joomla Erweiterungen optimal integriert werden. Dazu ist es erforderlich, Regeln einzuhalten. Bei einer neuen Erweiterung würde dies Voraussetzungen beachten. Das Umbauen meiner Erweiterungen wäre aufwendig. In diesem Kapitel führe ich mit <a href=\"https://packagist.org/packages/astridx/jorobo\">jorobo</a> erstellte Extension mit DPDocker zusammen. So kann ich weiterhin meine Skripte zum Mappen, Builden, Zippen und Testen anwenden.</p>\n<h2>Voraussetzungen</h2>\n<p>Neben <a href=\"/ubuntu-docker-einrichten\">Docker</a> und <a href=\"/ubuntu-docker-compose-einrichten\">Docker Compose</a> ist <a href=\"https://github.com/Digital-Peak/DPDocker.git\">DPDocker</a> notwendig. Wenn du diesem <a href=\"mein-ubuntu-rechner/\">Set</a> bisher gefolgt bist, passt alles.</p>\n<h2>Installieren von Composer und PHP</h2>\n<h3>Installieren von Abhängigkeiten</h3>\n<p>Aktualisieren wir den Cache des Paketmanagers und installieren die erforderlichen Abhängigkeiten, einschließlich <code class=\"language-text\">php-cli</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt update\nsudo apt install php-cli unzip</code></pre></div>\n<h3>Herunterladen und Installieren von Composer</h3>\n<p>Wir rufen das <a href=\"https://getcomposer.org/installer\">Composer Installationsprogramm</a> mit <code class=\"language-text\">curl</code> auf:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd ~\ncurl -sS https://getcomposer.org/installer -o composer-setup.php</code></pre></div>\n<p>Jetzt überprüfen wir, ob das heruntergeladene Installationsprogramm mit dem SHA-384-Hash übereinstimmt.</p>\n<p>Mithilfe von <code class=\"language-text\">curl</code> rufen wir die neueste Signatur ab und speichern diese in einer Shell-Variable:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HASH=`curl -sS https://composer.github.io/installer.sig`</code></pre></div>\n<p>Der folgende PHP-Codeprüft das Installationsskript und gibt <code class=\"language-text\">Installer verified</code> aus, wenn alles korrekt ist.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">php -r „if (hash_file(‚SHA384‘, ‚composer-setup.php‘) === ‚$HASH‘) { echo ‚Installer verified‘; } else { echo ‚Installer corrupt‘; unlink(‚composer-setup.php‘); } echo PHP_EOL;“</code></pre></div>\n<p>Über folgenden Befehl wird Composer global (unter <code class=\"language-text\">/usr/local/bin</code> heruntergeladen) installiert:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer</code></pre></div>\n<p>Ich teste die Installation mit:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">composer</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Output   ______\n  / ____/___  ____ ___  ____  ____  ________  _____\n / /   / __ \\/ __ `__ \\/ __ \\/ __ \\/ ___/ _ \\/ ___/\n/ /___/ /_/ / / / / / / /_/ / /_/ (__  )  __/ /\n\\____/\\____/_/ /_/ /_/ .___/\\____/____/\\___/_/\n                    /_/\nComposer version 1.10.5 2020-04-10 11:44:22\n\nUsage:\n  command [options] [arguments]\n\nOptions:\n  -h, --help                     Display this help message\n  -q, --quiet                    Do not output any message\n  -V, --version                  Display this application version\n      --ansi                     Force ANSI output\n      --no-ansi                  Disable ANSI output\n  -n, --no-interaction           Do not ask any interactive question\n      --profile                  Display timing and memory usage information\n      --no-plugins               Whether to disable plugins.\n  -d, --working-dir=WORKING-DIR  If specified, use the given directory as working directory.\n      --no-cache                 Prevent use of the cache\n  -v|vv|vvv, --verbose           Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug\n...</code></pre></div>\n<p>Damit ist überprüft, dass Composer erfolgreich auf dem System installiert und systemweit verfügbar ist.</p>\n<h3>PHP unter Ubuntu 20.04 intallieren inklusive notwendiger Erweiterungen</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> php php-cli php-fpm php-json php-pdo php-mysql php-zip php-gd  php-mbstring php-curl php-xml php-pear php-bcmath</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">php -- version</code></pre></div>\n<h2>Clonen einer mit Jorobo erstellten Joomla Erweiterung</h2>\n<p>Als nächstes clone ich eines meiner Repositorys, in welchem sich eine Joomla Erweiterung befindet. Ich achte darauf, dass das Repo <strong>neben</strong> DPDocker abgelegt wird.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone  https://github.com/astridx/boilerplate.git</code></pre></div>\n<p>Als nächstes wechsele ich in den Ordner <code class=\"language-text\">boilerplate</code> und führe den Befehl aus, der alle notwendigen Abhängigkeiten herunterlädt.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> boilerplate\n\ncomposer <span class=\"token function\">install</span></code></pre></div>\n<p>Jetzt sind alle Abhängikeiten im Verzeichnis <code class=\"language-text\">vendor</code> abgelegt.</p>\n<h2>Joomla Erweiterung erstellen</h2>\n<p>Ich verwende <code class=\"language-text\">vendor/bin/robo build</code>. Im Ergebnis sehe ich das Unterverzeichnis <code class=\"language-text\">dist</code>, in dem sich gepackte Installationsdateien befinden.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">vendor/bin/robo build</code></pre></div>\n<p>Der Befehl <code class=\"language-text\">vendor/bin/robo list</code> zeigt mir alle möglichen Skripte an.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">vendor/bin/robo list\n\n<span class=\"token punctuation\">..</span>.\nAvailable commands:\n  build     Build the joomla extension package\n  bump      Bump Version placeholder __DEPLOY_VERSION__ <span class=\"token keyword\">in</span> this project. <span class=\"token punctuation\">(</span>Set the version up <span class=\"token keyword\">in</span> the jorobo.ini<span class=\"token punctuation\">)</span>\n  generate  Generate an extension skeleton - not implemented yet\n  headers   Update copyright headers <span class=\"token keyword\">for</span> this project. <span class=\"token punctuation\">(</span>Set the text up <span class=\"token keyword\">in</span> the jorobo.ini<span class=\"token punctuation\">)</span>\n  <span class=\"token builtin class-name\">help</span>      Displays <span class=\"token builtin class-name\">help</span> <span class=\"token keyword\">for</span> a <span class=\"token builtin class-name\">command</span>\n  list      Lists commands\n  map       Map into Joomla installation.\n  umap      Unmap from Joomla installation.</code></pre></div>\n<blockquote>\n<p>In der <a href=\"https://astridx.github.io/9997_jorobo/presentation/index.html#/\">Präsentation</a> sind die Befehle beschrieben.</p>\n</blockquote>\n<h2>Joomla Erweiterung mit DPDocker nutzen</h2>\n<p>Jetzt wechsele ich wieder ein Verzeichnis zurück - in das Verzeichnis, in dem <code class=\"language-text\">boilerplate</code> und <code class=\"language-text\">DPDocker</code> nebeneinader abgelegt sind. Hier rufe ich <a href=\"https://github.com/Digital-Peak/DPDocker/tree/master/webserver#execute\">./DPDocker/webserer/run.sh mysql rebuild</a> auf, wobei die Parameter optional sind:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./DPDocker/webserer/run.sh mysql rebuild</code></pre></div>\n<p>Mein Rechner arbeitet einige Minuten. In der Zeit erstellt er alle notwendigen Docker Container.</p>\n<h2>Mögliche Fehlermeldungen</h2>\n<h3>Hilfe bei der Meldung: <code class=\"language-text\">Docker Error bind: address already in use</code></h3>\n<p>Unter Umständen hilft es schon, alle Container zu entfernen.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">docker <span class=\"token function\">rm</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>docker <span class=\"token function\">ps</span> -a - q<span class=\"token variable\">)</span></span></code></pre></div>\n<p>Falls das problem weiterhin auftritt, lasse ich mir alle Dienste anzeigen, die den Port verwenden.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">lsof</span> -i -P -n <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token operator\">&lt;</span>port number<span class=\"token operator\">></span></code></pre></div>\n<p>Unter Ubuntu 20.04 stoppe ich diese Dienst mit</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">kill</span> <span class=\"token operator\">&lt;</span>process id<span class=\"token operator\">></span></code></pre></div>","excerpt":"Zur Erinnerung: Docker erleichtert die Verwaltung von Software in Containern. Docker Compose ist ein Tool, welches die Arbeit mit mehreren…","fields":{"slug":"/joomla-erweiterung-mit-dpdocker/"},"frontmatter":{"title":"Eine eigene Joomla-Erweiterung mit DPDocker","date":"07.08.2020","tags":["Linux","Ubuntu","DPDocker","Joomla"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAESUlEQVQ4y11Uf0xbZRQtzAlD9gMoBcQsizFGE51mcYapEzYH9gfFMN2UqFvEBcVodFMTN4KZRraJm25G/hia6JYly5ZpomHBSDTKYuYwM5K5IX19bV87SoG2MIr8aPu+473fey9BX3Lzvj7uPdx77jmfzf94iY2fv2vzbXReYjMfOldRdFJcppiiSFEM+Z32btVT4Rr9uM3Ic5bmWhjWmw7FFPZc8+Naij7NZcdEvR0RegecRoTpPE7fRmpXgHIGCdzNNWpDOdflmJ0VLAbbSSFiHjsX6FSQUd1lut/lEDKcdt1fV5wJPbc2O+IqRpSCvh3k2nDLaqNDa0wGY6CAs4TB0gQk/FtWCt9DuUKpzhdKzTLhq7KJyXNdAoBInjmWUWoKssknyjj/iOzUbIzB7uPOTLCs6irFMAEFn75LxL94D9N9pzHz63mMfvAC/hnoAwPOXb0EZfNyOcV4fSnXNdkWLaDPHDNNCZRYKGKHWjD6/g78/4l//i4mv+5CeNcGoWy6BX5XaZa5pdoIRaHcpuYqYS501VMufI8sFWOfvCGLp3q+xMhbXkTbtuP6bhcSJw4gMxFFevw6kmc/BQESr7K7tNnlSwzYOeGlH3VFGd/DS4S2c53QF+bARDGQUrsK0aNvQm24DcPrbdCaH0R2Zkr+w5G3G4TyaL5QXY6MOWEv6ch+OVy7EsHtd+pa83oR62yVydyBrzofY7/0IDnwE5hXKoDC3468JnNmLv0A38abhd/t0DVjbM1GMpgKuMswe3VAbi9x6iMsRPyIvrMVwd0eTCfiiF84j3BrDQJP3o5o935ordWY/vEsaNMEUgxjoRJwlgCLUkEaJz0WkYAkC8wN/0GAjVB3rEPi2p+YvPI7koMXET3RCb+nHIGta4jPgxg/toe5l4Cq8Z630ZaGtC3LEXmlRo91vCisceLH26E4HQgffh1q070I7W9GpKtd8hht2yZzZv/6jSlgDvWQMXKUl9I97nVAeWxFZvgBm4i8ulkmZ5JjiOyph1LHvC2Df9vd8LnKoXrKMK9ekTmxjmawKlS3IztqLKWfAV0jbrvUk1pfIXwb88gFR2XBjd6TCD17D7RdVQg+dYfc+nzwmrGQi72kjGLBi6Kx0xOGbPbZhjbkMeigBCXVU5LkhLmMffgy9PlZCaCnF+R78txnSHzVgdDz95MdC7gRPWg4jG+jSsspbrPlrLwAiGD2MMso1f+tHJGWhsTJQ7jx/SlpvdSF76SjSNgLCa/sbq8FZt00B5LGHzIEmKXLgXkl59wk3cC/WfgExGpA6udvdHLKQrKhjCfrWexjFrd1PswWMr2ZlhSQaJkCGXVFeqBxTTba/kw61LgaCXeRBCOalpr1ORZQTtxbYZ2b2OgMzHbSzAuWdRYit0SdRRjblAd/7aoU8bd3UWO5/7m2zU6t8QspWtibbCd2AIuWYpRy+tX6W/ep3srKRWA5Fsa/Hbd2M3SRdLYAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/90020e3cb43b0bdf6641a85cf3dd7fea/92ab1/ubuntu.png","srcSet":"/static/90020e3cb43b0bdf6641a85cf3dd7fea/92ab1/ubuntu.png 1x"}}}}}},"pageContext":{"slug":"/joomla-erweiterung-mit-dpdocker/","previous":{"id":"e0075c75-18ab-5274-aea6-b70ba33f6f15","frontmatter":{"title":"DPDocker einrichten","tags":["Linux","Ubuntu","DPDocker","Joomla"],"template":"post"},"fields":{"slug":"/ubuntu-dpdocker/"}},"next":{"id":"95c544c4-21c7-5fad-ab5c-20825ae18bfe","frontmatter":{"title":"Erste Schritte mit Mapbox GL in React","tags":["JavaScript","SPA","Bibliothek","Framework","React","MapBox"],"template":"post"},"fields":{"slug":"/erste-schritte-mit-mapbox-gl-in-react/"}}}}}