{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/maplibre-vector-tiles-self-host/",
    "result": {"data":{"allWebmention":{"totalCount":2,"edges":[{"node":{"id":"961c0f5a-359b-587b-8430-f3994fc1032e","published":null,"publishedFormated":null,"author":{"name":"","photo":"","url":""},"url":"https://weeklyosm.eu/archives/15685","wm_id":1525990,"content":null}},{"node":{"id":"8a2f980d-78eb-5913-b3b3-765bd4e36537","published":null,"publishedFormated":null,"author":{"name":"","photo":"","url":""},"url":"https://www.reddit.com/r/traildevs/comments/vlhf7q/walkthrough_build_osmbased_vector_tiles_from/","wm_id":1475675,"content":null}}]},"markdownRemark":{"html":"<h2 id=\"selbst-gehostete-karten-und-vector-tiles-mit-tilemaker-erstellen-und-nutzen\" style=\"position:relative;\"><a href=\"#selbst-gehostete-karten-und-vector-tiles-mit-tilemaker-erstellen-und-nutzen\" aria-label=\"selbst gehostete karten und vector tiles mit tilemaker erstellen und nutzen permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Selbst gehostete Karten und Vector-Tiles mit Tilemaker erstellen und nutzen</h2>\n<p>Wenn eine digitale Karte in einer Webanwendung angezeigt wird, verwenden Webentwickler in der Regel Online-Dienste. Für viele Anwendungen ist dies jedoch nicht erforderlich. Es ist gar nicht so kompliziert, selbst Karten zu erstellen und sie auf dem eigenen Webspace zu hosten. Frei verfügbare Daten von OpenStreetmap und Open-Source-Tools unterstützen beim Erstellen von individuellen Vektor-Kacheln für eine Website. Problematisch ist in meinen Augen lediglich die Datenmenge. Aber meist ist es nicht erforderlich die ganze Welt in der Karte aufzunehmen.</p>\n<blockquote>\n<p>Das Hosting des gesamten Planeten erfordert erhebliche Mengen an Speicherplatz. Im November 2022 liegt die Dateigröße bei <a href=\"https://planet.osm.org/\">66 GB</a>[^planet.osm.org/].</p>\n</blockquote>\n<p>In diesem Beitrag zeige, wie ich eine Karten mit Daten von OpenStreetmap und <em>Tilemaker</em> für das deutsche Bundesland Rheinland-Pfalz auf meinem lokalen Rechner erstellt habe. Ich arbeite zur Zeit unter Ubuntu 22.04.</p>\n<h3 id=\"erstellen-eines-regionalen-openstreetmap-daten-exports\" style=\"position:relative;\"><a href=\"#erstellen-eines-regionalen-openstreetmap-daten-exports\" aria-label=\"erstellen eines regionalen openstreetmap daten exports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Erstellen eines regionalen Openstreetmap-Daten-Exports</h3>\n<blockquote>\n<p>Die Bounding Box[^wiki.openstreetmap.org/wiki/DE:Bounding_Box] von Rheinland-Pfalz ist <code class=\"language-text\">bbox=6.1173598760,48.9662745077,8.5084754437,50.9404435711</code>. Ein praktisches Werkzeug zum bestimmen der Bounding-Box-Koordinaten ist boundingbox[^boundingbox.klokantech.com] oder calc[^tools.geofabrik.de/calc/].</p>\n</blockquote>\n<p>Als erstes benötigen wir die Daten zur Erstellung der Karte. Wenn man einen begrenzten Bereich anzeigen mag, ist es nicht erforderlich, die Daten vom ganzen Planeten herunterzuladen. Wir benötigen einen Export der Daten der Region, die wir hosten möchten. Verschiedene Anbieter, bieten immer aktuelle vorgefertigte Exporte. Die <a href=\"http://download.geofabrik.de/\">GeoFabrik</a>[download.geofabrik.de] ist einer von diesen. Beachte dabei jedoch, dass wir, wenn wir eine Region exportieren möchten, eigentlich einen rechteckigen Export wünschen. Wir möchten also auch einige Teile rund um die Grenze mit einbeziehen. Die Exporte der Geofabrik werden um die Grenzen der Region herum extrahiert und die angrenzenden Bereiche erscheinen als graue Flächen, wenn wir die Karte auf einem rechteckigen Bereich anzeigen. Und dann ist es nicht selten so, dass der Bereich, den man anzeigen möchte, nicht als Export zur Verfügung steht.</p>\n<p>Wir wollen also ein deutsches Bundesland exportieren, Rheinland-Pfalz. Wir können einen rechteckigen Ausschnitt aus einer größeren Region generieren, beispielsweise aus Deutschland. Den Ausschnitt erstelle ich mit dem Werkzeug Osmium. Wir laden also zunächst die Daten zu dem umgebenden Gebiet von der GeoFabrik herunter. Der nächste Schritt besteht darin, den Begrenzungsrahmen der Region zu bestimmen, die wir extrahieren möchten.</p>\n<blockquote>\n<p>Weil Rheinland-Pfalz am westlichen Rand von Deutschland liegt, muss ich Europa als größere Datenquelle wählen, damit es tatsächlich rechteckig ist.</p>\n</blockquote>\n<p>Die von mir gewählte Begrenzung ist: <code class=\"language-text\">6.1173598760 48.9662745077 8.5084754437 50.940443571</code>[^tools.geofabrik.de/calc/#type=geofabrik_standard&#x26;bbox=6.1173598760,48.9662745077,8.5084754437,50.9404435711&#x26;tab=1&#x26;proj=EPSG:4326&#x26;places=2]</p>\n<p>Unter Ubuntu installiere ich das Tool <em>Osmium</em> via:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ sudo apt-get install osmium-tool</span></span></code></pre>\n<p>Dann erstelle ich den regionalen Export für das deutschge Bundesland Rheinland-Pfalz:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ osmium extract --bbox=6.1173598760,48.9662745077,8.5084754437,50.9404435711 --set-bounds --strategy=smart europe-latest.osm.pbf  --output rlp.osm.pbf</span></span></code></pre>\n<p>Am Ende verfüge ich über einen rechteckigen Ausschnitt der Daten der von mir gewünschten Region in der Datei <code class=\"language-text\">rlp.osm.pbf</code>. Diese kann ich zum selbst hosten weiterbearbeiten.</p>\n<h3 id=\"erzeugen-der-vector-tiles\" style=\"position:relative;\"><a href=\"#erzeugen-der-vector-tiles\" aria-label=\"erzeugen der vector tiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Erzeugen der Vector-Tiles</h3>\n<p>Der nächste Schritt ist die Erstellung der Vektorkacheln aus dem regionalen Export. Hierfür verwende ich Tilemaker[^github.com/systemed/tilemaker].</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">git clone https://github.com/systemed/tilemaker.git</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">cd tilemaker</span></span></code></pre>\n<p>Installiere die notwendigen Pakete.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">sudo apt install build-essential libboost-dev libboost-filesystem-dev libboost-iostreams-dev libboost-program-options-dev libboost-system-dev liblua5.1-0-dev libprotobuf-dev libshp-dev libsqlite3-dev protobuf-compiler rapidjson-dev</span></span></code></pre>\n<p>Danach kompiliere und installiere ich Tilemaker via <code class=\"language-text\">make</code> und <code class=\"language-text\">sudo make install</code>.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ make</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">$ sudo make install</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Using Lua 5.1 (include path is -I/usr/include/lua5.1, library path is -llua5.1)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">install -m 0755 -d /usr/local/bin/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">install -m 0755 tilemaker /usr/local/bin/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">install -d /usr/share/man/man1/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">install docs/man/tilemaker.1 /usr/share/man/man1/</span></span></code></pre>\n<p>Für Rheinland-Pfalz ist es nicht relevant, aber manchmal ergänzen Daten aus internationalen Gewässern und Küstengebieten oder Daten von National Earth die Ausgabe positiv.</p>\n<p>Openstreetmap stellt die Coastlines auf der Website <code class=\"language-text\">osmdata.openstreetmap.de</code> zur Verfügung.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">wget https://osmdata.openstreetmap.de/download/water-polygons-split-4326.zip</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">unzip water-polygons-split-4326.zip</span></span></code></pre>\n<p><a href=\"https://www.naturalearthdata.com/downloads/\">National Earth</a>[^naturalearthdata.com/downloads/] bietet Downloadmöglichkeiten über ihre <a href=\"https://www.naturalearthdata.com/downloads/\">Website</a>[^naturalearthdata.com/downloads/] oder <a href=\"https://github.com/nvkelso/natural-earth-vector\">Github</a>[^github.com/nvkelso/natural-earth-vector] an. Besorge dir hier die Daten zu ne_10m_urban_areas, ne_10m_glaciated_areas und ne_10m_antarctic_ice_shelves_polys. Lege ein Unterverzeichnis mit dem Namen landcover an und endpacke die Daten hier.</p>\n<p>Wenn dir diese Daten wichtig sind, dann innerhalb von tilemaker nun folgende Daten hinzugekommen sein. Falls nicht, kannst du diesen Text weiter bearbeiten. Dir wird lediglich bei der Erstellung der Vector-Kacheln gemeldet, dass die Daten fehlen.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">.../tilemaker/coastline$ ll</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">insgesamt 1106544</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxr-x  2 youruser youruser       4096 Nov 19 19:20 ./</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxr-x 12 youruser youruser       4096 Nov 20 12:23 ../</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser        836 Nov 18 06:25 README.txt*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser          6 Nov 18 04:43 water_polygons.cpg*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser    1013349 Nov 18 04:43 water_polygons.dbf*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser        145 Nov 18 04:40 water_polygons.prj*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser 1131628636 Nov 18 04:43 water_polygons.shp*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-rwxrwxrwx  1 youruser youruser     426732 Nov 18 04:43 water_polygons.shx*</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">.../tilemaker/landcover$ ll</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">insgesamt 20</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxr-x  5 youruser youruser 4096 Nov 24 19:25 ./</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxr-x 12 youruser youruser 4096 Nov 20 12:23 ../</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxrwx  2 youruser youruser 4096 Nov 24 19:25 ne_10m_antarctic_ice_shelves_polys/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxrwx  2 youruser youruser 4096 Nov 19 19:26 ne_10m_glaciated_areas/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">drwxrwxrwx  2 youruser youruser 4096 Nov 19 19:01 ne_10m_urban_areas/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>Jetzt habe ich alles notwendige und erstelle die Karte mithilfe von Tilemaker. Als erstes verschaffe ich mir einen Überblick über die Optionen:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ ./tilemaker --help</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">tilemaker v2.2.0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Convert OpenStreetMap .pbf files into vector tiles</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Available options:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --help                       show help message</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --input arg                  source .osm.pbf file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --output arg                 target directory or .mbtiles/.sqlite file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --bbox arg                   bounding box to use if input file does not have </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                               a bbox header set, example: </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                               minlon,minlat,maxlon,maxlat</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --merge                      merge with existing .mbtiles (overwrites </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                               otherwise)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --config arg (=config.json)  config JSON file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --process arg (=process.lua) tag-processing Lua file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --store arg                  temporary storage for node/ways/relations data</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --compact                    Reduce overall memory usage (compact mode).</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                               NOTE: This requires the input to be renumbered </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                               (osmium renumber)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --verbose                    verbose error output</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --skip-integrity             don&#39;t enforce way/node integrity</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  --threads arg (=0)           number of threads (automatically detected if 0)</span></span></code></pre>\n<h4 id=\"ausgabeoptionen\" style=\"position:relative;\"><a href=\"#ausgabeoptionen\" aria-label=\"ausgabeoptionen permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ausgabeoptionen</h4>\n<p>Wenn du deine Karten mit Tilemaker generierst, gibt es zwei Ausgabeoptionen: <em>directory</em> und <em>mbtiles</em>.</p>\n<h5 id=\"directory\" style=\"position:relative;\"><a href=\"#directory\" aria-label=\"directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Directory</h5>\n<p>Mit <em>Tilemaker</em> ist es möglich, die Kacheldateien als einzelne Dateien in ein Verzeichnis zu generieren.</p>\n<blockquote>\n<p>Achte darauf, in der Konfigurations-Datei <code class=\"language-text\">\"compress\":</code> mit <code class=\"language-text\">\"none\"</code> zu belegen. In diesem Beispiel ist dies die Datei <code class=\"language-text\">config-openmaptiles.json</code>!</p>\n</blockquote>\n<p>Möchtest du alle <code class=\"language-text\">pbf</code>-Dateien einzeln in ein Verzeichnis erstellen? Dann reicht es aus, im Parameter <code class=\"language-text\">Output</code> keine Endung zu verwenden. <code class=\"language-text\">--output rlp.mbtiles</code> packt beispielsweise alle <code class=\"language-text\">pbf</code>-Dateien in die Datei <code class=\"language-text\">rlp.mbtiles</code>. <code class=\"language-text\">--output rlp</code> legt alle pbf-Dateien einzeln im Verzeichnis <code class=\"language-text\">rlp</code> an.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ ./tilemaker --input /mnt/hgfs/Downloads/osm/rlp.osm.pbf --output rlp --process ./resources/process-example.lua --config ./resources/config-example.json</span></span></code></pre>\n<p>Wenn die Konvertierung abgeschlossen ist und alles fehlerfrei verlief steht am Ende</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Filled the tileset with good things at rlp</span></span></code></pre>\n<p>In diesem Beispiel werden die Dateien im Verzeichnis <code class=\"language-text\">rlp</code> erzeugt. In diesem Verzeichnis gibt es eine Reihe von Verzeichnissen und eine Datei namens <code class=\"language-text\">metadata.json</code>.</p>\n<h5 id=\"mbtiles\" style=\"position:relative;\"><a href=\"#mbtiles\" aria-label=\"mbtiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>mbtiles</h5>\n<p>Die <code class=\"language-text\">mbtiles</code>-Datei ist eine <code class=\"language-text\">sqlite3</code>-Datenbank, die von serverseitigen Skriptsprachen wie PHP LUA oder NodeJs gelesen werden kann. Tileserver wie tileserver-php öffnen diese Datei und lesen die Kacheldaten aus, sobald der Client sie anfordert. Diese Umgebung wähle ich für meinen Arbeitsumgebung.</p>\n<p>Ich rufe den nachfolgenden Befehl auf, wobei ich der Einfachheit halber die mitgelieferten Beispielkonfigurationen verwende.</p>\n<blockquote>\n<p>Falls du so wie ich vor hast, die Vector Tiles später nicht als eine Datei anzubieten, sondern in ein Verzeichnis entpacken möchtest, ist es wichtig in der Datei <code class=\"language-text\">config-openmaptiles.json</code> die Eigenschaft <code class=\"language-text\">\"compress\":</code> mit <code class=\"language-text\">\"none\"</code> zu belegen!</p>\n</blockquote>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ ./tilemaker --input /mnt/hgfs/Downloads/osm/rlp.osm.pbf --output rlp.mbtiles --process ./resources/process-example.lua --config ./resources/config-example.json</span></span></code></pre>\n<p>Wenn die Konvertierung abgeschlossen ist und alles fehlerfrei verlief steht am Ende</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Filled the tileset with good things at rlp.mbtiles</span></span></code></pre>\n<h3 id=\"hosting-der-vector-tiles\" style=\"position:relative;\"><a href=\"#hosting-der-vector-tiles\" aria-label=\"hosting der vector tiles permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hosting der Vector-Tiles</h3>\n<h4 id=\"tileserverphp-von-maptiler\" style=\"position:relative;\"><a href=\"#tileserverphp-von-maptiler\" aria-label=\"tileserverphp von maptiler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tileserver.php von Maptiler</h4>\n<p>Für das Hosting der Vector-Tiles benötigen wir einen Webserver mit aktiviertem PHP. Außerdem sollte der PHP-Server sqlite-fähig sein, da die mbtiles-Dateien im Grunde genommen eine sqlite-Datenbankdatei sind, die von unserem Tileserver geöffnet wird.</p>\n<p>Um die Karte zu hosten, verwenden werden wir <a href=\"https://github.com/maptiler/tileserver-php\">Tileserver-php</a>[^github.com/maptiler/tileserver-php]. Klone dieses Repository via git auf deinen Webserver:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">/srv/www$ git clone  https://github.com/maptiler/tileserver-php</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Klone nach &#39;tileserver-php&#39; …</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">remote: Enumerating objects: 574, done.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">remote: Counting objects: 100% (7/7), done.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">remote: Compressing objects: 100% (7/7), done.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">remote: Total 574 (delta 2), reused 0 (delta 0), pack-reused 567</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Empfange Objekte: 100% (574/574), 1.47 MiB | 739.00 KiB/s, fertig.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Löse Unterschiede auf: 100% (290/290), fertig.</span></span></code></pre>\n<p>Im Beispiel ist <code class=\"language-text\">/srv/www</code> die Webserver-Root. Passe diese Angabe bitte an deine Gegebenheiten an.</p>\n<p>Kopiere die eben erstellten Dateien in das Verzeichnis tileserver-php. In unserem Beispiel ist das konkret das Verzeichnis <code class=\"language-text\">rlp</code>. Dieses soll sich am Ende im Verzeichnis <code class=\"language-text\">/srv/www/tileserver-php</code> befinden.</p>\n<p>Passe den Pfad zu den Tiles in der Datei <code class=\"language-text\">srv/www/tileserver-php/rlp/metadata.json</code> an. In meinem lokalen Beispiel befindet sich die Datei im Verzeichnis <code class=\"language-text\">srv/www/tileserver-php/rlp/metadata.json</code> und ich setzte den Pfad zu den Tiles auf <code class=\"language-text\">http://localhost/tileserver-php/rlp/{z}/{x}/{y}.pbf</code>.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;tilejson&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;2.0.0&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;scheme&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;xyz&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;baselayer&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;format&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;pbf&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;tiles&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">&quot;http://localhost/tileserver-php/rlp/{z}/{x}/{y}.pbf&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;bounds&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">6.1173599</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">48.9662745</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">8.5084754</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">50.94044360000001</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Wenn du den Apache-Webserver verwendest, ist jetzt alles eingestellt. Öffne die Url zur <code class=\"language-text\">tileserver.php</code> und schau dir deine Karte an. In meinem Fall ist dies die URL <code class=\"language-text\">https://localhost/tileserver-php/tileserver.php</code>. Du siehst die rohe Version der Linien und Punkte. Der Funktionstest ist bestanden.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f64b7aec6f4fede70df7b94a4160a082/28e7f/maplibrevector1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaklEQVQoz4WRUU/UQBSF90/7BIYiiQ/+Bx8kAhuNrz4CCSzwKrBF6IobWkPK0nY7M52Z0k4/04auIIg3ObnJzck3594ZvP18yLsvR7wZjlgbjrrube6xurXfydsa4X06whsedHNvc5/XH3d59f4rKxt7LK/vdFr6sM3S+g4D/lsOVALOPJr+jC6hsigxR85T7rTElZpB7RwL1Q7XQCEEcXRDGFyRnI+ZHWxTTCctGucc1pZcnAdIpUhySSYU2liMLRk0TcNDtVVrSTadkE4C4lOf5PQbZXy9SFeVd4Q/plRVRS4kuSwoq7oL9WjlHlhZjQi+k/lnSP+YeOyj8mLhaW1VXeNcjVIFaZaR5RJj7TPApulWS8OQuX+Cnt2SRDGqUK3j3vPHb4xBa911+xywTyluZ8yiX+RRSDoeMxeChpq/T9RCehljn/5yD2yPXxQaexUgLy/QunzyaA9s0/0z4cO+mN8/8BKwT/kbMuapK58rhZkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ansicht der Linestrings und Points auf dem Tileserver PHP\"\n        title=\"Ansicht der Linestrings und Points auf dem Tileserver PHP\"\n        src=\"/static/f64b7aec6f4fede70df7b94a4160a082/5a190/maplibrevector1.png\"\n        srcset=\"/static/f64b7aec6f4fede70df7b94a4160a082/772e8/maplibrevector1.png 200w,\n/static/f64b7aec6f4fede70df7b94a4160a082/e17e5/maplibrevector1.png 400w,\n/static/f64b7aec6f4fede70df7b94a4160a082/5a190/maplibrevector1.png 800w,\n/static/f64b7aec6f4fede70df7b94a4160a082/c1b63/maplibrevector1.png 1200w,\n/static/f64b7aec6f4fede70df7b94a4160a082/29007/maplibrevector1.png 1600w,\n/static/f64b7aec6f4fede70df7b94a4160a082/28e7f/maplibrevector1.png 1848w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Sieh dir die Eigenschaften an, indem du mit der Maus über ein Element navigierst.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fef1fb4a8c292ab59d3648f59ac9e642/60b6a/tileserverprops.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABv0lEQVQozzWRyW5UMRBF36+QFhLKjj2fQ0Bkw45fSVpBYsH3IIFEJKIWicjQQ7r7+Y0eymUf9Nydkq6rfEu+vi5Xbz9/492X75yef+XNpytOz694/XHOq/cXzM4uOTm74KTkS04Kd1G42ZGbfZiXenY2L/tqXfdszcCutew6y6rpC5am4bGueap3rE3NxvSsTc/N8pEfv6+5X29ZPGz4c/vAv9WWu+Uz9+s9FSXycZ1yOuYpAjF3RAZACmNsz/XNNUNX07YNf2/v6BpDU++xY08Vo+JCxGnAqyWlgI+BqErOCYkDVjqiejJC0zbcLBYMdqAfRrrB4oMUhCBUIpGoGaeeoK4IagpIOjgqF+hASkIkYzYb7n7+wu622GHkeW9wojiJ5JypcppceHzySPKEFIgF8SCiI1aH0lcVZLmk26zwT0+4tmXftJimo+0tInKYoUZBUiBlJU7PLA4DPrkyBj+5Fks2hrh/xpst2rV4OzKOI33fY63FOXf8lMmlejRHyIpXR0hCSopqJIqQVYk6OXaoOiQp3vsiMmGqJ1TlR/Pk0hUhlwRRR46CaiJOvZTwwZFygqSQD2deBF/EJof/AVFOl+i0LbMxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Ansicht der Eigenschaften wenn man mit der Maus über ein Element navigiert.\"\n        title=\"Ansicht der Eigenschaften wenn man mit der Maus über ein Element navigiert.\"\n        src=\"/static/fef1fb4a8c292ab59d3648f59ac9e642/5a190/tileserverprops.png\"\n        srcset=\"/static/fef1fb4a8c292ab59d3648f59ac9e642/772e8/tileserverprops.png 200w,\n/static/fef1fb4a8c292ab59d3648f59ac9e642/e17e5/tileserverprops.png 400w,\n/static/fef1fb4a8c292ab59d3648f59ac9e642/5a190/tileserverprops.png 800w,\n/static/fef1fb4a8c292ab59d3648f59ac9e642/c1b63/tileserverprops.png 1200w,\n/static/fef1fb4a8c292ab59d3648f59ac9e642/60b6a/tileserverprops.png 1559w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"vector-tiles-auf-deiner-website\" style=\"position:relative;\"><a href=\"#vector-tiles-auf-deiner-website\" aria-label=\"vector tiles auf deiner website permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vector Tiles auf deiner Website</h3>\n<p>Nun sind wir bereit, die generierten Kacheln auf unserer eigenen Website zu verwenden. Hierfür verwenden wir die Bibliothek <em>MapLibre GL JS</em>[^maplibre.org/] zusammen mit einem Stil von OpenMapTiles[^<a href=\"https://openmaptiles.org/styles/%5D\">https://openmaptiles.org/styles/]</a>. Erstelle ein kleines HTML-Dokument, welches die Karte anzeigt. Der nachfolgende Code zeigt ein einfaches Beispiel:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"html\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;!</span><span class=\"mtk4\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk12\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">charset</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;utf-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Display a map on a webpage</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;viewport&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk1\"> </span><span class=\"mtk12\">src</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.js&#39;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">link</span><span class=\"mtk1\"> </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;https://unpkg.com/maplibre-gl@2.4.0/dist/maplibre-gl.css&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;stylesheet&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;map&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&#39;width: 800px; height: 800px;&#39;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">map</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk10\">Map</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">container:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;map&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">style:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;rlp.json&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">center:</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">7</span><span class=\"mtk1\">, </span><span class=\"mtk7\">50</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">zoom:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">4</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">map</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addControl</span><span class=\"mtk1\">(</span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk10\">NavigationControl</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<p>Weiterhin benötigst du Styles, um die rohen Linien und Punkte zu gestalten. Fürs erste wähle eine fertige Style-Datei. Du kannst diese von der Demo zu diesem Beitrag[astridx.github.io/vectortiles/rlp.json] herunterladen oder einen anderen Stil von <a href=\"https://openmaptiles.org/styles/\">OpenMapTiles</a> verwenden. Passe zwei URLs an deine individuelle Umgebung an. Die URLs verweisen auf deinen Tileserver. Der Name <code class=\"language-text\">rlp.json</code> ist zwingend, wenn die <code class=\"language-text\">mbtiles</code>-Datei oder das Verzeichnis <code class=\"language-text\">rlp</code> heißt: Der Name der <code class=\"language-text\">mbtiles</code>-Datei muss mit dem Namen der <code class=\"language-text\">json</code>-Style-Datei übereinstimmen!</p>\n<p>In der Datei <code class=\"language-text\">rlp.json</code> ist wichtig, dass die URL in der Eigenschaft <code class=\"language-text\">glyphs</code> auf Schriften zeigt. Diese Schriften werden wir im nächsten Schritt besorgen. Außerdem ist die URL in der Eigenschaft <code class=\"language-text\">sources</code> eventuell in deiner Umgebung eine andere und deshalb anzupassen.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">{</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;version&quot;: 8,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;name&quot;: &quot;Basic&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;metadata&quot;: {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;mapbox:autocomposite&quot;: false,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;mapbox:type&quot;: &quot;template&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;maputnik:renderer&quot;: &quot;mbgljs&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;openmaptiles:version&quot;: &quot;3.x&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;openmaptiles:mapbox:owner&quot;: &quot;openmaptiles&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;openmaptiles:mapbox:source:url&quot;: &quot;mapbox://openmaptiles.4qljc88t&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    },</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;sources&quot;: {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      &quot;openmaptiles&quot;: {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        &quot;type&quot;: &quot;vector&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          &quot;url&quot;: &quot;metadata.json&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    },</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;glyphs&quot;: &quot;fonts/{fontstack}/{range}.pbf&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;layers&quot;: [</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...      </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>Die Daten zur Eigenschaft <code class=\"language-text\">sources</code> lagere ich in die Datei <code class=\"language-text\">metadata.json</code> aus, welche ich im gleichen Verzeichnis wie die <code class=\"language-text\">rlp.json</code> abspeichere. Passe in dieser Datei die URL in der Eigenschaft <code class=\"language-text\">tiles</code> an.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">{</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;tilejson&quot;: &quot;2.0.0&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;scheme&quot;: &quot;xyz&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;type&quot;: &quot;baselayer&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;format&quot;: &quot;pbf&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;tiles&quot;: [</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        &quot;https://localhost/tileserver-php/tileserver.php?/index.json?/rlp/{z}/{x}/{y}.pbf&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span></code></pre>\n<p>Beim Anpassen der Eigenschaft <code class=\"language-text\">glyphs</code> hast du schon gesehen, dass Schriftarten auf deinem Server notwendig sind. Auch hier kannst du fürs Erste auf Fertiges zurückgreifen. klokantech[^github.com/klokantech/klokantech-gl-fonts] bietet auf Github ein Paket mit Fonts. Klone es in dein Webserver-Verzeichnis und setze Symlinks.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">git clone https://github.com/klokantech/klokantech-gl-fonts fonts</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ln -sf &#39;KlokanTech Noto Sans Bold&#39; fonts/Bold</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ln -sf &#39;KlokanTech Noto Sans Regular&#39; fonts/Regular</span></span></code></pre>\n<p>In meinem Webserver-Verzeichnis verfüge ich nun über folgende Dateien:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 657px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArklEQVQY022PSwvCMBCE+/8v4kkFDx7as39Bit69lZ4CKdoHmNZKIJs0GWlqfBQHEvbbzA7ZyDmH/XaH8+kIL+fwkArGDAgqigJKKV9X/IJ4scStLj1rInDOMeaMisYrThIc0tQ3iBSuZQ0h2mlAa2RZhraduGkarNYblFXlWUqJPM+htfkEWmthh+EVQBBCoO/7NzPG0HV3/BMReW/YKApfnbZ1P+Y5h973mb89AafcM39BkNpOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Webserver Verzeichnis zum Veröffentlichen einer mbtiles Datei\"\n        title=\"Webserver Verzeichnis zum Veröffentlichen einer mbtiles Datei\"\n        src=\"/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png\"\n        srcset=\"/static/d3446c741064914fb7be19c75ac70424/772e8/maplibrevector2.png 200w,\n/static/d3446c741064914fb7be19c75ac70424/e17e5/maplibrevector2.png 400w,\n/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png 657w\"\n        sizes=\"(max-width: 657px) 100vw, 657px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Falls du eine mbtiles-Datei anstelle der einzelnen Kacheln verwendest, sieht es wie auf nächsten Bild aus.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 717px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ec26f93a114fedaf50a45158e544aca/0ad97/maplibrevector3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkElEQVQI12WNSw/CIBCE+9v17D9Tj7YXIqFcwEcor9JSGLMkJo1+l53dmex04s5xOhzxfj1BmCkgxNS0tRacc3xhjMF737RzDsaYprdtg50CSqno4hxxvl6wLCtKKZBSQmndgg+tcet75JxRa4UQAiGE5imlMI6y3en5MAyIcUaHHWTuoeaU0p/3m6Odimh+AFlC5xs6b+zZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Webserver Verzeichnis zum Veröffentlichen einer mbtiles Datei\"\n        title=\"Webserver Verzeichnis zum Veröffentlichen einer mbtiles Datei\"\n        src=\"/static/3ec26f93a114fedaf50a45158e544aca/0ad97/maplibrevector3.png\"\n        srcset=\"/static/3ec26f93a114fedaf50a45158e544aca/772e8/maplibrevector3.png 200w,\n/static/3ec26f93a114fedaf50a45158e544aca/e17e5/maplibrevector3.png 400w,\n/static/3ec26f93a114fedaf50a45158e544aca/0ad97/maplibrevector3.png 717w\"\n        sizes=\"(max-width: 717px) 100vw, 717px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Sieh dir jetzt deine eigene gehostete Karte an. Ich habe die Karte unter der Adresse <code class=\"language-text\">https://localhost/tileserver-php/</code> abgelegt:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0cc5fb8db7e868d7659b39e217c42cb7/ffe34/maplibrevector4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADCElEQVQ4y3WU23LiRhRF/f8fkqfkaZIHJ8PYCLCNDOYihFpS33QBbMwggYCZsiteKWkSV1I4XXXeulfts88+fVHtdxTFhl31TFUVbLcbymLLer3m6WnB5uuaovjK6VRxOh04Hg8cT3sOx4Jv30+8vr7y8vLyXhePS0Ggv+DLK0bCQZkH8szHJh42nSDtgLnqYdIBvuwSqB6BvcZkY47Hivq8vb2918XTMkSbAV7YZRJ1ifU9aeoRmjaB6hDGwwY0lpeEto1QN0T6BptOORyKd+A/5+JxEfKYh0jbI1AOOnUxWR9hHEbyV+a6RaT7eNENcXLHTF4h1QilBxTl87nCBrgI0IlLqDvESQ+Z3OKrawLdJkocpBmxXESI0GMSfmYS/85cdtnvi/8AG4XrZYxNBwTaIbY9In2HUiN0ekeezciSGakV2GSCH98wFbUVt8yiDkX5eA58WkZoO2wUmvQBoTvMVRtl70mSKcaMGsAkauHFVwjTQ1kXX35hu1ucA+uW66Fk2ZQkG+PrFhP1G4HpNo/nus1UtRD1gEwXP+7ixdcMo1/Y7JK/gX/+W2GIMkNCdUtk7klSH5X28XWbuekwCq8RymkUaztofB3LP5jEX9iW648VJskMY0foZIy1fqOm9jO2oyZ3kemimtYdJvISWd9VAfvd9iOgYJnX0AnS3GPTEb5yCOtsqhahcZpM1t4GxiEyd8R6SmJ9DtX2Y4WPeUADzgSxGiBkH2EdhLnGU5cEqk1kboi1i4gHyMRFGZdjVXwMXOUBq0VAmsyI9ZDQdgnMFbO49WM7pPtjKKqPUpNmmyLd4XQo/0fhImCRBSTWIzBtZuozc+k0LdZ5rIchTV0uxo6JVL9ZgqrafABchk27q1yQZR6RcgllH2mGjZ81yNgheR400ZqJLjPRYxx/YrMz57FZ5XOWmd/UKptjtYeI3UaFtWPC2MUL6k+jT5I88CA+4c5/5nb+E09bfQ6s9huq3fN7leWacremLJ/YljmbImFT5GyLnKJc8VxqVlvBYuNz+HY+lL8ACAjWvPIGjgoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Webserver view to of the mbtiles file\"\n        title=\"Webserver view to of the mbtiles file\"\n        src=\"/static/0cc5fb8db7e868d7659b39e217c42cb7/5a190/maplibrevector4.png\"\n        srcset=\"/static/0cc5fb8db7e868d7659b39e217c42cb7/772e8/maplibrevector4.png 200w,\n/static/0cc5fb8db7e868d7659b39e217c42cb7/e17e5/maplibrevector4.png 400w,\n/static/0cc5fb8db7e868d7659b39e217c42cb7/5a190/maplibrevector4.png 800w,\n/static/0cc5fb8db7e868d7659b39e217c42cb7/ffe34/maplibrevector4.png 1055w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"mbtiles-entpacken\" style=\"position:relative;\"><a href=\"#mbtiles-entpacken\" aria-label=\"mbtiles entpacken permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MBTiles entpacken</h3>\n<p>Du hast gesehen: Es ist möglich die von Tilemaker generierte <code class=\"language-text\">mbtile</code>-Datei zu hosten, nämlich via  Tileserver wie <em>tileserver-php</em>. Dies ist für eine Entwicklungsumgebung praktisch. Performanter ist es allerdings, die Vector-Tiles direkt von einem statischen Webserver zu laden. Nebenbei ist die Handhabung von großen Dateien in bestimmten Umgebungen problematisch. Beispielsweise sind besondere Schritte notwendig, um eine Demo[astridx.github.io/vectortiles/index.html] auf <em>github.io</em> zu veröffentlichen, wenn sich eine Datei mit mehr als 100 MB im Paket befindet.</p>\n<p>Wie schon erwähnt, kannst du mit <em>Tilemaker</em> einzelne <code class=\"language-text\">pbf</code>-Dateien in einem Verzeichnis anlegen. In meinem Workaround bevorzuge ich es, mit <code class=\"language-text\">mbtiles</code>-Dateien zu arbeiten und die zum Veröffentlichen vorgesehene Datei am Ende zu entpacken. Hierfür gibt es das Werkzeug <em>mbutil</em>.</p>\n<p>Installiere <em>mbutil</em> und <em>Python</em> und verschaffe dir einen Überblick über die Optionen von <em>mbutil</em>.</p>\n<p>/usr/bin/env: »python“: Datei oder Verzeichnis nicht gefunden\n<a href=\"https://www.bitblokes.de/usr-bin-env-python-datei-oder-verzeichnis-nicht-gefunden/\">https://www.bitblokes.de/usr-bin-env-python-datei-oder-verzeichnis-nicht-gefunden/</a></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">git clone https://github.com/mapbox/mbutil.git</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">sudo apt-get install python3 </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">cd mbutil/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">./mbutil/mb-util -h</span></span></code></pre>\n<p>Die Datei <code class=\"language-text\">rlp.mbtiles</code> entpacke ich via</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">./mbutil/mb-util rlp.mbtiles rlpdir --image_format=pbf </span></span></code></pre>\n<blockquote>\n<p>Zur Erinnerung: Zum statischen hosten dürfen die Tiles nicht komprimiert sein! Beim Erstellen muss <code class=\"language-text\">\"compress\": \"none\"</code> in der Konfiguration von Tilemaker aktiviert gewesen sein.</p>\n</blockquote>\n<p>In meinem Webserver-Verzeichnis verfüge ich nun über folgende Dateien:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 657px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAArklEQVQY022PSwvCMBCE+/8v4kkFDx7as39Bit69lZ4CKdoHmNZKIJs0GWlqfBQHEvbbzA7ZyDmH/XaH8+kIL+fwkArGDAgqigJKKV9X/IJ4scStLj1rInDOMeaMisYrThIc0tQ3iBSuZQ0h2mlAa2RZhraduGkarNYblFXlWUqJPM+htfkEWmthh+EVQBBCoO/7NzPG0HV3/BMReW/YKApfnbZ1P+Y5h973mb89AafcM39BkNpOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Webserver Verzeichnis zum Veröffentlichen von statischen Vector Tiles\"\n        title=\"Webserver Verzeichnis zum Veröffentlichen von statischen Vector Tiles\"\n        src=\"/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png\"\n        srcset=\"/static/d3446c741064914fb7be19c75ac70424/772e8/maplibrevector2.png 200w,\n/static/d3446c741064914fb7be19c75ac70424/e17e5/maplibrevector2.png 400w,\n/static/d3446c741064914fb7be19c75ac70424/a1253/maplibrevector2.png 657w\"\n        sizes=\"(max-width: 657px) 100vw, 657px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Die Datei <code class=\"language-text\">tileserver.php</code> benötige ich nicht mehr. Anstelle der Datei <code class=\"language-text\">rlp.mptiles</code> ist das Verzeichnis <code class=\"language-text\">rlp</code> getreten. Anpassen muss ich die URL zu den <code class=\"language-text\">tiles</code> in der Datei <code class=\"language-text\">metadata.json</code>. Diese lautet nun <code class=\"language-text\">\"https://localhost/tileserver-php/rlp/{z}/{x}/{y}.pbf\"</code> anstelle von <code class=\"language-text\">\"https://localhost/tileserver-php/tileserver.php?/index.json?/rlp/{z}/{x}/{y}.pbf\"</code>.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">{</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;tilejson&quot;: &quot;2.0.0&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;scheme&quot;: &quot;xyz&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;type&quot;: &quot;baselayer&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;format&quot;: &quot;pbf&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;tiles&quot;: [</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        &quot;https://localhost/tileserver-php/rlp/{z}/{x}/{y}.pbf&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span></code></pre>\n<p>Das Ergebnis kannst du dir in der <a href=\"https://astridx.github.io/vectortiles/index.html\">Demo</a>[^astridx.github.io/vectortiles/index.html] ansehen.</p>\n<h3 id=\"links\" style=\"position:relative;\"><a href=\"#links\" aria-label=\"links permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Links</h3>\n<ul>\n<li>Generating self-hosted maps using tilemaker[^blog.kleunen.nl/blog/tilemaker-generate-map]</li>\n<li>VectorTiles mithilfe von Tilemaker erstellen und nutzen[^youtube.com/watch?v=8J0J41YsAbc]</li>\n<li>Tipps zur Performance[^blog.kleunen.nl/blog/improving-tilemaker-hosting-speed]</li>\n<li>Planet[^wiki.openstreetmap.org/wiki/Planet.osm]</li>\n<li>GeoFabrik[^download.geofabrik.de]</li>\n<li>OSMData[^osmdata.openstreetmap.de/download/water-polygons-split-4326.zip]</li>\n<li>GeoFabrik Calc[^tools.geofabrik.de/calc]</li>\n<li>Osmium-tool[^github.com/osmcode/osmium-tool]</li>\n<li>OSMConvert[^wiki.openstreetmap.org/wiki/Osmconvert]</li>\n<li>Tilemaker[^github.com/systemed/tilemaker]</li>\n<li>Tileserver-php[^github.com/maptiler/tileserver-php]</li>\n<li>MapLibre[^maplibre.org]</li>\n<li>Klokantech GL fonts[^github.com/klokantech/klokantech-gl-fonts]</li>\n<li>OpenMapTiles styles[^openmaptiles.org/styles]</li>\n</ul>\n<img src=\"https://vg06.met.vgwort.de/na/3b6dd19bd051405dad2a8ee659388218\" width=\"1\" height=\"1\" alt=\"\">\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"Selbst gehostete Karten und Vector-Tiles mit Tilemaker erstellen und nutzen Wenn eine digitale Karte in einer Webanwendung angezeigt wird…","fields":{"slug":"/maplibre-vector-tiles-self-host/"},"frontmatter":{"title":"Selbst gehostete Karten und VectorTiles für einen begrenzten Bereich mit Tilemaker erstellen","date":"2022-11-24","tags":["geografische Daten","Tilemaker","Openstreetmap"],"syndication":["https://github.com/astridx/meinblog/issues/71"],"booklink":"","set":"","description":"desc","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKUlEQVQ4y3VUy0sqURj3z2ihC9853ktQrSJ6QJtWQSjNqM0EdRF6SUW0aFERrryX66LSgqiscRxnNNIszB5OqRWZSyGiGrBVBdEbzZzLOCbT4x7O4vCd8/t+v/PxfT8B875yuRzDMA/PaQ913m2N1PX61AipRsg6k6/bGvFQ5w/P6eIzbgn4SH+UbuhfFWmdIq1ToceVBnYr9DgXaehf9cdoPr4AfsvlzI6ESOsUgy41QioMLhmEccwyCFMY2KAYdIm0TrMj8VYEc4fxheOS5iUAJgCEkEJYVc96p/10jLwZI2867adVPetSCAMQAoCJkual8YXjPH+e2R+lRRpUBbN3MgirH9i0Bp/nDxg79WqnXucPmL/B5/qBTRmEATChggmhBvVFWf2Cp5dMQ/+qGGQTl7a6VbB7jLye22eGFi9r+kI1faGhxcu5fWaMvFbB7tJWN4AQYhBr6F99eskIvNSZUIOqETalDMKqTcGpnVfrxkuF0S9uQcUtaIXRb914mdp5rTYFZRCmggk1wpJ7qHNBlzXCB9f2hWzhrCVwr4JZIXkthCVwbwtna/tCfHCXNSKoM/lkOpyTpNDjZe3LlsDDzF5Oaz6SQpgUwrTmo5m9nCXwUNa+rNDj3NdkOrzO5BOokQIDRyIBncapk9kYM7GZHnSkBh2pic30bIwxTp1IQGdRTmmrW40Qn8FynavS6P+z9minstO7b9O7b3Yq+3vtsdLol+tcn8F82e/kaOPwrj2cndzOTG5nbOFs4/CuBER5VXiXXSxYMSUAE1IQbRrdt4WztnC2aXRfCqLAR85CwTzU+Sew0uBWtrrlOmfTSKxpJCrXOZX54CewlzrjNUk+t9LAtoGHuoifXG/FU1vxVPzk2kNdAAjB4QGY1yQMw/iitDDfnirYLdfj5R3eu6fMSoQedyTGHYmVCH33lCnv8Mr1bGlUMCHSoH6uPT8MRl68GiFC8cskfXuYvDpMXiXp21D8krsCkC+DwR9JCeQCYOJnG1n+y1vcP9pIACYk0JeR/GAGsYIZCDWoFHIpDLjCgEshl1CDFswg+p0ZfGNDpncb6v2vDf0DP3S/D7fd8goAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png","srcSet":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png 1x"}}}}}},"pageContext":{"slug":"/maplibre-vector-tiles-self-host/","previous":{"id":"b4c8e106-328c-52bf-93a1-4b0863ec817f","frontmatter":{"title":"Create self-hosted maps and vector tiles for a limited area with Tilemaker","tags":["geografische Daten","Tilemaker","Openstreetmap"],"categories":["MapLibre"],"template":"post"},"fields":{"slug":"/en/maplibre-vector-tiles-self-host/"}},"next":{"id":"93cc555d-691c-59ea-a7d7-57f99ee751ce","frontmatter":{"title":"Selbst gehostete Vector-Tiles mit eigener Schriftart - Glyphs - Benutzerdefinierte Glyphen erstellen","tags":["geografische Daten","Vector Kacheln","Selbst gehostet","Openstreetmap"],"categories":["MapLibre"],"template":"post"},"fields":{"slug":"/maplibre-vector-tiles-self-host-own-font-glyphs/"}}}},
    "staticQueryHashes": ["352937542"]}