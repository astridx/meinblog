{"componentChunkName":"component---src-templates-post-js","path":"/ereignisschleifen-rueckruffunktionen-promises-und-async-await-in-javascript/","result":{"data":{"markdownRemark":{"html":"<p>Vor nicht allzulanger Zeit bestanden eine Website in der Regel aus statischen Daten in einer HTML-Datei. Dies hat sich rasant verändert. Eine Webanwendung ist heute interaktive und dynamisch. Meist ist es unerlässlich, externe Netzwerkanforderungen über eine Schnittstelle durchzuführen. Im Falle von JavaScript sind dann <em>asynchrone</em> Programmiertechniken erforderlich.</p>\n<p>Standardmäßig wird ein Skript innerhalb eines Browsers in Form eines einzigen Threads abgearbeitet. Eine Aktion wie das Anfordern einer Datei über eine API nimmt eine unbestimmte Zeit in Anspruch. Sie ist abhängig von der Größe der angeforderten Daten, der Geschwindigkeit der Netzwerkverbindung und anderen Faktoren. Wenn API-Aufrufe ausschließlich synchron abliefen, wäre es nicht möglich gleichzeitig Benutzereingaben wie Scrollen oder Klicken auf eine Schaltfläche zu verarbeiten. In einem Singlethread-Programm wird die Benutzeroberfläche <em>blockiert</em>, während andere Berechnungen ablaufen.</p>\n<p>Um eine Blockierung zu verhindern, verfügt die Browserumgebung über Web-APIs die <em>asynchron</em> sind und auf die JavaScript zugreift. Dies bedeutet, dass diese parallel zu anderen Vorgängen – anstatt nacheinander – ablaufen und es dem Benutzer gleichzeitig möglich ist, Eingaben zu tätigen.</p>\n<p>Als JavaScript-Entwickler arbeitet man mit den asynchronen Web-APIs und behandelt potenzielle Fehler. Ich habe mir Ereignisschleifen, Rückruffunktionen, Promises und die moderne Praxis – sprich der Verwendung von „async/await“ – genauer angesehen.</p>\n<blockquote>\n<p><strong>Hinweis</strong>: Dieser Artikel konzentriert sich auf clientseitiges JavaScript in der Browserumgebung.</p>\n</blockquote>\n<h2>Die Ereignisschleife (Event Loop)</h2>\n<p>Thema des ersten Teils ist, wie JavaScript mit asynchronem Code in der Ereignisschleife umgeht. Wir sehen uns eine simple Schleife an. Dabei unterscheiden wir die beiden Hauptelemente: den Stapel und die Warteschlange.</p>\n<p>JavaScript-Code, der keine asynchronen Web-APIs verwendet, läuft synchron ab - einzeln nacheinander. Dies demonstriert der nachstehende Beispielcode. Dieser ruft drei Funktionen auf, die jeweils eine Nummer in der Konsole ausgeben.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"html\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!</span><span class=\"mtk7\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk3\">html&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Titel</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk3\">charset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;UTF-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk3\">name</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;viewport&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">content</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;width=device-width, initial-scale=1.0&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">2</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">drei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">3</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">drei</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span></code></pre>\n<p>In diesem Code definierst du drei Funktionen, die Zahlen mit <code class=\"language-text\">console.log()</code> drucken und rufst diese auf.</p>\n<p>Die Ausgabe basiert auf der Reihenfolge, in der die Funktionen aufgerufen wurden:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3</span></span></code></pre>\n<p>Wird eine asynchrone Schnittstelle verwendet, ist das Ganze komplizierter. Nutzen wir die Funktion <code class=\"language-text\">setTimeout()</code>, um uns dies zu verdeutlichen. <code class=\"language-text\">setTimeout()</code> setzt einen Timer fest und führt nach einer festgelegten Zeit eine Aktion aus. <code class=\"language-text\">setTimeout</code> ist asynchron, ansonsten würde das Skript nicht weiterlaufen.</p>\n<p>Fügen wir der Funktion <code class=\"language-text\">zwei()</code> <code class=\"language-text\">setTimeout()</code> hinzu, um eine asynchrone Anforderung zu simulieren:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">1</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">2</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}, </span><span class=\"mtk6\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">drei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">3</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">eins</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">zwei</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">drei</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Bei einem auf 0 gesetzten <code class=\"language-text\">setTimeout()</code> erwartet man, dass der Aufruf dieser drei Funktionen weiterhin die Zahlen aufeinanderfolgend ausgibt. Dies ist aber nicht so:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2</span></span></code></pre>\n<p>Dies liegt daran, dass die JavaScript-Umgebung, in diesem Fall der Browser, ein Konzept namens <em>Ereignisschleife</em> oder <em>Event Loop</em> verwendet, um parallele Ereignisse zu verarbeiten. JavaScript ist sequentiell und ruft jeweils nur eine Anweisung auf. Deshalb wird ein Speichermodell verwendet, bei dem drei wichtige Bereiche zum Einsatz kommen: der Stack (Stapel), die Queue (Warteschlange) und der Heap (Haufen).</p>\n<h3>Heap (Haufen)</h3>\n<p>Der Heap ist ein größerer Speicher, in dem Variablen, Funktionen und Objekte, die du mit deinem JavaScript erzeugst, gespeichert werden.</p>\n<h3>Stack (Stapel)</h3>\n<p>Im Stack werden die zur aktuellen Ausführung benötigten Funktionen abgelegt und verarbeitet. Jede beinhaltet einen Zeiger zum Heap und den jeweils dazugehörigen Objekten, sprich: den Status der aktuell ausgeführten Funktion. JavaScript führt den aktuellen Funktionsaufruf im Stapel aus, entfernt ihn dann und fährt mit dem nächsten fort.</p>\n<p>Führst du beispielsweise den oben stehenden synchronen Code aus, passiert Folgendes:</p>\n<ul>\n<li>Füge <code class=\"language-text\">eins()</code> zum Stapel hinzu, führe <code class=\"language-text\">eins()</code> aus, und entferne <code class=\"language-text\">eins()</code> vom Stapel.</li>\n<li>Füge <code class=\"language-text\">zwei()</code> zum Stapel hinzu, führe <code class=\"language-text\">zwei()</code> aus und entferne <code class=\"language-text\">zwei()</code> vom Stapel.</li>\n<li>Füge <code class=\"language-text\">drei()</code> zum Stapel hinzu, führe <code class=\"language-text\">drei()</code> aus und entferne <code class=\"language-text\">drei()</code>vom Stapel.</li>\n</ul>\n<p>Das Beispiel mit <code class=\"language-text\">setTimout</code> sieht so aus:</p>\n<ul>\n<li>Füge <code class=\"language-text\">eins()</code> zum Stapel hinzu, führe <code class=\"language-text\">eins()</code> aus und entferne <code class=\"language-text\">eins()</code> vom Stapel.</li>\n<li>Füge <code class=\"language-text\">zwei()</code> zum Stapel hinzu und führe <code class=\"language-text\">zwei()</code> aus.</li>\n<li>Füge dem Stapel <code class=\"language-text\">setTimeout()</code> hinzu, führe <code class=\"language-text\">setTimeout()</code> aus (welche einen Timer aufruft und die anonyme Funktion zur _ Warteschlange _ hinzufügt) und entferne <code class=\"language-text\">setTimeout()</code> vom dem Stapel.</li>\n<li>entferne <code class=\"language-text\">zwei()</code> vom Stapel.</li>\n<li>Füge <code class=\"language-text\">drei()</code> zum Stapel hinzu, führe <code class=\"language-text\">drei()</code> aus und entferne <code class=\"language-text\">drei()</code>vom Stapel.</li>\n<li>Die Ereignisschleife überprüft die Warteschlange auf ausstehende Nachrichten und findet die anonyme Funktion von <code class=\"language-text\">setTimeout()</code>, fügt diese dem Stapel hinzu und entfernt sie vom Stapel.</li>\n</ul>\n<p>Jetzt ist die Warteschlange in Spiel gekommen, die wir uns als Nächstes ansehen.</p>\n<h3>Queue (Warteschlange)</h3>\n<p>Die Warteschlange ist ein Wartebereich für Funktionen. Die Queue enthält alle JavaScript-Befehle die zur Verarbeitung anstehen. Wenn du eine Funktion aufrufst, wird sie zusammen mit weiteren Dazugehörigen in der Queue abgelegt. Der Stack arbeitet die Queue in der gegebenen Reihenfolge ab.</p>\n<blockquote>\n<p><a href=\"https://de.wikipedia.org/w/index.php?title=First_In_%E2%80%93_First_Out&#x26;oldid=199843383\">First In – First out</a> bezeichnet Verfahren der Speicherung, bei denen diejenigen Elemente, die zuerst gespeichert wurden, als erstes wieder aus dem Speicher entnommen werden. Eine solche Datenstruktur wird als Warteschlange bezeichnet.</p>\n</blockquote>\n<p>Im Beispiel <code class=\"language-text\">setTimeout</code> wird die anonyme nach den anderen Funktionen aufgerufen. Sie wartete in der Queue. Der festgelegte Zeitwert ist die Minimum-Zeit und keine Garantie-Zeit bis zur Ausführung.</p>\n<h2>Rückruffunktionen (Callback)</h2>\n<p>Im Beispiel <code class=\"language-text\">setTimeout</code> wurde die Funktion mit dem Timeout am Ende des Skriptes aufgerufen. Manchmal ist es wichtig, dass Aufruf am Ende geschieht. Dann greifen wir auf asynchrone Codierungsmethoden zu. Zum Beispiel auf Rückruffunktionen. Diese haben keine spezielle Syntax. Sie sind nichts weiter als eine Funktion, die als Argument an eine andere übergeben wird. Die andere heißt dabei <em>Funktion höherer Ordnung</em>. Jede ist eine Rückruffunktion, wenn sie als Argument eingesetzt wird. Rückrufe sind von Natur aus nicht asynchron, werden aber für diesen Zweck verwendet.</p>\n<p>Zur Veranschaulichung ein Codebeispiel:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eineFunktion</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Eine Funktion&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">funktionHoehererOrndung</span><span class=\"mtk1\">(callback) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">callback</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">funktionHoehererOrndung</span><span class=\"mtk1\">(</span><span class=\"mtk7\">eineFunktion</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>In diesem Code definieren wir zwei Funktionen. <code class=\"language-text\">eineFunktion</code> und <code class=\"language-text\">funktionHoehererOrndung</code>, die <code class=\"language-text\">callback</code> als Argument verwendet. Am Ende übergeben wir <code class=\"language-text\">eineFunktion</code> als Rückruf an <code class=\"language-text\">funktionHoehererOrndung</code>. Abstrahiert sieht der Einsatz einer Rückruffunktion simpel aus. Rufe den Code auf und die siehts Folgendes:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Eine Funktion</span></span></code></pre>\n<p>Kehren wir zum ersten Beispiel zurück. Bisher haben wir folgenden Code:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">1</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">2</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}, </span><span class=\"mtk6\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">drei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">3</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">eins</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">zwei</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">drei</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Ziel ist es, <code class=\"language-text\">drei()</code> dazu zu bringen, die Ausführung zu verzögern bis <code class=\"language-text\">zwei()</code> abgeschlossen ist. Hier kommen Rückrufe ins Spiel. Anstatt <code class=\"language-text\">eins</code>, <code class=\"language-text\">zwei</code> und <code class=\"language-text\">drei</code> auf der obersten Ausführungsebene auszuführen, übergeben wir <code class=\"language-text\">drei</code> als Argument an <code class=\"language-text\">zwei</code>. <code class=\"language-text\">zwei</code> führt den Rückruf aus, nachdem die eigene Aktion abgeschlossen ist.</p>\n<p>Hier siehst du die drei Funktionen, auf die ein Rückruf angewendet wird:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">(callback) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">2</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk7\">callback</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}, </span><span class=\"mtk6\">9000</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">drei</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">3</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">eins</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">zwei</span><span class=\"mtk1\">(</span><span class=\"mtk7\">drei</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Dieser Code bewirkt die Ausgabe, wobei 2 und 3 erst nach 9 Sekunden abgedruckt werden:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3</span></span></code></pre>\n<p>Durch Übergeben einer Funktion als Rückruf haben wir die Reihenfolge der Ausführung verzögert. Die Rückruffunktion ist nicht asynchron. Mit einem Callback informieren wir vielmehr darüber, dass eine andere Aufgabe abgeschlossen ist.</p>\n<h3>Verschachtelte Rückrufe und die Pyramide des Untergangs (Pyramid of Doom)</h3>\n<p>So unkompliziert wie dies in der übersichtlichen Form wirkt, ist die Codiertechnik nicht. Es gibt Fallstricke – beispielsweise beim Verschachteln.</p>\n<p>Rückruffunktionen sind eine effektive Möglichkeit, um die verzögerte Ausführung einer Funktion sicherzustellen, bis eine andere abgeschlossen ist. Aufgrund der verschachtelten Natur von Rückrufen wird Code schnell unübersichtlich:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pyramideDesUntergangs</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">2</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">3</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }, </span><span class=\"mtk6\">500</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }, </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }, </span><span class=\"mtk6\">1000</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">pyramideDesUntergangs</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>In diesem Code ist jedes neue <code class=\"language-text\">setTimeout</code> in einer Funktion höherer Ordnung verschachtelt, wodurch eine Pyramidenform mit immer tieferen Rückrufen entsteht. Dieses Beispiel bewirkt folgende Ausgabe:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3</span></span></code></pre>\n<p>In der Praxis ist Code komplizierter als in diesem Beispiel und Rückrufe führen zu schwer zu lesendem und zu wartenden Code. Aus dem Grund wurde das Konzept der <a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Promise\">Promises</a> in <a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript\">ECMAScript 2015 oder ES6</a> eingeführt.</p>\n<h2>Promise</h2>\n<p>Ein Promise steht für den Abschluss einer asynchronen Funktion. Es ist ein Objekt, welches in Zukunft einen Wert zurückgibt. Es erreicht das Gleiche wie eine Rückruffunktion – mit vielen zusätzlichen Funktionen und einer besser lesbaren Syntax.</p>\n<h3>Ein Promise erstellen</h3>\n<p>Initialisiere ein Promise mit der Syntax <code class=\"language-text\">new Promise</code>. Die Funktion, die an ein Promise übergeben wird, hat die Parameter <code class=\"language-text\">resolve (auflösen)</code> und <code class=\"language-text\">reject (zurückweisen)</code>:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Wenn du das Promise über die Konsole protokollierst <code class=\"language-text\">console.log(promise);</code>, siehst du <code class=\"language-text\">Promise { &lt;state&gt;: &quot;pending&quot; }</code>.</p>\n<p>Testen wir das Promise, indem wir es erfüllen. Dazu weisen wir ihm einen Wert zu:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t  </span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Aufgelöst!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Wenn du das Promise über die Konsole protokollierst <code class=\"language-text\">console.log(promise);</code>, siehst du <code class=\"language-text\">Promise { &lt;state&gt;: &quot;fulfilled&quot;, &lt;value&gt;: &quot;Aufgelöst!&quot; }</code>.</p>\n<p>Es gibt drei mögliche Zustände: ausstehend, erfüllt und abgelehnt:</p>\n<ul>\n<li>Pending (ausstehend) - Anfangszustand</li>\n<li>Fulfilled (erfüllt) - erfolgreich, Promise ist gelöst</li>\n<li>Rejected abgelehnt) - fehlgeschlagen, Promise abgelehnt</li>\n</ul>\n<h3>Ein Promise konsumieren</h3>\n<p>Die Promise im letzten Abschnitt wurde mit einem Wert erfüllt. Wie greifen wir auf diesen Wer zu? Hierfür gibt es die Methode <code class=\"language-text\">then</code>. Die gibt den Wert des Promises als Parameter zurück. Zum Beispiel so wie im folgenden Code:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Aufgelöst!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">promise</span><span class=\"mtk1\">.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((response) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">response</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Unser Promise hat den Wert <code class=\"language-text\">Aufgelöst!</code>. Dieser wird in der Konsole abgedruckt.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Aufgelöst!</span></span></code></pre>\n<p>Testen wir mit <code class=\"language-text\">setTimeout</code> das Verhalten im Falle einer asynchrone Anfrage:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Aufgelöst!&#39;</span><span class=\"mtk1\">), </span><span class=\"mtk6\">3000</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">promise</span><span class=\"mtk1\">.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((response) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">response</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Verwendung der <code class=\"language-text\">then</code>-Syntax stellt sicher, dass die Antwort <code class=\"language-text\">response</code> nur protokolliert wird, wenn die <code class=\"language-text\">setTimeout()</code>-Operation nach <code class=\"language-text\">3000</code> Millisekunden abgeschlossen ist. Nach drei Sekunden wird der Promise-Wert aufgelöst und ausgegeben.</p>\n<p>Es ist möglich, ein Promise mit einer anderen zu verketten:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;aufgelöst!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">promise</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((eins) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;Verkettung &#39;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((zwei) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">zwei</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die erfüllte Antwort sieht wie folgt aus:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Verkettung aufgelöst!</span></span></code></pre>\n<p>Da <code class=\"language-text\">then</code> verkettet und nicht verschachtelt wird, ist er Code besser lesbar.</p>\n<h3>Fehlerbehandlung</h3>\n<p>Bisher haben wir ein Promise nur in einem erfolgreichen Zustand verwendet. Bei asynchronen Anfragen kommt es häufig zu Fehlern. Simulieren wir eine solchen:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk5\">true</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk7\">reject</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Fehler!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t} </span><span class=\"mtk8\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Aufgelöst!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">promise</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((response) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">response</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Ausgabe ist <code class=\"language-text\">Uncaught (in promise) Fehler!</code>. Den Fehler fangen wir mit der Methode <code class=\"language-text\">catch</code> ab:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">promise</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">((resolve, reject) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk5\">true</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk7\">reject</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Fehler!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t} </span><span class=\"mtk8\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;Aufgelöst!&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">promise</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t.</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((response) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">response</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t.</span><span class=\"mtk7\">catch</span><span class=\"mtk1\">((error) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">error</span><span class=\"mtk1\">(</span><span class=\"mtk7\">error</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t});</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Ausgabe ist nun <code class=\"language-text\">Fehler!</code>. Der Fehler ist nicht gelöst, aber wir haben in der Methode <code class=\"language-text\">catch</code> Handlungsmöglichkeiten.</p>\n<p>Als Referenz eine Tabelle mit den Handler-Methoden für Promise-Objekte:</p>\n<table>\n<thead>\n<tr>\n<th>Methode</th>\n<th>Beschreibung</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\"><code class=\"language-text\">then()</code></a></td>\n<td>Behandelt eine <code class=\"language-text\">Lösung</code>.</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch\"><code class=\"language-text\">catch()</code></a></td>\n<td>Behandelt eine Ablehnung.</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally\"><code class=\"language-text\">finally()</code></a></td>\n<td>Unabhängig, ob das Promise erfolgreich erfüllt wurde oder nicht.</td>\n</tr>\n</tbody>\n</table>\n<h2>Async-Funktionen mit <code class=\"language-text\">async/await</code></h2>\n<h3>async</h3>\n<p>Mit der Funktion <code class=\"language-text\">async</code> behandeln wir asynchronen Code synchron, indem wir das Schlüsselwort <code class=\"language-text\">async</code> voranstellen:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;1&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">eins</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Obwohl diese Funktion bisher nichts Asynchrones verarbeitet, verhält sie sich anders als eine herkömmliche. Wenn wir sie aufrufen, werden wir feststellen, dass sie ein Promise zurückgibt. Die Ausgabe ist:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Promise { &lt;state&gt;: &quot;fulfilled&quot;, &lt;value&gt;: undefined }</span></span></code></pre>\n<p>Dies bedeutet, dass eine <code class=\"language-text\">asynchrone</code> Funktion mit <code class=\"language-text\">then</code> anwendbar ist. Probiere dies mit folgendem Code aus:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;1&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">eins</span><span class=\"mtk1\">().</span><span class=\"mtk7\">then</span><span class=\"mtk1\">((response) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">response</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// oder kurz: eins().then(console.log);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Ausgabe ist:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span></code></pre>\n<h3>await</h3>\n<p>Der wahre Vorteil von asynchronen Funktionen wird deutlich, wenn wir sie mit dem Schlüsselwort <code class=\"language-text\">await</code> kombinieren. <code class=\"language-text\">await</code> funktioniert nur in asynchronen Umgebungen.</p>\n<p>Hier ist ein triviales Beispiel:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">(resolve </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;1&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }, </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f1</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">var</span><span class=\"mtk1\"> </span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">await</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">x</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;nach x&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">f1</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Ausgabe ist:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">nach x</span></span></code></pre>\n<p>Zur Veranschaulichung ändern wir den Code wie folgt ab. Es fehlt nur das Wort <code class=\"language-text\">await</code>:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"javascript\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Promise</span><span class=\"mtk1\">(resolve </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">setTimeout</span><span class=\"mtk1\">(() </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;1&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }, </span><span class=\"mtk6\">2000</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">async</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f1</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">var</span><span class=\"mtk1\"> </span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">eins</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk7\">x</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">console</span><span class=\"mtk1\">.</span><span class=\"mtk7\">log</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;nach x&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">f1</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Jetzt wurde Auflösen des Promise nicht abgewartet. Die Ausgabe ist:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Promise { &lt;state&gt;: &quot;pending&quot; }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">nach x</span></span></code></pre>\n<h2>Fazit</h2>\n<p>Da Daten häufig ungleichzeitig bereitstehen, ist das Erlernen von asynchronen Aktionen ein wesentlicher Bestandteil eines JavaScript-Entwicklers. In diesem Beitrag hast du erfahren, wie Browser die Ereignisschleife (Event Loop) verwenden, um die Reihenfolge der Codeausführung mit dem Stack und der Queue zu handhaben. Außerdem haben wir drei Beispiele ausprobiert, um den Erfolg oder Misserfolg eines asynchronen Ereignisses mit Rückrufen (Callbacks), Promise (Versprechen) und der Syntax <code class=\"language-text\">async/await</code> zu behandeln.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/2020-07-28-ereignisschleifen-rueckruffunktionen-promises-und-async-await-in-javascript.md","excerpt":"Vor nicht allzulanger Zeit bestanden eine Website in der Regel aus statischen Daten in einer HTML-Datei. Dies hat sich rasant verändert…","fields":{"slug":"/ereignisschleifen-rueckruffunktionen-promises-und-async-await-in-javascript/"},"frontmatter":{"title":"Grundlegendes zu Ereignisschleifen (Event Loop), Rückruffunktionen (Callback), Promises und Async/Await in JavaScript","date":"28.07.2020","tags":["JavaScript"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVQ4y4VVSU8UQRTugaMHLlz8DaIwyBZkHWPEGeieAY0HJUSuxsTEhIuJB8ETRMJBXBITFK8evAoXY2I0hGCCgwONrDrAALOwKXRTz/dVd016gIROXup1V9VXX31vaU3zPKkZXUuZhvJ9bPmpGSM/M2v4tmbDGnznm+7DmrSpyz3HHgnkTmxEg/DztVMeF9iz38gFVGPaNPJc/wxbO9sQ2wjbKNswWydbgcPQ8OWCsp8yc8B8rn+DbdGOtxGtthFG5R+utBHPxdk6sDZjhnMISaobUyEvsy5s+rsYwUbLYzbG5LRu7c6HGfw65nu8TLN6Ks3ADGC8QACAg0Hbv6QvGEhszxlibyFM/B3gNq1J0E4vhqYi5mq26DKTYImoLpYmmgUfwIzDtDDeLCY/BcVaVMeh9g4z5bUJtsIsloddO3TihdZmTKfDeES8HQzQ5UApbTH4y6cNVF9XSmXlJfSoq0bsL4dpc1o/cFnezbJEbrkvQxCdc8vaiOlCrETEq/5Gqqry0+y3EJ0rukC9j+to/adO0c9B2nKksECCx/eulnkaktYFHFEMAWjHI/R6oJGqq/2UmNLpzu1KKq8oof4n9bQy2SK1TbI0B79bATihgqOhAlzAUfc0m68saL2V3r0IUAWDZFhD6Pi8r4Eqq0ro1s0KQpCg4/6yBPyeBfRceVisOgyZkYA9fHCJamv9tM4Mx0ev0e6CQX3ddVR0vlgGi6NuW38k4AcPYDYonWDImyyOJF29clEU+4vpzbMArf5ooWBTGdXU+KUEg70NYnfeAEsVlPueoGTTpgAVsMdpw+xsMIp9CYmdeee6c2PNNPaxScx8DYk9TiFcd3sOo57kfWe9KZhlyZMduDYS999S2MYVoRUSm4GRKoqZrBpKSHb3JIbpSKel3ZJRdcygPbgGTseVVNkhogDCN8y5YAPHSs9b2Bkzonx0lASAoes+pwZMNghHs6RidrRbndS+lKaFqAAkLfIMqYFoIgBKs6Pty9MPDe1IXzu9wZpGToNNx1pO7tqq86pfAMoJTJR5fwGpE34B/wEgbi1Y5n1kcAAAAABJRU5ErkJggg==","width":80,"height":80,"src":"/static/5e267e2ee412a23e797106ee564145a0/829e2/js.png","srcSet":"/static/5e267e2ee412a23e797106ee564145a0/829e2/js.png 1x,\n/static/5e267e2ee412a23e797106ee564145a0/e94d6/js.png 1.5x,\n/static/5e267e2ee412a23e797106ee564145a0/af1a8/js.png 2x"}}}}}},"pageContext":{"slug":"/ereignisschleifen-rueckruffunktionen-promises-und-async-await-in-javascript/","previous":{"id":"ef72ae3b-a431-599d-b2ed-83f07e8bf6ef","frontmatter":{"title":"Erste Schritte mit React","tags":["JavaScript","SPA","Bibliothek","Framework","React"],"template":"post"},"fields":{"slug":"/erste-schritte-mit-react/"}},"next":{"id":"07b81f56-64a1-5cce-8167-c9e937716f04","frontmatter":{"title":"Einrichten eines Ubuntu 20.04 Desktop für die Entwicklung mit Docker und Joomla","tags":["Linux","Ubuntu"],"template":"post"},"fields":{"slug":"/mein-ubuntu-rechner-mit-dpdocker-themen/"}}}},"staticQueryHashes":[]}