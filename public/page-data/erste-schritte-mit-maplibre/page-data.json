{"componentChunkName":"component---src-templates-post-js","path":"/erste-schritte-mit-maplibre/","result":{"data":{"markdownRemark":{"html":"<h2>Einrichten der Umgebung</h2>\n<p>Zu Beginn richten wir die React-Anwendung ein und besorgen uns alle notwendigen Abhängigkeiten. Dazu führen wir die folgenden Befehle aus, die ich nachfolgend erkläre.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npx</span><span class=\"mtk1\"> </span><span class=\"mtk7\">create</span><span class=\"mtk8\">-</span><span class=\"mtk7\">react</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">cd</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npm</span><span class=\"mtk1\"> </span><span class=\"mtk7\">install</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">gl</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npm</span><span class=\"mtk1\"> </span><span class=\"mtk7\">install</span><span class=\"mtk1\"> </span><span class=\"mtk7\">react</span><span class=\"mtk8\">-</span><span class=\"mtk7\">map</span><span class=\"mtk8\">-</span><span class=\"mtk7\">gl</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npm</span><span class=\"mtk1\"> </span><span class=\"mtk7\">install</span><span class=\"mtk1\"> </span><span class=\"mtk7\">react</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span><span class=\"mtk8\">-</span><span class=\"mtk7\">rewired</span><span class=\"mtk1\"> </span><span class=\"mtk8\">--</span><span class=\"mtk7\">save</span><span class=\"mtk8\">-</span><span class=\"mtk7\">dev</span></span></span></code></pre>\n<h3>Details zur Einrichtung</h3>\n<h4>npx create-react-app maplibre-app</h4>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npx</span><span class=\"mtk1\"> </span><span class=\"mtk7\">create</span><span class=\"mtk8\">-</span><span class=\"mtk7\">react</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">cd</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Mit dem Befehl <code class=\"language-text\">npx create-react-app maplibre-app</code> erstellen wir eine React Anwendung mit dem Namen <code class=\"language-text\">maplibre-app</code>.\n<a href=\"https://github.com/facebook/create-react-app\"><code class=\"language-text\">create-react-app</code></a> ermöglicht das Erstellen einer React-Applikation über die Eingabe eines einzelnen Befehls. Eine auf diese Weise erstellte App verfügt bereits über viele Entwicklerwerkzeuge wie Webpack, ESLint oder Babel. Du kannst dich somit voll auf die eigentliche Programmieraufgabe konzentrieren.</p>\n<blockquote>\n<p>Was ist <code class=\"language-text\">NPX</code>? An dieser Stelle möchte ich kurz erklären, was <code class=\"language-text\">Node</code> und <code class=\"language-text\">NPM</code> sind. <code class=\"language-text\">Node</code> ermöglicht es uns, JavaScript außerhalb eines Browsers auszuführen. Es ermöglicht uns auch, JavaScript auf der Server-Seite auszuführen. <code class=\"language-text\">NPM</code> steht für <em>Node Package Manager</em> und ist ein Tool, mit dem wir Node-Pakete als Abhängigkeiten installieren und verwalten können. <code class=\"language-text\">NPX</code> ist ein NPM-Package-Runner mit dem vereinfacht ausgedrückt Node-Pakete ausführbar sind, ohne sie installieren zu müssen. Warum <a href=\"https://www.npmjs.com/package/npx\">NPX</a> verwenden? Zum einen ist es mit <code class=\"language-text\">NPX</code> nicht erforderlich, Software zu installieren, die man nur einmal benötigt. Zum anderen greift man so jederzeit auf die aktuellste Version zu.</p>\n</blockquote>\n<h4>npm install maplibre-gl</h4>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">npm</span><span class=\"mtk1\"> </span><span class=\"mtk7\">install</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibre</span><span class=\"mtk8\">-</span><span class=\"mtk7\">gl</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p><a href=\"https://maplibre.org/maplibre-gl-js-docs/example/\">MapLibre GL</a> ist ein von der Community geführter Fork, der von <a href=\"https://docs.mapbox.com/mapbox-gl-js/api/\">mapbox-gl-js</a> abgeleitet wurde, bevor diese zu einer <a href=\"https://github.com/mapbox/mapbox-gl-js/blob/main/LICENSE.txt\">Nicht-OSS-Lizenz</a> wechselten. </p>\n<h4>npm install react-map-gl</h4>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">npm install react-map-gl</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span></code></pre>\n<p><a href=\"https://github.com/visgl/react-map-gl\"><code class=\"language-text\">react-map-gl</code></a> ist eine Suite von <a href=\"http://facebook.github.io/react/\">React</a>-Komponenten, die entwickelt wurde, um eine React-API für <a href=\"https://github.com/mapbox/mapbox-gl-js\">Mapbox GL JS</a>-kompatible Bibliotheken bereitzustellen.</p>\n<p>Mit v2.0 und höher ist es nicht mehr erlaubt <code class=\"language-text\">mapbox-gl</code> ohne <em>Mapbox Token</em> zu verwenden. Auch dann nicht, wenn man eine eigene Karte verwendet. Eine Alternative: Verwende einen freien Fork von <code class=\"language-text\">mapbox-gl</code>, zum Beispiel <a href=\"https://www.npmjs.com/package/maplibre-gl\">maplibre-gl</a>. In der <a href=\"https://github.com/visgl/react-map-gl/blob/master/docs/get-started/get-started.md#using-with-a-mapbox-gl-fork\">Dokumentation</a> ist beschrieben, was dabei zu beachten ist. Im Grunde genommen reicht es aus, einen Alias zu erstellen, der <code class=\"language-text\">mapbox-gl</code> in <code class=\"language-text\">maplibre-gl</code> verändert. Falls du diesem Beispiel folgst, reicht die im nächsten Schritt beschriebene Konfiguration mit <code class=\"language-text\">react-app-rewired</code> aus.</p>\n<h4>npm install react-app-rewired --save-dev</h4>\n<blockquote>\n<p><code class=\"language-text\">--save-dev</code> wird als Parameter von <a href=\"https://docs.npmjs.com/cli/v7/commands/npm-install\">npm install</a> verwendet, um das Paket <code class=\"language-text\">react-app-rewired</code> ausschließlich für die Entwicklung zu speichern.</p>\n</blockquote>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">npm install react-app-rewired --save-dev</span></span></code></pre>\n<p>Der Vorteil der <code class=\"language-text\">create-react-app</code> ist, dass die Konfiguration der Werkzeuge für uns übernommen wird. Als Nachteil nehmen wir in Kauf, dass die Einstellungen nicht einfach individuell anpassbar sind. Alles ist aber überschreibbar. Hierfür nutzen wir <a href=\"https://github.com/timarney/react-app-rewired#readme\"><code class=\"language-text\">react-app-rewired</code></a>.</p>\n<p>Erstelle im Stammverzeichnis deiner Anwendung eine Datei mit dem Namen <code class=\"language-text\">config-overrides.js</code> und folgendem Inhalt.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// https://raw.githubusercontent.com/astridx/maplibre-app/main/config-overrides.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">module</span><span class=\"mtk1\">.</span><span class=\"mtk8\">exports</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">function</span><span class=\"mtk1\"> </span><span class=\"mtk7\">override</span><span class=\"mtk1\">(config, env) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">config</span><span class=\"mtk1\">.</span><span class=\"mtk7\">module</span><span class=\"mtk1\">.</span><span class=\"mtk7\">rules</span><span class=\"mtk1\">.</span><span class=\"mtk7\">push</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        resolve:{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            alias: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk8\">...</span><span class=\"mtk7\">config</span><span class=\"mtk1\">.</span><span class=\"mtk7\">resolve</span><span class=\"mtk1\">.</span><span class=\"mtk7\">alias</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">&#39;mapbox-gl&#39;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&#39;maplibre-gl&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">config</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Passe als nächstes die Skripte in der Datei <code class=\"language-text\">package.json</code> so an, dass dein Override mithilfe von <code class=\"language-text\">react-app-rewired</code> verwendet wird.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"js\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk7\">package</span><span class=\"mtk1\">.</span><span class=\"mtk7\">json</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">&quot;scripts&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;start&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-app-rewired start&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;build&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-app-rewired build&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;test&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-app-rewired test&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;start&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-scripts start&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;build&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-scripts build&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   </span><span class=\"mtk11\">&quot;test&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-scripts test&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">&quot;eject&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;react-scripts eject&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">...</span></span></span></code></pre>\n<p>Die Konfiguration ist fertig. Im nächsten Schritt löschen wir Inhalte, die wir nicht benötigen.</p>\n<h3>Entfernen nicht benötigter Inhalte</h3>\n<p>Wir räumen auf. Dazu löschen wir alle Inhalte im <code class=\"language-text\">src</code>-Ordner, mit Ausnahme der Datei <code class=\"language-text\">index.js</code>. Den Inhalt der Datei <code class=\"language-text\">index.js</code> minimieren wir auf die nachfolgenden zwei Zeilen.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// https://raw.githubusercontent.com/astridx/maplibre-app/main/src/index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;react&#39;</span><span class=\"mtk1\">;\\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&#39;react-dom&#39;</span><span class=\"mtk1\">; </span><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\">.</span><span class=\"mtk7\">render</span><span class=\"mtk1\">(</span><span class=\"mtk3\">&lt;&gt;&lt;/&gt;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;root&#39;</span><span class=\"mtk1\">));</span></span></span></code></pre>\n<p>Jetzt ist die Anwendung starklar.</p>\n<h3>Anwendung starten</h3>\n<p>Starte nun die Anwendung. </p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">npm start</span></span></code></pre>\n<p>Im Browser siehst du unter <code class=\"language-text\">http://localhost:3000/</code> noch keine Ausgabe. Dies ändert sich im im nächsten Kapitel.</p>\n<blockquote>\n<p>Den fertigen Code zu diesem ersten Abschnitt findest du auf <a href=\"https://github.com/astridx/maplibre-app/tree/main\">Github</a>.</p>\n</blockquote>\n<h2>Einrichten der MapLibre-Karte</h2>\n<h3>Die Karte integrieren</h3>\n<p>Lege im <code class=\"language-text\">src</code>-Ordner die Datei <code class=\"language-text\">Map.js</code> an, die wir für die Anzeige der Karte verwenden:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactMapGL</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-map-gl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">ReactMapGL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">mapStyle</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://api.maptiler.com/maps/streets/style.json?key=my_key&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk8\">ReactMapGL</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Ich nutze ein <a href=\"https://cloud.maptiler.com/account/keys\">Maptiler Token</a> in diesem Tutorial an der Stelle <code class=\"language-text\">https://api.maptiler.com/maps/streets/style.json?key=my_key</code>, und implementiere die Karte mit MapLibre und MapTiler. Wenn du das Beispiel selbst nachvollziehen möchtest, erstelle dir bitte einen eigenen <a href=\"https://cloud.maptiler.com/account/keys\">Zugangsschlüssel</a>. </p>\n<blockquote>\n<p>Hinweis: Zum Lernen, ist das Einfügen des Token in den Quellcode eine Vereinfachung. In einem Echtsystem sollte es nicht im Quellcode zu sehen sein. Integriere dieses per <a href=\"https://create-react-app.dev/docs/adding-custom-environment-variables/\">Umgebungsvariable</a>.</p>\n</blockquote>\n<h3>Karte integrieren</h3>\n<p>Importiere die Komponente, welche die Karte anzeigt, in der Datei <code class=\"language-text\">index.js</code>.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"js\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-dom&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\">.</span><span class=\"mtk7\">render</span><span class=\"mtk1\">(</span><span class=\"mtk3\">&lt;&gt;&lt;/&gt;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&#39;root&#39;</span><span class=\"mtk1\">));</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./Map&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\">.</span><span class=\"mtk7\">render</span><span class=\"mtk1\">(</span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;root&quot;</span><span class=\"mtk1\">));</span></span></span></code></pre>\n<h3>Status der Karte</h3>\n<p>Bisher siehst du noch keine Karte. In <code class=\"language-text\">react-map-gl</code> wird der Kartenstatus über das Viewport-Objekt verwaltet. Es enthält alle Informationen zum Zustand der Karte wie Koordinaten, Zoom, Neigung, Größe im Browser. Um dies zu verwalten, nutzen wir den <code class=\"language-text\">useState</code>-Hook von React.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"js\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Map.js</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">useState</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactMapGL</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-map-gl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">mapViewport</span><span class=\"mtk1\">, </span><span class=\"mtk7\">setMapViewport</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useState</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   height: </span><span class=\"mtk11\">&quot;100vh&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   width: </span><span class=\"mtk11\">&quot;100wh&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   longitude: </span><span class=\"mtk6\">7.571606</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   latitude: </span><span class=\"mtk6\">50.226913</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">   zoom: </span><span class=\"mtk6\">4</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">ReactMapGL</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">     </span><span class=\"mtk9\">{</span><span class=\"mtk8\">...</span><span class=\"mtk7\">mapViewport</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">mapStyle</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://api.maptiler.com/maps/streets/style.json?key=my_key&quot;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">     </span><span class=\"mtk3\">onViewportChange</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">setMapViewport</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk8\">ReactMapGL</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Jedes Mal, wenn sich einer der Viewport-Werte in der Karte ändert, wird <code class=\"language-text\">onViewportChange</code> ausgelöst, wodurch unsere Statuswerte aktualisiert werden.</p>\n<blockquote>\n<p>Den fertigen Code zu diesem Abschnitt findest du auf <a href=\"https://github.com/astridx/maplibre-app/tree/1_maplibre-map\">Github</a>.</p>\n</blockquote>\n<h2>Marker auf der MapLibre-Karte</h2>\n<h3>Hooks</h3>\n<p>In diesem Beispiel werden wir die Hooks <code class=\"language-text\">useContext</code>, <code class=\"language-text\">useReducer</code> und <code class=\"language-text\">createContext</code> nutzen. Zunächst implementieren wir diese in der Datei <code class=\"language-text\">src/hooks/mapHook.js</code> an.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// mapHook.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">createContext</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useContext</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useReducer</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapStateContext</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createContext</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapDispatchContext</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createContext</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapProvider</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ children }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">state</span><span class=\"mtk1\">, </span><span class=\"mtk7\">dispatch</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useReducer</span><span class=\"mtk1\">(</span><span class=\"mtk7\">MapReducer</span><span class=\"mtk1\">, { markers: [] });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">MapStateContext.Provider</span><span class=\"mtk1\"> </span><span class=\"mtk3\">value</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">state</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">MapDispatchContext.Provider</span><span class=\"mtk1\"> </span><span class=\"mtk3\">value</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">dispatch</span><span class=\"mtk9\">}</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">{</span><span class=\"mtk7\">children</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">MapDispatchContext.Provider</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">MapStateContext.Provider</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useStateMap</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">context</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useContext</span><span class=\"mtk1\">(</span><span class=\"mtk7\">MapStateContext</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">context</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk5\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Error</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;useStateMap must be used within a MapProvider&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">context</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useDispatchMap</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">context</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useContext</span><span class=\"mtk1\">(</span><span class=\"mtk7\">MapDispatchContext</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">context</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk5\">undefined</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Error</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;useDispatchMap must be used within a MapProvider&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">context</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapReducer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (state, action) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">state</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Der komplizierte Aufbau ermöglicht es uns, während der Laufzeit ein erneutes Laden der Karte zu minimieren. </p>\n<blockquote>\n<p><a href=\"http://bit.ly/3gZjYIa\">Wie man React Context effektiv nutzt</a> erklärt der verlinkte Beitrag.</p>\n</blockquote>\n<h3>Reducer</h3>\n<p>In unserer Anwendung werden wir Marker zur Karte hinzufügen und entfernen. Folgerichtig erstellen wir zwei Aktionen für unseren Reducer <code class=\"language-text\">ADD_MARKER</code> und <code class=\"language-text\">REMOVE_MARKER</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// mapHook.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapReducer</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> (state, action) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">action</span><span class=\"mtk1\">.</span><span class=\"mtk7\">type</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">case</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;ADD_MARKER&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">...</span><span class=\"mtk7\">state</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        markers: [</span><span class=\"mtk8\">...</span><span class=\"mtk7\">state</span><span class=\"mtk1\">.</span><span class=\"mtk7\">markers</span><span class=\"mtk1\">, </span><span class=\"mtk7\">action</span><span class=\"mtk1\">.</span><span class=\"mtk7\">payload</span><span class=\"mtk1\">.</span><span class=\"mtk7\">marker</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">case</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;REMOVE_MARKER&quot;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk8\">...</span><span class=\"mtk7\">state</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        markers: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk8\">...</span><span class=\"mtk7\">state</span><span class=\"mtk1\">.</span><span class=\"mtk7\">markers</span><span class=\"mtk1\">.</span><span class=\"mtk7\">filter</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            x </span><span class=\"mtk13 mtkb\">=&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk7\">x</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">] </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk7\">action</span><span class=\"mtk1\">.</span><span class=\"mtk7\">payload</span><span class=\"mtk1\">.</span><span class=\"mtk7\">marker</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">] </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk7\">x</span><span class=\"mtk1\">[</span><span class=\"mtk6\">1</span><span class=\"mtk1\">] </span><span class=\"mtk8\">!==</span><span class=\"mtk1\"> </span><span class=\"mtk7\">action</span><span class=\"mtk1\">.</span><span class=\"mtk7\">payload</span><span class=\"mtk1\">.</span><span class=\"mtk7\">marker</span><span class=\"mtk1\">[</span><span class=\"mtk6\">1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">state</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<h3>Einbinden in die Anwendung</h3>\n<p>Es fehlt noch die Integration in die Anwendung. Diese implementieren wir, indem wir die <code class=\"language-text\">Map</code>-Komponente als Kind-Komponente in <code class=\"language-text\">MapProvider</code> integrieren.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"js\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-dom&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./Map&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">MapProvider</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./hooks/mapHook&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk7\">ReactDOM</span><span class=\"mtk1\">.</span><span class=\"mtk7\">render</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">MapProvider</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">MapProvider</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;root&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">);</span></span></span></code></pre>\n<h3>Marker dynamisch verwalten</h3>\n<p>In unserer Anwendung wollen wir <code class=\"language-text\">ADD_MARKER</code> jedes Mal aufrufen, wenn der Benutzer mit der linken Maustaste auf die Karte klickt.</p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting solarized-light\" data-language=\"js\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//map.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\">, { </span><span class=\"mtk7\">useState</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">ReactMapGL</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-map-gl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">mapViewport</span><span class=\"mtk1\">, </span><span class=\"mtk7\">setMapViewport</span><span class=\"mtk1\">] </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useState</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    height: </span><span class=\"mtk11\">&quot;100vh&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    width: </span><span class=\"mtk11\">&quot;100wh&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    longitude: </span><span class=\"mtk6\">7.571606</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    latitude: </span><span class=\"mtk6\">50.226913</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    zoom: </span><span class=\"mtk6\">4</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">ReactMapGL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk8\">...</span><span class=\"mtk7\">mapViewport</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">mapStyle</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://api.maptiler.com/maps/streets/style.json?key=YymZPIGfniu7apIvln6X&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">onViewportChange</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">setMapViewport</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">     </span><span class=\"mtk3\">onClick</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">x </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">       </span><span class=\"mtk7\">x</span><span class=\"mtk1\">.</span><span class=\"mtk7\">srcEvent</span><span class=\"mtk1\">.</span><span class=\"mtk7\">which</span><span class=\"mtk1\"> </span><span class=\"mtk8\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">1</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&amp;&amp;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">         </span><span class=\"mtk7\">mapDispatch</span><span class=\"mtk1\">({ type: </span><span class=\"mtk11\">&quot;ADD_MARKER&quot;</span><span class=\"mtk1\">, payload: { marker: </span><span class=\"mtk7\">x</span><span class=\"mtk1\">.</span><span class=\"mtk7\">lngLat</span><span class=\"mtk1\"> } });</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">     }</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">MarkerList</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">ReactMapGL</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Der nächste Schritt ist die Darstellung der Markern an den gespeicherten Koordinaten. Erstellen wir hierfür die zwei neuen Komponenten <code class=\"language-text\">Marker</code> und <code class=\"language-text\">MarkerList</code>.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//Marker/marker.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Marker</span><span class=\"mtk1\"> </span><span class=\"mtk8\">as</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MapMarker</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react-map-gl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Marker</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> ({ marker, handleRemove }) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">MapMarker</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">offsetTop</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk8\">-</span><span class=\"mtk6\">48</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">offsetLeft</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk8\">-</span><span class=\"mtk6\">24</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">latitude</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">marker</span><span class=\"mtk1\">[</span><span class=\"mtk6\">1</span><span class=\"mtk1\">]</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">longitude</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">marker</span><span class=\"mtk1\">[</span><span class=\"mtk6\">0</span><span class=\"mtk1\">]</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">img</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">onContextMenu</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">x </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">x</span><span class=\"mtk1\">.</span><span class=\"mtk7\">preventDefault</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">handleRemove</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">src</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://img.icons8.com/color/48/000000/marker.png&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk8\">MapMarker</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//Marker/markerList.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">Marker</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;./Marker&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">useStateMap</span><span class=\"mtk1\">, </span><span class=\"mtk7\">useDispatchMap</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;../hooks/mapHook&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">export</span><span class=\"mtk1\"> </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">MarkerList</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> () </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk7\">markers</span><span class=\"mtk1\"> } </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useStateMap</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk13 mtkb\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">mapDispatch</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">useDispatchMap</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">{</span><span class=\"mtk7\">markers</span><span class=\"mtk1\">?.</span><span class=\"mtk7\">map</span><span class=\"mtk1\">((marker, index) </span><span class=\"mtk13 mtkb\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">&lt;</span><span class=\"mtk8\">Marker</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">key</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">index</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">marker</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk7\">marker</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">handleRemove</span><span class=\"mtk8\">=</span><span class=\"mtk9\">{</span><span class=\"mtk1\">() </span><span class=\"mtk13 mtkb\">=&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk7\">mapDispatch</span><span class=\"mtk1\">({ type: </span><span class=\"mtk11\">&quot;REMOVE_MARKER&quot;</span><span class=\"mtk1\">, payload: { </span><span class=\"mtk7\">marker</span><span class=\"mtk1\"> } })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      ))</span><span class=\"mtk9\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>Standardmäßig werden Marker in der linken oberen Ecke verankert. Praktischerweise gibt es die Eigenschaften für den Marker-Offset, so dass wir die Marker wenn erforderlich etwas verschieben können.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">offsetTop</span><span class=\"mtk8\">=</span><span class=\"mtk1\">{-</span><span class=\"mtk6\">48</span><span class=\"mtk1\">}}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">offsetLeft</span><span class=\"mtk8\">=</span><span class=\"mtk1\">{-</span><span class=\"mtk6\">24</span><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Nun ist die Anzeige in der Karte mittels <code class=\"language-text\">&lt;MarkerList /&gt;</code> möglich.</p>\n<blockquote>\n<p>Den fertigen Code zu diesem Abschnitt findest du auf <a href=\"https://github.com/astridx/maplibre-app/tree/2_context\">Github</a>.</p>\n</blockquote>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .mtk9 { color: #D30102; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/2021-05-31-erste-schritte-mit-maplibre.md","excerpt":"Einrichten der Umgebung Zu Beginn richten wir die React-Anwendung ein und besorgen uns alle notwendigen Abhängigkeiten. Dazu führen wir die…","fields":{"slug":"/erste-schritte-mit-maplibre/"},"frontmatter":{"title":"Erste Schritte mit react-map-gl und MapLibre","date":"31.05.2021","tags":["Maps","Maplibre"],"thumbnail":null}}},"pageContext":{"slug":"/erste-schritte-mit-maplibre/","previous":{"id":"ca3971d5-f25c-5c06-b861-0cbcf90316a9","frontmatter":{"title":"Maplibre GL - Ebenen ein- und ausblenden","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","Layer","Layer-Switcher"],"template":"post"},"fields":{"slug":"/maplibregl-show-and-hide-layers/"}},"next":{"id":"c6c95f60-dfda-5f76-9426-bd85fb8ed84e","frontmatter":{"title":"First steps with react-map-gl and MapLibre","tags":["Maps","Maplibre"],"template":"post"},"fields":{"slug":"/en/erste-schritte-mit-maplibre/"}}}},"staticQueryHashes":[]}