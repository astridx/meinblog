{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/en/cassiopeia-how-to-make-navbar-keyboard-accessible/",
    "result": {"data":{"allWebmention":{"totalCount":0,"edges":[]},"markdownRemark":{"html":"<p>How to implement keyboard navigation in the navbar so that, for example, the left and right arrow keys open the previous and next dropdown menus, respectively, and clicking on a letter activates the corresponding menu item.</p>\n<p>The good news, it is not necessary to implement this yourself. There is already a JavaScript library [^github.com/NickDJM/accessible-menu] that implements this. Because Cassiopeia is a Bootstrap 5 template, I choose to use the variant created specifically for Bootstrap 5[^github.com/NickDJM/accessible-menu-bootstrap-5].</p>\n<p>The supported menu types are:</p>\n<ul>\n<li><a href=\"https://www.w3.org/TR/wai-aria-practices-1.2/examples/disclosure/disclosure-navigation.html\">Navigation Menu Disclosure</a>[^w3.org/TR/wai-aria-practices-1.2/examples/disclosure/disclosure-navigation.html]</li>\n<li><a href=\"https://www.w3.org/TR/wai-aria-practices-1.2/examples/menubar/menubar-navigation.html\">Navigation Menubar</a>[^w3.org/TR/wai-aria-practices-1.2/examples/menubar/menubar-navigation.html], and</li>\n<li><a href=\"https://www.w3.org/TR/wai-aria-practices-1.2/examples/treeview/treeview-navigation.html\">Navigation Treeview</a>[^w3.org/TR/wai-aria-practices-1.2/examples/treeview/treeview-navigation.html]</li>\n</ul>\n<p>A Cassiopeia override that you can use to create WCAG-compliant menus in the DOM is shown in the following example.</p>\n<h2 id=\"1-php-override\" style=\"position:relative;\"><a href=\"#1-php-override\" aria-label=\"1 php override permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. PHP Override</h2>\n<p>Create the file <code class=\"language-text\">accessiblemenu.php</code> in the directory <code class=\"language-text\">/templates/DEINTEMPLATE/html/mod_menu/</code>.</p>\n<blockquote>\n<p>Have you never created an override for a menu before? You can find more detailed information in the part describing a bootstrap navigation in Cassiopeia[^blog.astrid-guenther.de/en/cassiopeia-how-to-make-navbar-bootstrap].</p>\n</blockquote>\n<pre class=\"grvsc-container default-dark\" data-language=\"php\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;?php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">defined</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;_JEXEC&#39;</span><span class=\"mtk1\">) or </span><span class=\"mtk15\">die</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\HTML\\</span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Language\\</span><span class=\"mtk10\">Text</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Helper\\</span><span class=\"mtk10\">ModuleHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Filter\\</span><span class=\"mtk10\">OutputFilter</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;bootstrap.collapse&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">?&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;nav </span><span class=\"mtk4\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;navbar navbar-expand-md&quot;</span><span class=\"mtk1\"> aria-label=</span><span class=\"mtk8\">&quot;&lt;?php echo htmlspecialchars(</span><span class=\"mtk12\">$module</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk8\">, ENT_QUOTES, &#39;UTF-8&#39;); ?&gt;&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;button </span><span class=\"mtk4\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;navbar-toggler navbar-toggler-right&quot;</span><span class=\"mtk1\"> type=</span><span class=\"mtk8\">&quot;button&quot;</span><span class=\"mtk1\"> data-bs-toggle=</span><span class=\"mtk8\">&quot;collapse&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        data-bs-target=</span><span class=\"mtk8\">&quot;#navbar&lt;?php echo </span><span class=\"mtk12\">$module</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk8\">; ?&gt;&quot;</span><span class=\"mtk1\"> aria-controls=</span><span class=\"mtk8\">&quot;navbar&lt;?php echo </span><span class=\"mtk12\">$module</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk8\">; ?&gt;&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        aria-expanded=</span><span class=\"mtk8\">&quot;false&quot;</span><span class=\"mtk1\"> aria-label=</span><span class=\"mtk8\">&quot;&lt;?php echo Text::_(&#39;MOD_MENU_TOGGLE&#39;); ?&gt;&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;span </span><span class=\"mtk4\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;icon-menu&quot;</span><span class=\"mtk1\"> aria-hidden=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk1\">&gt;&lt;/span&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/button&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;div </span><span class=\"mtk4\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;collapse navbar-collapse&quot;</span><span class=\"mtk1\"> id=</span><span class=\"mtk8\">&quot;navbar&lt;?php echo </span><span class=\"mtk12\">$module</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk8\">; ?&gt;&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;?php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$tagId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$params</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;tag_id&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$id</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$tagId</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$id</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;accessiblemenu&#39;</span><span class=\"mtk1\"> .  </span><span class=\"mtk12\">$module</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">$app</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">getDocument</span><span class=\"mtk1\">()-&gt;</span><span class=\"mtk11\">addScriptOptions</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;accessibleMenuID&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$id</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ?&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;ul id=</span><span class=\"mtk8\">&quot;&lt;?php echo </span><span class=\"mtk12\">$id</span><span class=\"mtk8\">; ?&gt;&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;mod-menu nav navbar-nav &lt;?php echo </span><span class=\"mtk12\">$class_sfx</span><span class=\"mtk8\">; ?&gt;&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;?php </span><span class=\"mtk15\">foreach</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$list</span><span class=\"mtk1\"> as </span><span class=\"mtk12\">$i</span><span class=\"mtk1\"> =&gt; </span><span class=\"mtk4\">&amp;</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">getParams</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">$class</span><span class=\"mtk1\">      = </span><span class=\"mtk8\">&#39;nav-item item-&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">$default_id</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; default&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">$active_id</span><span class=\"mtk1\"> || (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;alias&#39;</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;aliasoptions&#39;</span><span class=\"mtk1\">) == </span><span class=\"mtk12\">$active_id</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; current&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$path</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; active&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;alias&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$aliasToId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;aliasoptions&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">count</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$path</span><span class=\"mtk1\">) &gt; </span><span class=\"mtk7\">0</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">$aliasToId</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">$path</span><span class=\"mtk1\">[</span><span class=\"mtk11\">count</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$path</span><span class=\"mtk1\">) - </span><span class=\"mtk7\">1</span><span class=\"mtk1\">]) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; active&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$aliasToId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$path</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; alias-parent-active&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">type</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;separator&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; divider&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">deeper</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; deeper&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">parent</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39; dropdown&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&lt;li class=&quot;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$class</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot;&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">switch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">type</span><span class=\"mtk1\">) :</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;separator&#39;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;separator not ready yet&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;component&#39;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;title&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_css</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_css</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">level</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;dropdown-item&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39;nav-link&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">parent</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39; dropdown-toggle&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;role&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;button&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;data-bs-toggle&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;dropdown&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;aria-expanded&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;false&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$path</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39; active&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_rel</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;rel&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_rel</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">$active_id</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;aria-current&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;location&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">current</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;aria-current&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;page&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an icon</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the link text is to be displayed, the icon is added with aria-hidden</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the icon itself is the link, it needs a visually hidden text</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&lt;span class=&quot;visually-hidden&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an image, maybe with its own class</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\"> = [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;image&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39;&lt;span class=&quot;image-title&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">browserNav</span><span class=\"mtk1\"> == </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;target&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;_blank&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">browserNav</span><span class=\"mtk1\"> == </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$options</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;onclick&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&quot;window.open(this.href, &#39;targetWindow&#39;, &#39;&quot;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$options</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&quot;&#39;); return false;&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;link&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk10\">OutputFilter</span><span class=\"mtk1\">::</span><span class=\"mtk11\">ampReplace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">htmlspecialchars</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">flink</span><span class=\"mtk1\">, ENT_COMPAT, </span><span class=\"mtk8\">&#39;UTF-8&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">false</span><span class=\"mtk1\">)), </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">case</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;heading&#39;</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$title</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\"> ? </span><span class=\"mtk8\">&#39; title=&quot;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot;&#39;</span><span class=\"mtk1\"> : </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$anchor_css</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_css</span><span class=\"mtk1\"> ?: </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an icon</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the link text is to be displayed, the icon is added with aria-hidden</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the icon itself is the link, it needs a visually hidden text</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&lt;span class=&quot;visually-hidden&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an image, maybe with its own class</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\"> = [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;image&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39;&lt;span class=&quot;image-title&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&lt;a class=&quot;nav-link dropdown-toggle &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$anchor_css</span><span class=\"mtk1\">. </span><span class=\"mtk8\">&#39;&quot; href=&quot;#&quot; &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$title</span><span class=\"mtk1\">. </span><span class=\"mtk8\">&#39; role=&quot;button&quot; data-bs-toggle=&quot;dropdown&quot; aria-expanded=&quot;false&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\">. </span><span class=\"mtk8\">&#39;&lt;/a&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">default</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">array</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;title&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_css</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_css</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">level</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;dropdown-item&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39;nav-link&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">parent</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39; dropdown-toggle&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;role&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;button&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;data-bs-toggle&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;dropdown&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;aria-expanded&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;false&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$path</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39; active&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_rel</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;rel&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_rel</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an icon</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the link text is to be displayed, the icon is added with aria-hidden</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk3\">// If the icon itself is the link, it needs a visually hidden text</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;&lt;span class=&quot;p-2 &#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_icon</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;&lt;span class=&quot;visually-hidden&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk3\">// The link is an image, maybe with an own class</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\"> = [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;class&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image_css</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;image&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">menu_image</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$image_attributes</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$itemParams</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;menu_text&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\"> .= </span><span class=\"mtk8\">&#39;&lt;span class=&quot;image-title&quot;&gt;&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">title</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&#39;&lt;/span&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">browserNav</span><span class=\"mtk1\"> == </span><span class=\"mtk7\">1</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;target&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;_blank&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;rel&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&#39;noopener noreferrer&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">anchor_rel</span><span class=\"mtk1\"> == </span><span class=\"mtk8\">&#39;nofollow&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                            </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;rel&#39;</span><span class=\"mtk1\">] .= </span><span class=\"mtk8\">&#39; nofollow&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">browserNav</span><span class=\"mtk1\"> == </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$options</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,&#39;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$params</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;window_open&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;onclick&#39;</span><span class=\"mtk1\">] = </span><span class=\"mtk8\">&quot;window.open(this.href, &#39;targetWindow&#39;, &#39;&quot;</span><span class=\"mtk1\"> . </span><span class=\"mtk12\">$options</span><span class=\"mtk1\"> . </span><span class=\"mtk8\">&quot;&#39;); return false;&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HTMLHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">_</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;link&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk10\">OutputFilter</span><span class=\"mtk1\">::</span><span class=\"mtk11\">ampReplace</span><span class=\"mtk1\">(</span><span class=\"mtk11\">htmlspecialchars</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">flink</span><span class=\"mtk1\">, ENT_COMPAT, </span><span class=\"mtk8\">&#39;UTF-8&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">false</span><span class=\"mtk1\">)), </span><span class=\"mtk12\">$linktype</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$attributes</span><span class=\"mtk1\">);                </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk15\">break</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">endswitch</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">// The next item is deeper.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">deeper</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&lt;ul class=&quot;mod-menu__sub list-unstyled small dropdown-menu&quot;&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            } </span><span class=\"mtk15\">elseif</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">shallower</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk3\">// The next item is shallower.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&lt;/li&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk11\">str_repeat</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;&lt;/ul&gt;&lt;/li&gt;&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$item</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">level_diff</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk3\">// The next item is on the same level.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk11\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&lt;/li&gt;&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ?&gt;&lt;/ul&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/div&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/nav&gt;</span></span></span></code></pre>\n<p>Note the line <code class=\"language-text\">$app->getDocument()->addScriptOptions('accessibleMenuID', $id);</code>. This is responsible for passing the name of the CSS navigation ID to the JavaScript file.</p>\n<h2 id=\"2-javascript-file\" style=\"position:relative;\"><a href=\"#2-javascript-file\" aria-label=\"2 javascript file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. JavaScript file</h2>\n<p>I copied the code from the file <code class=\"language-text\">https://github.com/NickDJM/accessible-menu-bootstrap-5/blob/1.x/dist/accessible-menu-bs5.js</code> into the JavaScript file of my template. I call the JavaScript file exactly as Cassipeia implements it. Consequently the file is located in the directory <code class=\"language-text\">/media/templates/site/MEINTEMPLATE/js/template.js</code>.</p>\n<blockquote>\n<p>The above solution is simple and has the advantage that no additional JavaScript file is loaded. The disadvantage is that the code is always loaded. Note this if you integrate another menu and do not want the new function in it.</p>\n</blockquote>\n<p>The original content is the following:</p>\n<p>`</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">Joomla</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\"> || {};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">(</span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\">, </span><span class=\"mtk12\">document</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&#39;use strict&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">initTemplate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">target</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk12\">target</span><span class=\"mtk1\"> ? </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk12\">target</span><span class=\"mtk1\"> : </span><span class=\"mtk12\">document</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     * Prevent clicks on buttons within a disabled fieldset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">target</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;fieldset.btn-group&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">self</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;disabled&#39;</span><span class=\"mtk1\">) ===  </span><span class=\"mtk4\">true</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk12\">style</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pointerEvents</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;none&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">btns</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;.btn&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ib</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">ib</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">btns</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">ib</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">btns</span><span class=\"mtk1\">[</span><span class=\"mtk12\">ib</span><span class=\"mtk1\">].</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;disabled&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">initTemplate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     * Back to top</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;back-top&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">.</span><span class=\"mtk12\">scrollTop</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\"> || </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">documentElement</span><span class=\"mtk1\">.</span><span class=\"mtk12\">scrollTop</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;visible&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;visible&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">onscroll</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">function</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;click&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk11\">preventDefault</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">scrollTo</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    [].</span><span class=\"mtk12\">slice</span><span class=\"mtk1\">.</span><span class=\"mtk11\">call</span><span class=\"mtk1\">(</span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">head</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;link[rel=&quot;lazy-stylesheet&quot;]&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$link</span><span class=\"mtk1\">){</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$link</span><span class=\"mtk1\">.</span><span class=\"mtk12\">rel</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;stylesheet&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">   * Initialize when a part of the page was updated</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">   */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;joomla:updated&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">initTemplate</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})(</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\">, </span><span class=\"mtk12\">document</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>The next code snippet shows you exactly where I inserted my additions.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">Joomla</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\"> || {};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">(</span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\">, </span><span class=\"mtk12\">document</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">&#39;use strict&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">initTemplate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">target</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">event</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk12\">target</span><span class=\"mtk1\"> ? </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk12\">target</span><span class=\"mtk1\"> : </span><span class=\"mtk12\">document</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     * Prevent clicks on buttons within a disabled fieldset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">target</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;fieldset.btn-group&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">i</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">self</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">fieldsets</span><span class=\"mtk1\">[</span><span class=\"mtk12\">i</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;disabled&#39;</span><span class=\"mtk1\">) ===  </span><span class=\"mtk4\">true</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk12\">style</span><span class=\"mtk1\">.</span><span class=\"mtk12\">pointerEvents</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;none&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">btns</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">self</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;.btn&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ib</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; </span><span class=\"mtk12\">ib</span><span class=\"mtk1\"> &lt; </span><span class=\"mtk12\">btns</span><span class=\"mtk1\">.</span><span class=\"mtk12\">length</span><span class=\"mtk1\">; </span><span class=\"mtk12\">ib</span><span class=\"mtk1\">++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">btns</span><span class=\"mtk1\">[</span><span class=\"mtk12\">ib</span><span class=\"mtk1\">].</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;disabled&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;DOMContentLoaded&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">initTemplate</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     * Back to top</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;back-top&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">body</span><span class=\"mtk1\">.</span><span class=\"mtk12\">scrollTop</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\"> || </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">documentElement</span><span class=\"mtk1\">.</span><span class=\"mtk12\">scrollTop</span><span class=\"mtk1\"> &gt; </span><span class=\"mtk7\">20</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;visible&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk12\">classList</span><span class=\"mtk1\">.</span><span class=\"mtk11\">remove</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;visible&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">onscroll</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">function</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">checkScrollPos</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">backToTop</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;click&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">event</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">event</span><span class=\"mtk1\">.</span><span class=\"mtk11\">preventDefault</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">window</span><span class=\"mtk1\">.</span><span class=\"mtk11\">scrollTo</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    [].</span><span class=\"mtk12\">slice</span><span class=\"mtk1\">.</span><span class=\"mtk11\">call</span><span class=\"mtk1\">(</span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk12\">head</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;link[rel=&quot;lazy-stylesheet&quot;]&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk4\">function</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$link</span><span class=\"mtk1\">){</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$link</span><span class=\"mtk1\">.</span><span class=\"mtk12\">rel</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;stylesheet&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">   * Initialize when a part of the page was updated</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">   */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;joomla:updated&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">initTemplate</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Copy the file content </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// https://github.com/NickDJM/accessible-menu-bootstrap-5/blob/1.x/dist/accessible-menu-bs5.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// to this location and add the following code.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">menuid</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getOptions</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;accessibleMenuID&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">menu</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">AccessibleMenuBootstrap5</span><span class=\"mtk1\">.</span><span class=\"mtk10\">Bootstrap5DisclosureMenu</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">menuElement:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;#&#39;</span><span class=\"mtk1\"> + </span><span class=\"mtk12\">menuid</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})(</span><span class=\"mtk12\">Joomla</span><span class=\"mtk1\">, </span><span class=\"mtk12\">document</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>Note the line <code class=\"language-text\">const menuid = Joomla.getOptions(\"accessibleMenuID\");</code>. With this you load the variable passed before in the PHP file into the JavaScript area.</p>\n<p>If you prefer to use <code class=\"language-text\">Treeview</code> or <code class=\"language-text\">Menubar</code> instead of the <code class=\"language-text\">DisclosureMenu</code>, just replace the call with one of the following code snippets.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">const menu = new AccessibleMenuBootstrap5.Bootstrap5Treeview({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  menuElement: document.querySelector(&#39;#&#39; + menuid),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">});</span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">menu = new AccessibleMenuBootstrap5.Bootstrap5Menubar({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  menuElement: document.querySelector(&#39;#&#39; + menuid),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">});</span></span></code></pre>\n<h2 id=\"3-select-menu-in-backend\" style=\"position:relative;\"><a href=\"#3-select-menu-in-backend\" aria-label=\"3 select menu in backend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Select menu in backend</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a66c91f769b259f3f07aba6b76aa38cf/d698c/accessiblemenu1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQoz43Ov0pcQRTH8ftIvkHKtClMaQypRBclWAVXAz5AKitbH8AydR7BQoQUgUAEJd69u3Pn/5w5X7k3mqBG3IEPh5k558dpDr6csHN4zOb0iL3dQ/a395hsfmJtMuX9ZMr6XX1sfWvKh+0DXr/dYOXVKm/efWTn8xHNzcLStR2m97iYcS7ikzzh4kM2FmJRzi5+cPr1G+fff+JTobmZ9SzaOTZkuj5gfMKFjB/C4596//dQHKtLQlawUZiZQDM0G+voraczHucjuQi1KlLrX8P9CVVEKmXsr8QsNCEVQgjjw3BU9f/DL1H9FxiLIAoqwhA7em6rZ+h9oHeBcHWNzOfI1TXm1yWxW5BFyaUuRyohCcNyTYyZ3LaoMWAdue0ovR03LlWXJ0oqleb3bIENAesDnbG4mCgi5JTIOS/Ne8esm3MLA4yfg9BhJBIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Override für das Menü im Backend auswählen\"\n        title=\"Override für das Menü im Backend auswählen\"\n        src=\"/static/a66c91f769b259f3f07aba6b76aa38cf/5a190/accessiblemenu1.png\"\n        srcset=\"/static/a66c91f769b259f3f07aba6b76aa38cf/772e8/accessiblemenu1.png 200w,\n/static/a66c91f769b259f3f07aba6b76aa38cf/e17e5/accessiblemenu1.png 400w,\n/static/a66c91f769b259f3f07aba6b76aa38cf/5a190/accessiblemenu1.png 800w,\n/static/a66c91f769b259f3f07aba6b76aa38cf/c1b63/accessiblemenu1.png 1200w,\n/static/a66c91f769b259f3f07aba6b76aa38cf/29007/accessiblemenu1.png 1600w,\n/static/a66c91f769b259f3f07aba6b76aa38cf/d698c/accessiblemenu1.png 1846w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<img src=\"https://vg09.met.vgwort.de/na/1c2d886fb9044f0eb546a431d8a0d2ac\" width=\"1\" height=\"1\" alt=\"\"></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"How to implement keyboard navigation in the navbar so that, for example, the left and right arrow keys open the previous and next dropdown…","fields":{"slug":"/en/cassiopeia-how-to-make-navbar-keyboard-accessible/"},"frontmatter":{"title":"A11y - an accessible menu for Cassiopeia or \"How do I achieve it that the navigation is usable with the keyboard?\"","date":"2022-03-29","tags":["Template","Joomla","Cassiopeia","A11y"],"syndication":null,"booklink":"","set":"","description":"desc","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVQ4y6WUv+vxURTH/QqhyI+BiCwGhTIZbDJaLBZFKWGRnwMWm8H/4C+QshkMklEyGgxWlEF+c76dU/f28Tz4enpOnc6n+7n31fvcc+4RXS4XYH4+nymeTieIRqMgEonAZDLBcrkEtOPxCMxwj/Asc5EQdjgcaHOn0yGYXC6n2G63af16vcJgMIDpdMqhTMQTEBfRmYJYLEYgpVJJMZFIcGUOhwPi8Th9o4CXQCEULRgMEgjd7/fDarWiddxXKpVgPp+/TZsrxJ9oo9EIzGYzByK82+3Cer2GzWYD4XAYdrsd3G43LuIlkKVbqVRAo9EQTCKRcDCmORwOodVq8QJ9BSwWiyCVSkEsFhMIvzGqVCrweDwwmUw48G2VhcBCoQAymYyADGqxWMBoNILX64XH48GV/anuJTCfzxMEYUxdOp2GxWIBs9nsYw++BJbLZbBarQRCpRhRNdr9fuepvlL3NmW32013xgridDqh3+9Tuqy6XyvMZrMEMRgMoFAoOBQ9mUzSa3l3fy+BuVyOA3w+H4RCoadqj8fjf6syU8iqq9freZH+C4h3qNVqnxocG549w4/TRgjMZDJ02Gaz8TSZu1wu/uy+BqZSKdDpdBCJRHjrqNVqggcCgb9m569AHFVCVczxDu12O+z3e17pj0A2bXq9Ho2oRqMB9XqdvFarQbVahWazCdvtlhr8I1CYxm/2SR0CfwB+ItRh5F47iAAAAABJRU5ErkJggg==","width":150,"height":150,"src":"/static/47f2a4ac5233c450f7d02d28772526d9/92ab1/cassiopeia.png","srcSet":"/static/47f2a4ac5233c450f7d02d28772526d9/92ab1/cassiopeia.png 1x,\n/static/47f2a4ac5233c450f7d02d28772526d9/668a7/cassiopeia.png 1.5x"}}}}}},"pageContext":{"slug":"/en/cassiopeia-how-to-make-navbar-keyboard-accessible/","previous":{"id":"4fb27a18-6caf-58df-8223-b30ae461f1ea","frontmatter":{"title":"Bootstrap 5 Navigation in Cassiopeia","tags":["Template","Joomla","Cassiopeia"],"categories":["Cassiopeia"],"template":"post"},"fields":{"slug":"/en/cassiopeia-how-to-make-navbar-bootstrap/"}},"next":{"id":"395240e6-626c-59b7-8a4f-d344e8e2079e","frontmatter":{"title":"A11y - ein zugängliches Menü für Cassiopeia oder \"Wie erreiche ich es, dass die Navigation mit der Tastatur bedienbar ist?\"","tags":["Template","Joomla","Cassiopeia","A11y"],"categories":["Cassiopeia"],"template":"post"},"fields":{"slug":"/cassiopeia-how-to-make-navbar-keyboard-accessible/"}}}},
    "staticQueryHashes": ["352937542"]}