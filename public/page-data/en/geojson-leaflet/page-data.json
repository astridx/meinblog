{"componentChunkName":"component---src-templates-post-js","path":"/en/geojson-leaflet/","result":{"data":{"markdownRemark":{"html":"<p>In the last chapter you learned about points, markers, lines and polygons. You can now draw these on a leaflet map and know when which object is the right one. You can distinguish <a href=\"https://leafletjs.com/reference.html#layergroup\">layer groups</a><sup id=\"fnref-leafletjs.com/reference.html#layergroup\"><a href=\"#fn-leafletjs.com/reference.html#layergroup\" class=\"footnote-ref\">leafletjs.com/reference.html#layergroup</a></sup> and <a href=\"https://leafletjs.com/reference.html#featuregroup\">feature groups</a><sup id=\"fnref-leafletjs.com/reference.html#featuregroup\"><a href=\"#fn-leafletjs.com/reference.html#featuregroup\" class=\"footnote-ref\">leafletjs.com/reference.html#featuregroup</a></sup> from each other and you know what to look for when displaying a leaflet map on a small display. In addition, you can now react appropriately to a mouse click or other event.</p>\n<p>The next chapter is about the format <a href=\"https://en.wikipedia.org/wiki/GeoJSON\">GeoJson</a><sup id=\"fnref-en.wikipedia.org/wiki/geojson\"><a href=\"#fn-en.wikipedia.org/wiki/geojson\" class=\"footnote-ref\">en.wikipedia.org/wiki/geojson</a></sup> and how to handle data well even in large quantities.</p>\n<p>GeoJSON is an open format that makes it easy to describe geographic data. It follows a specification - namely the <a href=\"https://en.wikipedia.org/wiki/Simple_Features\">Simple Feature Access Specification</a><sup id=\"fnref-en.wikipedia.org/wiki/simple_features\"><a href=\"#fn-en.wikipedia.org/wiki/simple_features\" class=\"footnote-ref\">en.wikipedia.org/wiki/simple_features</a></sup>. For the description of the geodata GeoJSON uses the <a href=\"https://en.wikipedia.org/wiki/JSON\">JavaScript Object Notation (JSON)</a><sup id=\"fnref-en.wikipedia.org/wiki/json\"><a href=\"#fn-en.wikipedia.org/wiki/json\" class=\"footnote-ref\">en.wikipedia.org/wiki/json</a></sup>.</p>\n<blockquote>\n<p>The term <em>Simple Feature Access Specification</em> hides a specification of the <a href=\"https://de.wikipedia.org/w/index.php?title=Open_Geospatial_Consortium\">Open Geospatial Consortium (OGC)</a><sup id=\"fnref-de.wikipedia.org/w/index.php?title=open_geospatial_consortium\"><a href=\"#fn-de.wikipedia.org/w/index.php?title=open_geospatial_consortium\" class=\"footnote-ref\">de.wikipedia.org/w/index.php?title=open_geospatial_consortium</a></sup>. This specification contains a generally valid description for geodata and their geometries. The fact that the specification is universally valid means that this data can be exchanged easily. The OGC is a non-profit organisation that aims to develop universally valid standards for geodata.</p>\n</blockquote>\n<h2>In this chapter we will …</h2>\n<p>First, we look at why GeoJSON was built. Then we compare the individual GeoJSON elements with the objects Leaflet provides. And last but not least, we try out the methods Leaflet provides specifically for processing GeoJSON data.</p>\n<h2>The history of GeoJSON</h2>\n<p><a href=\"https://de.wikipedia.org/wiki/GeoJSON\">GeoJSON</a><sup id=\"fnref-en.wikipedia.org/wiki/geojson\"><a href=\"#fn-en.wikipedia.org/wiki/geojson\" class=\"footnote-ref\">en.wikipedia.org/wiki/geojson</a></sup> extended <a href=\"https://en.wikipedia.org/wiki/JSON\">JSON</a><sup id=\"fnref-en.wikipedia.org/wiki/json\"><a href=\"#fn-en.wikipedia.org/wiki/json\" class=\"footnote-ref\">en.wikipedia.org/wiki/json</a></sup>. Before JSON was established as a data format, there was the extensible markup language <a href=\"https://en.wikipedia.org/wiki/XML\">XML</a><sup id=\"fnref-en.wikipedia.org/wiki/xml\"><a href=\"#fn-en.wikipedia.org/wiki/xml\" class=\"footnote-ref\">en.wikipedia.org/wiki/xml</a></sup>.</p>\n<p>Whenever something new is created, there is a reason for it!</p>\n<p>XML was <a href=\"https://www.w3.org/TR/1998/REC-xml-19980210\">published in 1998</a><sup id=\"fnref-www.w3.org/tr/1998/rec-xml-19980210\"><a href=\"#fn-www.w3.org/tr/1998/rec-xml-19980210\" class=\"footnote-ref\">www.w3.org/tr/1998/rec-xml-19980210</a></sup> to allow data to be exchanged between machines without the need for post-processing by humans. This became more and more important in times of the internet. Why did JSON - and later GeoJSON - arise besides XML?</p>\n<h3>Why was the GeoJSON format introduced?</h3>\n<p>What was the motivation for the development of the GeoJSON format? Obviously, there were situations where XML was not optimal for data exchange. Why is this the case, and what are the advantages of JSON or GeoJSON? First of all, all three formats offer the following:</p>\n<ul>\n<li>All three formats can be read and understood by a human.</li>\n<li>All three formats are hierarchically structured. This means that values can be represented within other values.</li>\n<li>All three formats are relatively easy to learn.</li>\n<li>All three formats can be analyzed and used by many programming languages.</li>\n<li>All three formats are interchangeable over the Hypertext Transfer Protocol (HTTP), i.e., via the Internet.</li>\n</ul>\n<p>Let's take a closer look at each format in this chapter to see what advantages the JSON format has over XML and what possibilities the GeoJSON format offers when working with <a href=\"https://en.wikipedia.org/wiki/Geographic_data_and_information\">geodata</a><sup id=\"fnref-en.wikipedia.org/wiki/geographic_data_and_information\"><a href=\"#fn-en.wikipedia.org/wiki/geographic_data_and_information\" class=\"footnote-ref\">en.wikipedia.org/wiki/geographic_data_and_information</a></sup>.</p>\n<h4>XML</h4>\n<p>XML describes the structure of data. With the help of <em>tags</em> a meaning is given to the data - a <a href=\"https://en.wikipedia.org/wiki/Semantics\">semantics</a><sup id=\"fnref-en.wikipedia.org/wiki/semantics\"><a href=\"#fn-en.wikipedia.org/wiki/semantics\" class=\"footnote-ref\">en.wikipedia.org/wiki/semantics</a></sup>. Because of XML's tag system, small data sets often become blown up and thus confusing. In addition, the addressing of individual tags in an XML file is sometimes quite complicated.</p>\n<h4>JSON</h4>\n<p>JSON is basically nothing more than the specification of a <a href=\"https://en.wikipedia.org/wiki/Syntax\">syntax</a><sup id=\"fnref-en.wikipedia.org/wiki/syntax\"><a href=\"#fn-en.wikipedia.org/wiki/syntax\" class=\"footnote-ref\">en.wikipedia.org/wiki/syntax</a></sup>. No meaning is given to the data, rather it is a pure syntactic structure. Because JSON structures data, objects can be easily defined from that data. JSON is under constant development. In December 1999, the first JSON format specification was adopted. Currently, there are two different but similar standards in terms of content, [<a href=\"https://tools.ietf.org/pdf/rfc8259.pdf\">RFC 8259</a><sup id=\"fnref-tools.ietf.org/pdf/rfc8259.pdf\"><a href=\"#fn-tools.ietf.org/pdf/rfc8259.pdf\" class=\"footnote-ref\">tools.ietf.org/pdf/rfc8259.pdf</a></sup> and <a href=\"https://www.ecma-international.org/publications-and-standards/standards/ecma-404/\">ECMA-404</a><sup id=\"fnref-ecma-international.org/publications-and-standards/standards/ecma-404\"><a href=\"#fn-ecma-international.org/publications-and-standards/standards/ecma-404\" class=\"footnote-ref\">ecma-international.org/publications-and-standards/standards/ecma-404</a></sup>.</p>\n<p>The main advantage of JSON over XML is its ease of use. Since JSON represents valid JavaScript by itself, it can be called directly and thus converted into a JavaScript object. The individual properties of these objects are accessed via the attributes. In the next chapter, we will include a file containing GeoJSON objects. Just by including it, it is possible to access the GeoJSON objects inside. In comparison, an XML file must first be parsed with an XML parser! Another advantage of JSON is that no end tag is required. Mainly for this reason JSON is more compact and is read and executed faster.</p>\n<blockquote>\n<p>Data from a GeoJSON file located in a GitHub repository is automatically displayed on an interactive map when the file is clicked in the repository. <a href=\"https://github.com/blog/1528-there-s-a-map-for-that\">Github</a><sup id=\"fnref-https://github.com/blog/1528-there-s-a-map-for-that\"><a href=\"#fn-https://github.com/blog/1528-there-s-a-map-for-that\" class=\"footnote-ref\">https://github.com/blog/1528-there-s-a-map-for-that</a></sup> creates these maps using Leaflet. For example, check out the <a href=\"https://github.com/astridx/world.geo.json/blob/master/countries.geo.json\">world.geo.json</a><sup id=\"fnref-github.com/astridx/world.geo.json/blob/master/countries.geo.json\"><a href=\"#fn-github.com/astridx/world.geo.json/blob/master/countries.geo.json\" class=\"footnote-ref\">github.com/astridx/world.geo.json/blob/master/countries.geo.json</a></sup> repository to see for yourself.</p>\n</blockquote>\n<p>A small example illustrates that XML requires more characters than JSON to describe the same object. An object encoded with 95 characters in XML requires 73 characters in JSON. For one object, this difference is marginal. Usually, a large number of objects are represented digitally. For a large number of objects, this difference can be very important. In the following, you will first see the XML snippet which consists of 95 characters.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"xml\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">joomlers</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">number</span><span class=\"mtk1\">&gt;1721&lt;/</span><span class=\"mtk7\">number</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">vorname</span><span class=\"mtk1\">&gt;Astrid&lt;/</span><span class=\"mtk7\">vorname</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">nachname</span><span class=\"mtk1\">&gt;Günther&lt;/</span><span class=\"mtk7\">nachname</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">joomlers</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p>The same object can be described with 73 characters in JSON format.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">„</span><span class=\"mtk7\">joomlers</span><span class=\"mtk1\">“: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">„number“: „</span><span class=\"mtk6\">1721</span><span class=\"mtk1\">“,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">„vorname“: „</span><span class=\"mtk7\">Astrid</span><span class=\"mtk1\">“,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">„nachname“: „</span><span class=\"mtk7\">Günther</span><span class=\"mtk1\">“</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">},</span></span></span></code></pre>\n<h4>And why after JSON even GeoJSON?</h4>\n<p>Geodata could be described and processed in JSON. What is the advantage of the special <em>Geo</em>-JSON format? GeoJSON is JSON - but optimized for geodata. GeoJSON gives the geodata semantics once again - i.e. a meaning. Now you are probably wondering what this back and forth is all about. Does it make sense? Yes, it makes sense: GeoJSON only picks out the positive features of the JSON and XML formats.</p>\n<p>GeoJSON describes points, lines, and polygons and does well with these shapes in a coordinate system. In the previous chapter we saw that working with geodata is basically nothing different. GeoJSON has become a very popular data format for many geospatial information systems. In this book, I mention GeoJSON specifically because Leaflet is also very good at handling data in GeoJSON format. Here, we'll start by taking a closer look at GeoJSON objects. If you'd prefer to get practical right away, it's best to keep scrolling. In the next part, you will learn how to display and edit GeoJSON elements on your map.</p>\n<p>To put it in time chronology: GeoJSON is still quite young:</p>\n<ul>\n<li>In June 2008, the first GeoJSON format specification was announced.</li>\n<li>In August 2016, the <a href=\"http://geojson.org/\">RFC (Requests for Comments) 7946</a><sup id=\"fnref-geojson.org\"><a href=\"#fn-geojson.org\" class=\"footnote-ref\">geojson.org</a></sup> was published.</li>\n</ul>\n<blockquote>\n<p>The formal specification of the GeoJSON format can be found at <a href=\"https://tools.ietf.org/html/rfc7946\">https://tools.ietf.org/html/rfc7946</a><sup id=\"fnref-tools.ietf.org/html/rfc7946\"><a href=\"#fn-tools.ietf.org/html/rfc7946\" class=\"footnote-ref\">tools.ietf.org/html/rfc7946</a></sup> online.</p>\n</blockquote>\n<h3>Explore GeoJSON</h3>\n<p>You now know that you can use GeoJSON to encode many geographic data structures in a machine-readable language. A GeoJSON object can represent a simple geometry, for example a point, a line or a polygon. In addition, you can give a geometry a meaning. You can assign properties to each element. For example, you can give a line the property 'type=street' or 'name=church street'. In this case, you create a GeoJSON object of type <a href=\"https://tools.ietf.org/html/rfc7946#section-3.2\">Feature</a><sup id=\"fnref-tools.ietf.org/html/rfc7946#section-3.2\"><a href=\"#fn-tools.ietf.org/html/rfc7946#section-3.2\" class=\"footnote-ref\">tools.ietf.org/html/rfc7946#section-3.2</a></sup>. If you want to group multiple feature objects together, you can group them into a collection of features. For this, there is a GeoJSON type called <a href=\"https://tools.ietf.org/html/rfc7946#section-3.3\">FeatureCollection</a><sup id=\"fnref-tools.ietf.org/html/rfc7946#section-3.3\"><a href=\"#fn-tools.ietf.org/html/rfc7946#section-3.3\" class=\"footnote-ref\">tools.ietf.org/html/rfc7946#section-3.3</a></sup>. Understanding these concepts has many advantages. It also helps you understand how to work with geospatial data in general. This is because the basic concepts applied in GeoJSON have been a part of <a href=\"https://en.wikipedia.org/wiki/Geographic_information_system\">geoinformation systems</a><sup id=\"fnref-en.wikipedia.org/wiki/geographic_information_system\"><a href=\"#fn-en.wikipedia.org/wiki/geographic_information_system\" class=\"footnote-ref\">en.wikipedia.org/wiki/geographic_information_system</a></sup> for many years.</p>\n<p>Let's start from the beginning:</p>\n<h4>A geometry</h4>\n<p>A <a href=\"https://en.wikipedia.org/wiki/GeoJSON#Geometries\">geometry</a><sup id=\"fnref-en.wikipedia.org/wiki/geojson#geometries\"><a href=\"#fn-en.wikipedia.org/wiki/geojson#geometries\" class=\"footnote-ref\">en.wikipedia.org/wiki/geojson#geometries</a></sup> is a shape. All shapes in GeoJSON are described using one or more coordinates. A coordinate is called <em>position</em> in GeoJSON.</p>\n<p>GeoJSON does support the geometry types</p>\n<ol>\n<li>Point,</li>\n<li>LineString,</li>\n<li>Polygon,</li>\n<li>MultiPoint,</li>\n<li>MultiLineString, und</li>\n<li>MultiPolygon</li>\n</ol>\n<p>– and each of these geometry types contains positions.</p>\n<h5>Positions</h5>\n<p>The most important element when working with geodata is the definition of the point on the Earth. The point on the earth is the one to which the geodata is assigned. We know this data also under the name coordinate. In the chapter about the coordinate system I have already written quite a lot about coordinates on the earth. Here again briefly: A coordinate is a number combination. Each number of a coordinate is for a dimension. We'll limit ourselves to two dimensions in this book, namely the geographic longitude and the geographic latitude. GeoJSON supports three dimensions - in addition to longitude and latitude, you can also specify the Elevation on Earth.</p>\n<blockquote>\n<p>With the <a href=\"https://wiki.openstreetmap.org/w/index.php?title=DE:Genauigkeit_von_GPS-Daten\">global navigation satellite system (GPS)</a><sup id=\"fnref-wiki.openstreetmap.org/w/index.php?title=de:genauigkeit_von_gps-daten\"><a href=\"#fn-wiki.openstreetmap.org/w/index.php?title=de:genauigkeit_von_gps-daten\" class=\"footnote-ref\">wiki.openstreetmap.org/w/index.php?title=de:genauigkeit_von_gps-daten</a></sup> a fourth dimension is relevant. Besides longitude, latitude and altitude, the time matters.</p>\n</blockquote>\n<p>The coordinates are formatted in GeoJSON in decimal format. The first number is the geographical longitude and the second number is the geographical latitude. Concretely, a position in GeoJSON looks like this:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">;[</span><span class=\"mtk7\">longitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">latitude</span><span class=\"mtk1\">, </span><span class=\"mtk7\">altitude</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<p>or</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">;[</span><span class=\"mtk6\">50.254</span><span class=\"mtk1\">, </span><span class=\"mtk6\">7.5847</span><span class=\"mtk1\">, </span><span class=\"mtk6\">324.1</span><span class=\"mtk1\">]</span></span></span></code></pre>\n<img src=\"https://vg07.met.vgwort.de/na/7bbe8e9e57fa47bab5021a13965b0ee7\" width=\"1\" height=\"1\" alt=\"\">\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/leaflet/3geojson-leaflet.en.md","excerpt":"In the last chapter you learned about points, markers, lines and polygons. You can now draw these on a leaflet map and know when which…","fields":{"slug":"/en/geojson-leaflet/"},"frontmatter":{"title":"GeoJSON","date":"15.12.2018","tags":["geografische Daten","Leaflet"],"thumbnail":null}}},"pageContext":{"slug":"/en/geojson-leaflet/","previous":{"id":"87c546ce-d41b-5ddc-910a-10cff0a0f3c6","frontmatter":{"title":"Die Karte mit Daten bestücken","tags":["geografische Daten","Leaflet"],"template":"post"},"fields":{"slug":"/en/die-karte-mit-daten-leaflet/"}},"next":{"id":"1d30f00d-2e11-5d19-8a1a-f95ecf8f8065","frontmatter":{"title":"GeoJSON","tags":["geografische Daten","Leaflet"],"template":"post"},"fields":{"slug":"/geojson-leaflet/"}}}},"staticQueryHashes":[]}