{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/en/joomla-serverseiteige-validierung/",
    "result": {"data":{"allWebmention":{"totalCount":0,"edges":[]},"markdownRemark":{"html":"<p>Your component is user-friendly. User experience (UX) or user experience is on everyone's lips. If a user enters incorrect data, it's important to you that they get an explanation. This is where we use validation.<!-- \\index{validation (server-side)} --></p>\n<p>In server-side validation, the input submitted by the user is sent to the server and validated using the scripting language. In the case of Joomla, this is PHP. After the validation process on the server side, the feedback is sent back to the client from a new dynamically generated web page. It is safe to validate user input from the server. Malicious attackers have no easy game this way. Client-side scripting languages are easier to trick. Intruders bypass them to send malicious input to the server.</p>\n<blockquote>\n<p>Since both validation methods (server and client) have their own importance, it is recommended to use them simultaneously. Server-side validation is more secure. The client-side one is more user-friendly!</p>\n</blockquote>\n<p>This part covers the server-side validation in Joomla 4.</p>\n<blockquote>\n<p>For impatient people: View the changed program code in the <a href=\"https://codeberg.org/astrid/j4examplecode/compare/t10...t11a\">Diff View</a>[^codeberg.org/astrid/j4examplecode/compare/t10...t11a] and copy these changes into your development version.</p>\n</blockquote>\n<h2 id=\"step-by-step\" style=\"position:relative;\"><a href=\"#step-by-step\" aria-label=\"step by step permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step by step</h2>\n<h3 id=\"new-files\" style=\"position:relative;\"><a href=\"#new-files\" aria-label=\"new files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>New files</h3>\n<!-- prettier-ignore -->\n<h4 id=\"administratorcomponentscom_foos-srcruleletterrulephp\" style=\"position:relative;\"><a href=\"#administratorcomponentscom_foos-srcruleletterrulephp\" aria-label=\"administratorcomponentscom_foos srcruleletterrulephp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>administrator/components/com_foos/ src/Rule/LetterRule.php</h4>\n<p>The main goal here is not to learn meaningful validation. Rather, I'm showing you how to integrate your rules into Joomla. That's why you see here only a rudimentary example: In the name it is forbidden to insert a number from now on. In concrete terms, this means: <em>Astrid</em> is allowed. <em>Astrid9</em> is not allowed. For this we create the file <code class=\"language-text\">LetterRule.php</code>.</p>\n<blockquote>\n<p>Here in the example I only use the <a href=\"https://de.wikipedia.org/wiki/Regul%C3%A4rer_Ausdruck\">regular expression</a> to be checked in the class <code class=\"language-text\">LetterRule.php</code>. Of course it is possible to integrate complex checks using functions.</p>\n</blockquote>\n<p><a href=\"https://codeberg.org/astrid/j4examplecode/src/branch/t11a/src/administrator/components/com_foos/src/Rule/LetterRule.php\">administrator/components/com_foos/src/Rule/LetterRule.php</a></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"php\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-2\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// https://codeberg.org/astrid/j4examplecode/raw/branch/t11a/src/administrator/components/com_foos/src/Rule/LetterRule.php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"-1\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"0\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;?php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> * Joomla! Content Management System</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> * </span><span class=\"mtk4\">@copyright</span><span class=\"mtk3\">  Copyright (C) 2005 - 2020 Open Source Matters, Inc. All rights reserved.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> * </span><span class=\"mtk4\">@license</span><span class=\"mtk3\">    GNU General Public License version 2 or later; see LICENSE.txt</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">namespace</span><span class=\"mtk1\"> </span><span class=\"mtk10\">FooNamespace\\Component\\Foos\\Administrator\\Rule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\\</span><span class=\"mtk11\">defined</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;_JEXEC&#39;</span><span class=\"mtk1\">) or </span><span class=\"mtk15\">die</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Form\\</span><span class=\"mtk10\">FormRule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> * Form Rule class for the Joomla Platform.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> * </span><span class=\"mtk4\">@since</span><span class=\"mtk3\">  __DEPLOY_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"> */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">LetterRule</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">FormRule</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * The regular expression to use in testing a form field value.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * </span><span class=\"mtk4\">@var</span><span class=\"mtk3\">    </span><span class=\"mtk4\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * </span><span class=\"mtk4\">@since</span><span class=\"mtk3\">  __DEPLOY_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$regex</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;^([a-z]+)$&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3\">/**</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * The regular expression modifiers to use when testing a form field value.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t *</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * </span><span class=\"mtk4\">@var</span><span class=\"mtk3\">    </span><span class=\"mtk4\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t * </span><span class=\"mtk4\">@since</span><span class=\"mtk3\">  __DEPLOY_VERSION__</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">\t */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$modifiers</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&#39;i&#39;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"></span></span></code></pre>\n<p>It is not necessary to implement the <code class=\"language-text\">test</code> method in your file. You inherit it from the class <code class=\"language-text\">FormRule</code>, which is implemented in the file <code class=\"language-text\">/libraries/src/Form/FormRule.php</code>. In it you will find the code</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"php\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">protected</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$regex</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">test</span><span class=\"mtk1\">(\\</span><span class=\"mtk4\">SimpleXMLElement</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $value</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $group</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Registry</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$input</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Form</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$form</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk3\">// Test the value against the regular expression.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk11\">preg_match</span><span class=\"mtk1\">(\\</span><span class=\"mtk11\">chr</span><span class=\"mtk1\">(</span><span class=\"mtk7\">1</span><span class=\"mtk1\">) . </span><span class=\"mtk4\">$this</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">regex</span><span class=\"mtk1\"> . \\</span><span class=\"mtk11\">chr</span><span class=\"mtk1\">(</span><span class=\"mtk7\">1</span><span class=\"mtk1\">) . </span><span class=\"mtk4\">$this</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk12\">modifiers</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$value</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;\t</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3 id=\"modified-files\" style=\"position:relative;\"><a href=\"#modified-files\" aria-label=\"modified files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modified files</h3>\n<p>To make Joomla apply the rule in the <code class=\"language-text\">LetterRule.php</code> file to the text field for entering the name, we modify the form file.</p>\n<!-- prettier-ignore -->\n<h4 id=\"administratorcomponentscom_foos-formsfooxml\" style=\"position:relative;\"><a href=\"#administratorcomponentscom_foos-formsfooxml\" aria-label=\"administratorcomponentscom_foos formsfooxml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>administrator/components/com_foos/ forms/foo.xml</h4>\n<p>What has changed is <code class=\"language-text\">&lt;fieldset addruleprefix=\"FooNamespace\\Component\\Foos\\Administrator\\Rule\"></code> and <code class=\"language-text\">validate=\"Letter\"</code>. The parameter <code class=\"language-text\">addruleprefix=\"FooNamespace\\Component\\Foos\\Administrator\\Rule\"</code> ensures that the form searches for rules in the namespace <code class=\"language-text\">FooNamespace\\Component\\Foos\\Administrator\\Rule</code> and <code class=\"language-text\">validate=\"Letter\"</code> indicates that the rule <code class=\"language-text\">Letter</code>, i.e. according to Joomla standard the class <code class=\"language-text\">LetterRule</code>, is applied.</p>\n<p><a href=\"https://codeberg.org/astrid/j4examplecode/src/branch/t11a/src/administrator/components/com_foos/forms/foo.xml\">administrator/components/com_foos/forms/foo.xml</a></p>\n<pre class=\"grvsc-container grvsc-has-line-highlighting default-dark\" data-language=\"php\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> &lt;?xml version=</span><span class=\"mtk8\">&quot;1.0&quot;</span><span class=\"mtk1\"> encoding=</span><span class=\"mtk8\">&quot;utf-8&quot;</span><span class=\"mtk1\">?&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> &lt;form&gt;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-del\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-del\" aria-hidden=\"true\" data-content=\"-\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t&lt;fieldset&gt;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t&lt;fieldset addruleprefix=</span><span class=\"mtk8\">&quot;FooNamespace\\Component\\Foos\\Administrator\\Rule&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t&lt;field</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\tname=</span><span class=\"mtk8\">&quot;id&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\ttype=</span><span class=\"mtk8\">&quot;number&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t&lt;field</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\tname=</span><span class=\"mtk8\">&quot;name&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\ttype=</span><span class=\"mtk8\">&quot;text&quot;</span></span></span>\n<span class=\"grvsc-line grvsc-line-diff grvsc-line-diff-add\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-diff-add\" aria-hidden=\"true\" data-content=\"+\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\tvalidate=</span><span class=\"mtk8\">&quot;Letter&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\tlabel=</span><span class=\"mtk8\">&quot;COM_FOOS_FIELD_NAME_LABEL&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\tsize=</span><span class=\"mtk8\">&quot;40&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"><span class=\"mtk1\"> \t\t\trequired=</span><span class=\"mtk8\">&quot;true&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter\" aria-hidden=\"true\"></span><span class=\"grvsc-source\"></span></span></code></pre>\n<h2 id=\"example-taken-from-joomla-core\" style=\"position:relative;\"><a href=\"#example-taken-from-joomla-core\" aria-label=\"example taken from joomla core permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example taken from Joomla Core</h2>\n<p>To show you what is possible I add below two examples from Joomla Core as inspiration.</p>\n<h3 id=\"username\" style=\"position:relative;\"><a href=\"#username\" aria-label=\"username permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Username</h3>\n<p>For the username, the Joomla database is used to check if the name already exists. In this case <code class=\"language-text\">false</code> is returned. Otherwise the test is successful.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"php\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;?php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">namespace</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Joomla\\CMS\\Form\\Rule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Form\\</span><span class=\"mtk10\">Form</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Form\\</span><span class=\"mtk10\">FormRule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Database\\</span><span class=\"mtk10\">DatabaseAwareInterface</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Database\\</span><span class=\"mtk10\">DatabaseAwareTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Database\\</span><span class=\"mtk10\">ParameterType</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Registry\\</span><span class=\"mtk10\">Registry</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">UsernameRule</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">FormRule</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">DatabaseAwareInterface</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">use</span><span class=\"mtk1\"> </span><span class=\"mtk10\">DatabaseAwareTrait</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">test</span><span class=\"mtk1\">(\\</span><span class=\"mtk4\">SimpleXMLElement</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $value</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $group</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Registry</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$input</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Form</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$form</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Get the database object and a new query object.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">    = </span><span class=\"mtk4\">$this</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">getDatabase</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$query</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">getQuery</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Get the extra field check attribute.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$userId</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">$form</span><span class=\"mtk1\"> instanceof Form) ? (</span><span class=\"mtk4\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$form</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">getValue</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;id&#39;</span><span class=\"mtk1\">) : </span><span class=\"mtk7\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Build the query.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$query</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;COUNT(*)&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            -&gt;</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;#__users&#39;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            -&gt;</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;username&#39;</span><span class=\"mtk1\">) . </span><span class=\"mtk8\">&#39; = :username&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">quoteName</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;id&#39;</span><span class=\"mtk1\">) . </span><span class=\"mtk8\">&#39; &lt;&gt; :userId&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            -&gt;</span><span class=\"mtk11\">bind</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;:username&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$value</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            -&gt;</span><span class=\"mtk11\">bind</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;:userId&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$userId</span><span class=\"mtk1\">, </span><span class=\"mtk10\">ParameterType</span><span class=\"mtk1\">::INTEGER);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Set and query the database.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">setQuery</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$query</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$duplicate</span><span class=\"mtk1\"> = (</span><span class=\"mtk4\">bool</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$db</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">loadResult</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$duplicate</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3 id=\"url\" style=\"position:relative;\"><a href=\"#url\" aria-label=\"url permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URL</h3>\n<p>The URL field does not require a regular expression. Various requirements are queried successively. If a requirement is not given, <code class=\"language-text\">false</code> is returned. Otherwise, the test is successful.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"php\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;?php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">namespace</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Joomla\\CMS\\Form\\Rule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Form\\</span><span class=\"mtk10\">Form</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Form\\</span><span class=\"mtk10\">FormRule</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\CMS\\Language\\</span><span class=\"mtk10\">Text</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Registry\\</span><span class=\"mtk10\">Registry</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\String\\</span><span class=\"mtk10\">StringHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">use</span><span class=\"mtk1\"> Joomla\\Uri\\</span><span class=\"mtk10\">UriHelper</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">UrlRule</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">FormRule</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">test</span><span class=\"mtk1\">(\\</span><span class=\"mtk4\">SimpleXMLElement</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $value</span><span class=\"mtk1\">,</span><span class=\"mtk12\"> $group</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Registry</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$input</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">, </span><span class=\"mtk4\">Form</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$form</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">null</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// If the field is empty and not required, the field is valid.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$required</span><span class=\"mtk1\"> = ((</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;required&#39;</span><span class=\"mtk1\">] === </span><span class=\"mtk8\">&#39;true&#39;</span><span class=\"mtk1\"> || (</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;required&#39;</span><span class=\"mtk1\">] === </span><span class=\"mtk8\">&#39;required&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">$required</span><span class=\"mtk1\"> &amp;&amp; </span><span class=\"mtk11\">empty</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$value</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">UriHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">parse_url</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$value</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// See https://www.w3.org/Addressing/URL/url-spec.txt</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Use the full list or optionally specify a list of permitted schemes.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$element</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;schemes&#39;</span><span class=\"mtk1\">] == </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">array</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;http&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;https&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;ftp&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;ftps&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;gopher&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;mailto&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;news&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;prospero&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;telnet&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;rlogin&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;sftp&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;tn3270&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;wais&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk8\">&#39;mid&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;cid&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;nntp&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;tel&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;urn&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;ldap&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;file&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;fax&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;modem&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;git&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk15\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">explode</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;,&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;schemes&#39;</span><span class=\"mtk1\">]);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">/*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">         * Note that parse_url() does not always parse accurately without a scheme,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">         * but at least the path should be set always. Note also that parse_url()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">         * returns False for seriously malformed URLs instead of an associative array.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">         * @link https://www.php.net/manual/en/function.parse-url.php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">         */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\"> === </span><span class=\"mtk4\">false</span><span class=\"mtk1\"> || !\\</span><span class=\"mtk11\">array_key_exists</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;scheme&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">/*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">             * The function parse_url() returned false (seriously malformed URL) or no scheme</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">             * was found and the relative option is not set: in both cases the field is not valid.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">             */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\"> === </span><span class=\"mtk4\">false</span><span class=\"mtk1\"> || !</span><span class=\"mtk12\">$element</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;relative&#39;</span><span class=\"mtk1\">]) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">$element</span><span class=\"mtk1\">-&gt;</span><span class=\"mtk11\">addAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;message&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk10\">Text</span><span class=\"mtk1\">::</span><span class=\"mtk11\">sprintf</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;JLIB_FORM_VALIDATE_FIELD_URL_SCHEMA_MISSING&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$value</span><span class=\"mtk1\">, </span><span class=\"mtk11\">implode</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;, &#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\">)));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">// The best we can do for the rest is make sure that the path exists and is valid UTF-8.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!\\</span><span class=\"mtk11\">array_key_exists</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;path&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">) || !</span><span class=\"mtk10\">StringHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">valid</span><span class=\"mtk1\">((</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;path&#39;</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">// The internal URL seems to be good.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Scheme found, check all parts found.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\"> = (</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;scheme&#39;</span><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">strtolower</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (\\</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\">) == </span><span class=\"mtk4\">false</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// For some schemes here must be two slashes.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">array</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;http&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;https&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;ftp&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;ftps&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;gopher&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;wais&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;prospero&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;sftp&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;telnet&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;git&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (\\</span><span class=\"mtk11\">in_array</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$scheme</span><span class=\"mtk1\">) &amp;&amp; </span><span class=\"mtk11\">substr</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$value</span><span class=\"mtk1\">, \\</span><span class=\"mtk11\">strlen</span><span class=\"mtk1\">(</span><span class=\"mtk12\">$urlScheme</span><span class=\"mtk1\">), </span><span class=\"mtk7\">3</span><span class=\"mtk1\">) !== </span><span class=\"mtk8\">&#39;://&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// The best we can do for the rest is make sure that the strings are valid UTF-8</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// and the port is an integer.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (\\</span><span class=\"mtk11\">array_key_exists</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;host&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">) &amp;&amp; !</span><span class=\"mtk10\">StringHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">valid</span><span class=\"mtk1\">((</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;host&#39;</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (\\</span><span class=\"mtk11\">array_key_exists</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;port&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">) &amp;&amp; !\\</span><span class=\"mtk11\">is_int</span><span class=\"mtk1\">((</span><span class=\"mtk4\">int</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;port&#39;</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (\\</span><span class=\"mtk11\">array_key_exists</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;path&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">) &amp;&amp; !</span><span class=\"mtk10\">StringHelper</span><span class=\"mtk1\">::</span><span class=\"mtk11\">valid</span><span class=\"mtk1\">((</span><span class=\"mtk4\">string</span><span class=\"mtk1\">) </span><span class=\"mtk12\">$urlParts</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;path&#39;</span><span class=\"mtk1\">])) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"test-your-joomla-component\" style=\"position:relative;\"><a href=\"#test-your-joomla-component\" aria-label=\"test your joomla component permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test your Joomla component</h2>\n<ol>\n<li>\n<p>install your component in Joomla version 4 to test it: Copy the files in the <code class=\"language-text\">administrator</code> folder into the <code class=\"language-text\">administrator</code> folder of your Joomla 4 installation. A new installation is not necessary. Continue using the ones from the previous part.</p>\n</li>\n<li>\n<p>Open the view of your component in the administration area and create a new item or edit an existing one. Enter a number in the text field for the name.</p>\n</li>\n<li>\n<p>Then edit another field, for example set the access to <code class=\"language-text\">Registered</code>.</p>\n</li>\n<li>\n<p>make sure that you don't get any warning at this time.</p>\n</li>\n<li>\n<p>try to save your input at the end. This is not possible. You will see a warning.</p>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e45e8a68c9aeab66232675dfb847d41/025a1/j4x13x1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQoz52RPQ6CQBCF9/5H0EKDMdGE2GinjTfwDjYiLLAL+yMRPgNKglZC8c3LJDPvTTJiezgThEeW6z2LIGQ2gfkqZLHZE+xOiCq90Pg72BxqB9QTeUJjEdcoI8pKYmVJtUGXDuMqjHuMpEKVHhHnhkRZpLJkhUWZB8r4j/7Le15qh2hLT6JcZz6Z1rBv2guH5lMRvylyGDCCfl9I7b8SkoGO4b3vETepibOCKNVEaYFU7ZNMp2OI87LzeAE9+KKgoEpSwQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Joomla Validation - Server Side Validation\"\n        title=\"Joomla Validation - Server Side Validation\"\n        src=\"/static/8e45e8a68c9aeab66232675dfb847d41/5a190/j4x13x1.png\"\n        srcset=\"/static/8e45e8a68c9aeab66232675dfb847d41/772e8/j4x13x1.png 200w,\n/static/8e45e8a68c9aeab66232675dfb847d41/e17e5/j4x13x1.png 400w,\n/static/8e45e8a68c9aeab66232675dfb847d41/5a190/j4x13x1.png 800w,\n/static/8e45e8a68c9aeab66232675dfb847d41/c1b63/j4x13x1.png 1200w,\n/static/8e45e8a68c9aeab66232675dfb847d41/29007/j4x13x1.png 1600w,\n/static/8e45e8a68c9aeab66232675dfb847d41/025a1/j4x13x1.png 1857w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>Did you notice it? You may see the warning only after you have made a lot of changes in the form and want to save all changes. In this small extension it does not matter. In large forms, the hint at the end can be frustrating. A user may want to see it immediately after the incorrect input. So it is possible to act immediately and avoid unnecessary work. It is also frustrating to have to do all the input again. This is where client-side validation comes into play. We will look at this in the next part.</p>\n</blockquote>\n<img src=\"https://vg08.met.vgwort.de/na/6a564843d8d24485a5e55eaf1366578b\" width=\"1\" height=\"1\" alt=\"\">\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"Your component is user-friendly. User experience (UX) or user experience is on everyone's lips. If a user enters incorrect data, it's…","fields":{"slug":"/en/joomla-serverseiteige-validierung/"},"frontmatter":{"title":"Server Side Validation","date":"2022-07-31","tags":["CMS","Joomla"],"syndication":null,"booklink":"https://astrid-guenther.de/en/buecher/joomla-4-developing-extensions","set":"en/der-weg-zu-joomla4-erweiterungen","description":"desc","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACX0lEQVQ4y61US09TQRRmoQsfWIRS+rBtWqWA1lCBlIeYVltKeTXVghJZGRWUaEJMCFEkujEmxBAfIWg0hLilFOXxCwyRR7e4ghLBhVSCaQNtYh+fuaPTXO69vbroSSZ35pw535zvu2cmCxm2LDpJJpOpLx1Ca7aPO08Bsp2JREJwI13TOHcvr0J2YDcSSflisRhJjMfjZDAWjUZ5oLwK6ebxCR+KjSb03OsV1GjJ74epogqeK1exvf2TB5oCpM46ZzMOSaRQ6wphtTlws6sbgbU1jLx5i4ZmN0wVlVBo9Nh3IBsfp2dSLNJW6PVNouhUKbTHi2CxOWC11+O83Yl8hRo2RyNKjCaodQa0ilXIBW1r74C55hyZM9QlUjkaWtwIhUIYHnmN7FwZNja+kTjNEfzLNNh3/yGh3D/wCFL5MfQPPIblQh2qa63ovttDNAyFwunbhvvHfmxtoarWAplKiydPB4nv8/wCdIUlZEzNzO7RLm0f0grfjY7B7mwitDV6Az7NzeHaja4/Gp4+A9elNgIm1PR7KqQnMhqWV55FOBzG9c5bKDNXI69AhfmFRYyOvcfhHCmCwaC4hpTu4pIfpeVmnCg2Yuj5S7S2dyBXpkSL24MXr4bR6LqIApUWvX0P8EuMMgWsb3LhaL4Sar0BOVIFoeidmETn7TuQ5MmhUOugN5zE/oNH8GFq+t99OPhsiCS6PZfxdX0dkb/XkDmQkWDc64NSo0eZuQargYB4H1JbXv6CnZ1dnrbUVlZW8X1zU/wuC/UUUzU7xiT/92vDTuQCcd8/NrBo22T0xc4U4G85p23Jpoab2QAAAABJRU5ErkJggg==","width":80,"height":80,"src":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png","srcSet":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png 1x"}}}}}},"pageContext":{"slug":"/en/joomla-serverseiteige-validierung/","previous":{"id":"5a918e25-29bb-56aa-8793-fa4e72928f01","frontmatter":{"title":"Serverseitige Validierung","tags":["CMS","Joomla"],"categories":["Joomla"],"template":"post"},"fields":{"slug":"/joomla-serverseiteige-validierung/"}},"next":{"id":"0559bfb5-8ea5-5c73-afc5-aedd9af3f50e","frontmatter":{"title":"Konfiguration","tags":["CMS","Joomla"],"categories":["Joomla"],"template":"post"},"fields":{"slug":"/joomla-konfiguration/"}}}},
    "staticQueryHashes": ["352937542"]}