{"componentChunkName":"component---src-templates-post-js","path":"/maplibre-control-plugin-first-steps/","result":{"data":{"markdownRemark":{"html":"<p>Erstelle dein erstes Leaflet-Control-Plugin - Ein Tutorial für Anfänger.</p>\n<p>In diesem Beitrag erkläre ich, wie du ein Plugin für MapLibre erstellst. Ich zeige, wie ein Control-Plugin, somit ein Steuerelement für deine <a href=\"http://leafletjs.com/\">Maplibre</a> Karte programmiert wird.</p>\n<p>In diesem Text konzentriere ich mich darauf, die Struktur und den Lebenszyklus von Maplibre-Plugins zu erklären. Meine Codebeispiel habe ich auf <a href=\"https://github.com/astridx/maplibre-plugin-boilerplate\">Github</a> veröffentlicht.</p>\n<p>Ich baue auf einem einfachen Quickstart auf:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"html\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!</span><span class=\"mtk7\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk3\">html&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk3\">charset</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;utf-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Quickstart/Schnellstart MapLibre GL Beispiel</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">name</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;viewport&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">content</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk1\"> </span><span class=\"mtk3\">src</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;</span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">link</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">href</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;stylesheet&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">id</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;map&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk1\">=</span><span class=\"mtk11\">&quot;width: 100vw; height: 100vh&quot;</span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk13 mtkb\">var</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk7\">Map</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        container: </span><span class=\"mtk11\">&quot;map&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        style: </span><span class=\"mtk11\">&#39;https://demotiles.maplibre.org/style.json&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        center: [</span><span class=\"mtk6\">7.2</span><span class=\"mtk1\">, </span><span class=\"mtk6\">50.3</span><span class=\"mtk1\">], </span><span class=\"mtk3 mtki\">// Startposition [lng, lat]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        zoom: </span><span class=\"mtk6\">1</span><span class=\"mtk1\">, </span><span class=\"mtk3 mtki\">// Zoom</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2a06e9e95390b84c22398a42416ba78b/37c35/maplibreboilerplate1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB+UlEQVQoz0WSyW/aUBCH+f9VKbfm0nNPvSSXSj00Qg0pS8B4eTY7GAwEMJgdbPz4OoZIlTXy2O97M79Zciq64G7A20JDzNtc5X3FW19x+prZQdPbaewoRkWJsHK2ubONjM1sB/ZQMwg1OXMp4EzhhiPU+nIHBSh1Y6xOwlWe4JBSj05YkSSZ+3hzV4LHt8BNYY3phaJzZnuSgO3xE5PggeHoK13xjXmVYqdFrQRlL8XfJKIW6gOfVvCL0fiR8eiBXvAdd1bhLahjvKeU6tCaX8gZ6ifN9jc6w0dR2seMdljTDTWrSUXNRDlUF3sqbgG78YTj/aDnf8GbFLFXe8xwi+kNKZs9rEAU/m2ZlHrP/AmU9OneGyWlVGYF3sa2tAGKoz6vzjOlRplK9zd5/4VamN7YrP/Gsk0hyGOEotBcHMU58tJdUpycMVcpxiK5gaW+T2H0jlrForZI1R9KMk1+sOR1uJdAwoYJjgipT0/kuy/ksinfpjRIMf0EWwZjS1A3G87Mx/xo4+3B+thiz2Ma4quppt65YK2Ej1IcqaIRHaXksgSUDyUromRV1FrL5PR90lk50R5X/t2YzadlrKyKI+au0//sOhb+RG5xTFnHV7axZnLQt1XIFDqSuStJrOWF9lYzltWZC7s8a3bChqeUppw7kcb8ZFy58w9lUJPWLgdkLQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Eine einfach gehaltene MapLibre Karte\"\n        title=\"Eine einfach gehaltene MapLibre Karte\"\n        src=\"/static/2a06e9e95390b84c22398a42416ba78b/f058b/maplibreboilerplate1.png\"\n        srcset=\"/static/2a06e9e95390b84c22398a42416ba78b/c26ae/maplibreboilerplate1.png 158w,\n/static/2a06e9e95390b84c22398a42416ba78b/6bdcf/maplibreboilerplate1.png 315w,\n/static/2a06e9e95390b84c22398a42416ba78b/f058b/maplibreboilerplate1.png 630w,\n/static/2a06e9e95390b84c22398a42416ba78b/40601/maplibreboilerplate1.png 945w,\n/static/2a06e9e95390b84c22398a42416ba78b/78612/maplibreboilerplate1.png 1260w,\n/static/2a06e9e95390b84c22398a42416ba78b/37c35/maplibreboilerplate1.png 1810w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Was ist ein Steuerelement?</h2>\n<p>Maplibre GL JS beinhalte von Hause aus vier Standardsteuerelementen:</p>\n<ul>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol\">Navigation</a><sup id=\"fnref-maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol\"><a href=\"#fn-maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol\" class=\"footnote-ref\">maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol</a></sup>: Schaltflächen zum Zoomen und Drehen der Karte</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol\">Geolocation</a><sup id=\"fnref-https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol\"><a href=\"#fn-https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol\" class=\"footnote-ref\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol</a></sup>: eine Schaltfläche, um die Position des Benutzers zu ermitteln</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol\">Maßstab</a><sup id=\"fnref-https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol\"><a href=\"#fn-https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol\" class=\"footnote-ref\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol</a></sup>: eine Anzeige für den Pixel-zu-Meter-Maßstab</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol\">Attribution</a><sup id=\"fnref-https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol\"><a href=\"#fn-https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol\" class=\"footnote-ref\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol</a></sup>: eine Anzeige für Copyright- und Vertragsinformationen</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol\">Fullscreen</a><sup id=\"fnref-https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol\"><a href=\"#fn-https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol\" class=\"footnote-ref\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol</a></sup>: Schaltfläche zum Öffnen der Fullscreenansicht</li>\n</ul>\n<p>Dies sind gute Beispiele dafür, was Steuerelemente tun: Sie manipulieren die Karte oder fügen Informationen hinzu.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;!DOCTYPE html&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;html&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;head&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;title&gt;Quickstart/Schnellstart MapLibre GL Beispiel&lt;/title&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;meta</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      name=&quot;viewport&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      content=&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;script src=&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;&gt;&lt;/script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;link</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      href=&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      rel=&quot;stylesheet&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;/head&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;body&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;div id=&quot;map&quot; style=&quot;width: 90vw; height: 90vh&quot;&gt;&lt;/div&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var map = new maplibregl.Map({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        container: &quot;map&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        style: &quot;https://demotiles.maplibre.org/style.json&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        center: [7.2, 50.3], // Startposition [lng, lat]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        zoom: 1, // Zoom</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      });</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(new maplibregl.FullscreenControl());</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        new maplibregl.AttributionControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          customAttribution: &quot;Attributiontext&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        })</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      );</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        new maplibregl.GeolocateControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          positionOptions: {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            enableHighAccuracy: true,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          },</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          trackUserLocation: true,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        })</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      );</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var nav = new maplibregl.NavigationControl();</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(nav, &quot;top-left&quot;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var scale = new maplibregl.ScaleControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        maxWidth: 80,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        unit: &quot;imperial&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      });</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(scale);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      scale.setUnit(&quot;metric&quot;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;/script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;/body&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/html&gt;</span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9e81c6d008527f823d52a9a8585df768/e894c/maplibreboilerplate2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB8ElEQVQoz1WSTW/aQBCG/fcr9V4phyjtqeqlanNJ1aaHJgVCDMHYXoz5rMEOH8Z2CKEYA0/HOIlUS6NdjZ99Z3fm1XrJFrUEZ7mn9ZDHAWcF9uRAO9jjr/c4klNJhh1nBXPkhXvhH+X/4kDHW6NZ8wA7WmILlIPuI5jRnpKdMpc1/1pJSiNeYcbQDCPscPofn69lN6U32qF5/gmD8Qe6wTfU3OV22qZmZZTutrRnGdFmJwUOmEGAmhoMgvd44xO6/jnuzEQPHerukrK+xxplaP7wHSPvLW3/guZ8QOW+g1l7oqFvBEyl+oHqeEXD+k6vf8awd8q994bO+KMUcKnMOhhWhFHdYDopWr1/ys3gXMSKXubXr01MrvtfuQs2x9yvgcFN+5IrU6eqPnM7PKN+H77yRjjjqv+JZjBF032Dn6MJ9WiHneyO/bPjv3LA43o8oBltuOmbVBpfqHkuzYnDpdejOk+xhLfiIoxZgO6P0OwHKLVXlLsissi4CzOasUwvkrz7A30+lGlCRSmMyQolQ6j+WfNbPUn/hJczDQmVgBqJoCOAmslkA7lhnKJyi+RWkMk60h87KaxhL7bFPrfXAixfXrJ45iWvpOgw9kQwSo8eVA/7VzE7OYhI/vytWKUQzHv1In7klwXfeuZzUTda8w+ETpG3skpXbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Eine MapLibre Karte inklusive Standardsteuerelementen\"\n        title=\"Eine MapLibre Karte inklusive Standardsteuerelementen\"\n        src=\"/static/9e81c6d008527f823d52a9a8585df768/f058b/maplibreboilerplate2.png\"\n        srcset=\"/static/9e81c6d008527f823d52a9a8585df768/c26ae/maplibreboilerplate2.png 158w,\n/static/9e81c6d008527f823d52a9a8585df768/6bdcf/maplibreboilerplate2.png 315w,\n/static/9e81c6d008527f823d52a9a8585df768/f058b/maplibreboilerplate2.png 630w,\n/static/9e81c6d008527f823d52a9a8585df768/40601/maplibreboilerplate2.png 945w,\n/static/9e81c6d008527f823d52a9a8585df768/78612/maplibreboilerplate2.png 1260w,\n/static/9e81c6d008527f823d52a9a8585df768/e894c/maplibreboilerplate2.png 1669w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Jedes Steuerlement verfügt über ein HTML-Element, das in der Karte landet, wie eine Schaltfläche oder ein <code class=\"language-text\">div</code>-Element</li>\n<li>Jedes Steuerlement hat Zugriff auf das Maplibre-Map-Objekt, um Informationen zu lesen und zu manipulieren.</li>\n</ul>\n<h2>Die Steuerungs-API</h2>\n<p>Die Steuerungs-API ist als Schnittstelle dokumentiert: [die IControl-Schnittstelle] (<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#icontrol\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#icontrol</a>). Das bedeutet, dass ein Steuerelement ein beliebiges Objekt sein kann, solange es zwei Methoden implementiert:</p>\n<ul>\n<li><code class=\"language-text\">onAdd(map): element</code>: wird aufgerufen, wenn ein Steuerelement zur Map hinzugefügt wird, mit der Map als erstem Argument. Diese Methode sollte ein Element zurückgeben. Das Steuerelement kann einen Verweis auf die Map speichern oder das Map-Objekt verwenden, um Ereignis-Listener zu binden.</li>\n<li><code class=\"language-text\">onRemove()</code>: wird aufgerufen, wenn ein Steuerelement aus der Map entfernt wird, mit der Map als erstem Argument. Dies gibt dem Steuerelement die Möglichkeit, die Bindung von Ereignis-Listenern aufzuheben, falls es in <code class=\"language-text\">onAdd</code> welche gebunden hat.</li>\n<li><code class=\"language-text\">getDefaultPosition()</code>: ist optional und ermöglicht das Festlegen einer Standardposition. Möglich sind <code class=\"language-text\">bottom-left</code>, <code class=\"language-text\">bottom-right</code>, <code class=\"language-text\">top-left</code> und <code class=\"language-text\">top-right</code>.</li>\n</ul>\n<p>Diese Schnittstelle wurde ursprünglich von <a href=\"https://blog.mapbox.com/build-mapbox-gl-js-plugins-74c52f22db63\">MapBox</a> so entworfen, dass Anwender Plugins auf jede beliebige Weise implementieren können.</p>\n<h2>So erstellst du ein Maplibre-Plugin</h2>\n<p>Im nächsten Beispiel zeige ich, wie ein Control-Plugin mit dem Namen <code class=\"language-text\">Foo</code> erstellt wird. Hier zunächst der JavaScript Code als ES6 Klasse.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk13 mtkb\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Foo</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">onAdd</span><span class=\"mtk1\">(map) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;div&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">className</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibregl-ctrl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;Hello, world&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">onRemove</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">parentNode</span><span class=\"mtk1\">.</span><span class=\"mtk7\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">undefined</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">getDefaultPosition</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;bottom-left&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Erstelle jetzt dein Plugin in einer Zeile und fügen es zur Karte hinzu. Im Beispiel würde das wie folgt aussehen:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">addControl</span><span class=\"mtk1\">(</span><span class=\"mtk8\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Foo</span><span class=\"mtk1\">());</span></span></span></code></pre>\n<p>Der HTML Code des vollständige Beispiels sieht am Ende wie folgt aus:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">&lt;!</span><span class=\"mtk7\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk7\">html</span><span class=\"mtk8\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk3\">charset</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;utf-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span><span class=\"mtk1\">Quickstart/Schnellstart MapLibre GL Beispiel</span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">title</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">meta</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">name</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;viewport&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">content</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk1\"> </span><span class=\"mtk3\">src</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;</span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk1\"> </span><span class=\"mtk3\">src</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;foo.js&quot;</span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">link</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">href</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">rel</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;stylesheet&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">head</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk3\">id</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;map&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">style</span><span class=\"mtk8\">=</span><span class=\"mtk11\">&quot;width: 90vw; height: 90vh&quot;</span><span class=\"mtk3\">&gt;&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var map = new maplibregl.Map(</span><span class=\"mtk9\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">container</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;map&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">style</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;https://demotiles.maplibre.org/style.json&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">center</span><span class=\"mtk1\">: [</span><span class=\"mtk6\">7.2</span><span class=\"mtk1\">, </span><span class=\"mtk6\">50.3</span><span class=\"mtk1\">], </span><span class=\"mtk3 mtki\">// Startposition [lng, lat]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">zoom</span><span class=\"mtk1\">: </span><span class=\"mtk6\">1</span><span class=\"mtk1\">, </span><span class=\"mtk3 mtki\">// Zoom</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">}</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(new maplibregl.FullscreenControl());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        new maplibregl.AttributionControl(</span><span class=\"mtk9\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">customAttribution</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;Attributiontext&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        new maplibregl.GeolocateControl(</span><span class=\"mtk9\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">positionOptions</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            enableHighAccuracy: </span><span class=\"mtk5\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk7\">trackUserLocation</span><span class=\"mtk1\">: </span><span class=\"mtk5\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var nav = new maplibregl.NavigationControl();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(nav, &quot;top-left&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var scale = new maplibregl.ScaleControl(</span><span class=\"mtk9\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">maxWidth</span><span class=\"mtk1\">: </span><span class=\"mtk6\">80</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">unit</span><span class=\"mtk1\">: </span><span class=\"mtk11\">&quot;imperial&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk9\">}</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(scale);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      scale.setUnit(&quot;metric&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(new Foo());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">script</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">body</span><span class=\"mtk3\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;/</span><span class=\"mtk7\">html</span><span class=\"mtk3\">&gt;</span></span></span></code></pre>\n<h3>Der Lebenszyklus des MapLibre Controll-Plugins</h3>\n<p>MapLibre ruft die folgende Methode eines Steuerelement-Plugins auf, wenn das Element zu einer Karte hinzugefügt wird.</p>\n<ul>\n<li>onAdd ()</li>\n</ul>\n<p>Ein MapLibre-Plugins ist ein DOM-Element Element - in der Regel ein HTML-Element -, das auf der Karte angezeigt wird. Genauer ausgedrückt: Das Element wird auf einer Schicht oberhalb der eigentlichen Kartenschicht angezeigt. Wichtig: Die onAdd-Methode muss das DOM-Element zurückgeben.</p>\n<p>In der folgenden <code class=\"language-text\">onAdd</code>-Methode erstellen wir ein div-Element. Diesem <code class=\"language-text\">div</code>-Element fügen wir danach die Klasse <code class=\"language-text\">maplibregl-ctrl</code> hinzu. Dies ist wichtig, damit es wie die Standard Steuerelmente behandelt wird. Zusätzlich verwenden wir die Klasse <code class=\"language-text\">maplibregl-ctrl-foo</code>. So formatieren wir das Steuerelement später mit CSS problemlos ganz individuell.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">onAdd</span><span class=\"mtk1\">(</span><span class=\"mtk7\">map</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">map</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk1\">.</span><span class=\"mtk7\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk11\">&quot;div&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">className</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;maplibregl-ctrl maplibregl-ctrl-foo&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">textContent</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;Hello, world&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3 mtki\">// Hier können noch weitere Elemente hinzugefügt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3 mtki\">// Außerdem können Sie hier einem Element Events hinzufügen.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span></code></pre>\n<p>Wenn alles fertig ist, geben Sie das DOM-Element mit return controlElement zurück.</p>\n<p>MapLibre erwartet eine weitere Methode. Diese heißt <code class=\"language-text\">onRemove</code>. <code class=\"language-text\">onRemove</code> wird - wie der Name schon sagt - aufgerufen, wenn das Steuerelement von der <a href=\"https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol\">Karte entfernt</a><sup id=\"fnref-https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol\"><a href=\"#fn-https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol\" class=\"footnote-ref\">https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol</a></sup> wird.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">map</span><span class=\"mtk1\">.</span><span class=\"mtk7\">removeControl</span><span class=\"mtk1\">(</span><span class=\"mtk7\">Steuerelement</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>Die <code class=\"language-text\">onRemove</code>-Methode ist der Ort, an dem aufgeräumt wird. Entferne hier die DOM-Elemente und Ereignis-Listener.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"js\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">onRemove</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk7\">parentNode</span><span class=\"mtk1\">.</span><span class=\"mtk7\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_container</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">this</span><span class=\"mtk1\">.</span><span class=\"mtk7\">_map</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">undefined</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3 mtki\">// Hier können weitere Elemente entfernt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3 mtki\">// Außerdem sollten eventuelle Events entfernt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/60f3349efbde1c8d0d7a01f791175e41/17d12/maplibreboilerplate3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB+UlEQVQoz0WS3Y/SUBDF+++b+G5iVl/UJ19WE33RNTHrrsBSytJPvgrFQhcotMCC2xb6c24x2mTS3Llnzj0zczR/k+Nuobs94anYlHQfwZnLPzoxPZzoSs5Jj9hpIfcKp/Dlf/yuxE3ADg5o1jLCXj9iC0gR93ZgJidu7Yzl+oT63DSjnewkD504xYoXFd5RxIJ3JWqDjH5wRJtMLxiFb+hHVzjxgOZigG7n3Bo5vWVB8nTESkrM2Rx7YePP3hKEL+nPPtNbWOhxn9ZgS00/0hrnaLPgBeHkOb3pJzpCVpt1MfUD7WZOq5+J6pJGuKdtfcX3XzP2XxFNnjEI3+HOHWoLT+5WmI2COzNDMwRUH13SWWZVC6ptPTL5MfyIMX2qctdjk7p3xbWpU3cuaY4vaM0e/uHv45ib0XvuggitGRp8CyOMtRr6EVPmZiUHIR1xEwZyzqkNhfD+A3rg0YlsroI+jTgTvMJKTVKIoJDvgS9L2cCtbOLn8DctITXinI4sxV2r/BeaS182KUN3LO4fdjiygHqw58bdy12BsSpor/Jq882hh9YVG9hiD3MqChNpOy2r8FIBzb1KtSvWsJQi9ZBYxV2JE36JupXgVX16OltvORCF00RsUYgNhGhzDlsI3c2xatdMyopQFVSFm7P/HBV/z+e8PBAf+ANyH5E5X9utKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MapLibre Steuerelement\"\n        title=\"MapLibre Steuerelement\"\n        src=\"/static/60f3349efbde1c8d0d7a01f791175e41/f058b/maplibreboilerplate3.png\"\n        srcset=\"/static/60f3349efbde1c8d0d7a01f791175e41/c26ae/maplibreboilerplate3.png 158w,\n/static/60f3349efbde1c8d0d7a01f791175e41/6bdcf/maplibreboilerplate3.png 315w,\n/static/60f3349efbde1c8d0d7a01f791175e41/f058b/maplibreboilerplate3.png 630w,\n/static/60f3349efbde1c8d0d7a01f791175e41/40601/maplibreboilerplate3.png 945w,\n/static/60f3349efbde1c8d0d7a01f791175e41/78612/maplibreboilerplate3.png 1260w,\n/static/60f3349efbde1c8d0d7a01f791175e41/17d12/maplibreboilerplate3.png 1666w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Styling</h3>\n<p>Gestalte MapLibre Steuerelemente wie jedes andere DOM-Element mit CSS. Hier füge ich der CSS-Klasse leaflet-control-example Stilregeln hinzu. Naja, bisher stehen hier wenige Stile. Sie haben sicher etwas mehr Fantasie. Zur Erinnerung: Das <code class=\"language-text\">div</code>-Element mit den Klassen <code class=\"language-text\">maplibregl-ctrl</code> und <code class=\"language-text\">maplibregl-ctrl-foo</code> haben wir in der onAdd-Methode hinzugefügt.</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"css\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">.maplibregl-ctrl</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">background-color</span><span class=\"mtk1\">: red;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">.maplibregl-ctrl-foo</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">font-size</span><span class=\"mtk1\">:xx-large;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Das nachfolgende Bild zeigt, dass die Klasse <code class=\"language-text\">maplibregl-ctrl</code> auf alle Steuerelemente angewandt wird. Alle haben nun einen roten Hintergrund. Die Klasse <code class=\"language-text\">maplibregl-ctrl-foo</code> wirkt sich lediglich auf unser neu hinzugefügtes Foo-Element aus. Nur der Test ist jetzt extra groß.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/960438d2525e68aec043b75947a350ad/fe60e/maplibreboilerplate4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACAklEQVQozz1S2W7TUBD178MnVKJCIPoCQi0vSBCKREOa1VkcX2+J67i2k7iOnaUNsR3ncOwgrjQPM3NmuWeO5Hz5Di0DjPUR+qaAtjnB2AEiPEEPCnj7gvETBPPqOmee/ha00z88/R3zCWDWZEjCnUFNtlAJ0mgmm43XBRoixTIqUD59naGf7KCwaBRtoEZhhRe0cnhZ17RSTL0Ckrt4D8d7C2teg/Zkohta6LFZQ85gLHMkhyPGyQnKfMmtVdjBB7jeBazgKwz6vciCbG1x3yPuMYcUzC7gu69h+jdQwgmacwOK/IxBJ4VsphUFHf8F/fFPTO1LOPYbzN1XmHhXEEsNzdDAQIkxbGcYkTtp8PAOLfsjhuG++kK5vrzQUbevIfvn2J2joKnXUFd6aIlrdJ1LyMHyP35ICu7sTxj5SzYMhvjx6ENe5ST9SJ4KfvHApjPUvQcoccqBKlqDG/RmOkYLgVt3inaUkuuSjrIm50Ie2r4LSdsA95NnNKw/VdN+lGMUH6HxAPfmLTrkVCempQkM51sIHqE92+O3eEH3iXjWDGliDag8sGQczhIZ+5RFkjJBCZA3bZNDD81KLuVQdZXxB5TJlraiEnhRdUU8ZSMYF8Q4sQNpdPUZg2+/oCx20Er9MVkVEqjEWUVBNYBcqclZpzqbqtuiGl76Jb6sM+M9/gJT94/X/5OSawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MapLibre Steuerelement gestyled\"\n        title=\"MapLibre Steuerelement gestyled\"\n        src=\"/static/960438d2525e68aec043b75947a350ad/f058b/maplibreboilerplate4.png\"\n        srcset=\"/static/960438d2525e68aec043b75947a350ad/c26ae/maplibreboilerplate4.png 158w,\n/static/960438d2525e68aec043b75947a350ad/6bdcf/maplibreboilerplate4.png 315w,\n/static/960438d2525e68aec043b75947a350ad/f058b/maplibreboilerplate4.png 630w,\n/static/960438d2525e68aec043b75947a350ad/40601/maplibreboilerplate4.png 945w,\n/static/960438d2525e68aec043b75947a350ad/78612/maplibreboilerplate4.png 1260w,\n/static/960438d2525e68aec043b75947a350ad/fe60e/maplibreboilerplate4.png 1677w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Fertig</h3>\n<p>Dieses Steuerelement fügt der Karte nur einen kleinen \"Hallo, Welt\"-Text hinzu. Verwende es als <a href=\"https://github.com/astridx/maplibre-plugin-boilerplate\">Ausgangspunkt</a><sup id=\"fnref-https://github.com/astridx/maplibre-plugin-boilerplate\"><a href=\"#fn-https://github.com/astridx/maplibre-plugin-boilerplate\" class=\"footnote-ref\">https://github.com/astridx/maplibre-plugin-boilerplate</a></sup> für deine eigene MapLibre Erweiterung.</p>\n<h3>Lese weiter</h3>\n<p>Auf der <a href=\"https://maplibre.org/maplibre-gl-js-docs/plugins/\">MapLibre Website</a> werden verschiedene Plugins aufgelistet, die von der Leaflet-Community erstellt wurden. Die meisten Plugins sind <a href=\"https://de.wikipedia.org/wiki/Open_Source\">Open Source</a> und sind auf <a href=\"https://github.com/\">GitHub</a> verfügbar. Wer gerne mit Beispielen lernt, findet hier eine Fülle von Möglichkeiten, um das Erstellen eigenes Plugins zu lernen.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .mtki { font-style: italic; }\n  .solarized-light .mtkb { font-weight: bold; }\n  .solarized-light .mtk3 { color: #93A1A1; }\n  .solarized-light .mtk7 { color: #268BD2; }\n  .solarized-light .mtk1 { color: #657B83; }\n  .solarized-light .mtk11 { color: #2AA198; }\n  .solarized-light .mtk13 { color: #073642; }\n  .solarized-light .mtk8 { color: #859900; }\n  .solarized-light .mtk6 { color: #D33682; }\n  .solarized-light .mtk5 { color: #B58900; }\n  .solarized-light .mtk9 { color: #D30102; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/maplibregl/2021-10-30-maplibre-control-plugin-first-steps.md","excerpt":"Erstelle dein erstes Leaflet-Control-Plugin - Ein Tutorial für Anfänger. In diesem Beitrag erkläre ich, wie du ein Plugin für MapLibre…","fields":{"slug":"/maplibre-control-plugin-first-steps/"},"frontmatter":{"title":"Erstelle ein erstes MapLibre-Plugin - Ein Tutorial für Anfänger","date":"30.10.2021","tags":["geografische Daten","Leaflet"],"thumbnail":null}}},"pageContext":{"slug":"/maplibre-control-plugin-first-steps/","previous":{"id":"16da1232-e9a5-59f8-baa2-43bc33c227d9","frontmatter":{"title":"Joomla is the content management system I prefer to work with and Gatsby is the static website generator of my choice","tags":["Agentur","Webdesign","Sicherheit"],"template":"post"},"fields":{"slug":"/joomla-ist-das-cms-mit-dem-ich-am-liebsten-arbeite/"}},"next":null}},"staticQueryHashes":[]}