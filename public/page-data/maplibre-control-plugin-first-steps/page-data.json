{
    "componentChunkName": "component---src-templates-post-js",
    "path": "/maplibre-control-plugin-first-steps/",
    "result": {"data":{"markdownRemark":{"html":"<p>Erstelle dein erstes MapLibre GL-Plugin - Ein Tutorial für Anfänger.</p>\n<p>In diesem Beitrag erkläre ich, wie du ein Plugin für MapLibre erstellst. Ich zeige, wie ein Control-Plugin, somit ein Steuerelement für deine <a href=\"https://maplibre.org/\">Maplibre</a> Karte programmiert wird.</p>\n<p>In diesem Text konzentriere ich mich darauf, die Struktur und den Lebenszyklus von Maplibre-Plugins zu erklären. Meine Codebeispiel habe ich auf <a href=\"https://github.com/astridx/maplibre-plugin-boilerplate\">Github</a> veröffentlicht.</p>\n<p>Ich baue auf einem einfachen Quickstart auf:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"html\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;!</span><span class=\"mtk4\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk12\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">charset</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;utf-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Quickstart/Schnellstart MapLibre GL Beispiel</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;viewport&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk1\"> </span><span class=\"mtk12\">src</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">link</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;stylesheet&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;map&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;width: 100vw; height: 100vh&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">var</span><span class=\"mtk1\"> </span><span class=\"mtk12\">map</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">maplibregl</span><span class=\"mtk1\">.</span><span class=\"mtk10\">Map</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">container:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;map&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">style:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;https://demotiles.maplibre.org/style.json&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">center:</span><span class=\"mtk1\"> [</span><span class=\"mtk7\">7.2</span><span class=\"mtk1\">, </span><span class=\"mtk7\">50.3</span><span class=\"mtk1\">], </span><span class=\"mtk3\">// Startposition [lng, lat]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">zoom:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// Zoom</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<p><img src=\"images/maplibreboilerplate1.PNG\" alt=\"Eine einfach gehaltene MapLibre Karte\"></p>\n<h2 id=\"was-ist-ein-steuerelement\" style=\"position:relative;\"><a href=\"#was-ist-ein-steuerelement\" aria-label=\"was ist ein steuerelement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Was ist ein Steuerelement?</h2>\n<p>Maplibre GL JS beinhalte von Hause aus vier Standardsteuerelementen:</p>\n<ul>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol\">Navigation</a>[^maplibre.org/maplibre-gl-js-docs/api/markers/#navigationcontrol]: Schaltflächen zum Zoomen und Drehen der Karte</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol\">Geolocation</a>[^<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol%5D\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#geolocatecontrol]</a>: eine Schaltfläche, um die Position des Benutzers zu ermitteln</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol\">Maßstab</a>[^<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol%5D\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#scalecontrol]</a>: eine Anzeige für den Pixel-zu-Meter-Maßstab</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol\">Attribution</a>[^<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol%5D\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#attributioncontrol]</a>: eine Anzeige für Copyright- und Vertragsinformationen</li>\n<li><a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol\">Fullscreen</a>[^<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol%5D\">https://maplibre.org/maplibre-gl-js-docs/api/markers/#fullscreencontrol]</a>: Schaltfläche zum Öffnen der Fullscreenansicht</li>\n</ul>\n<p>Dies sind gute Beispiele dafür, was Steuerelemente tun: Sie manipulieren die Karte oder fügen Informationen hinzu.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;!DOCTYPE html&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;html&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;head&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;meta charset=&quot;utf-8&quot; /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;title&gt;Quickstart/Schnellstart MapLibre GL Beispiel&lt;/title&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;meta</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      name=&quot;viewport&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      content=&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;script src=&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;&gt;&lt;/script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;link</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      href=&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      rel=&quot;stylesheet&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    /&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;/head&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;body&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;div id=&quot;map&quot; style=&quot;width: 90vw; height: 90vh&quot;&gt;&lt;/div&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var map = new maplibregl.Map({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        container: &quot;map&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        style: &quot;https://demotiles.maplibre.org/style.json&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        center: [7.2, 50.3], // Startposition [lng, lat]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        zoom: 1, // Zoom</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      });</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(new maplibregl.FullscreenControl());</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        new maplibregl.AttributionControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          customAttribution: &quot;Attributiontext&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        })</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      );</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        new maplibregl.GeolocateControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          positionOptions: {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            enableHighAccuracy: true,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          },</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">          trackUserLocation: true,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        })</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      );</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var nav = new maplibregl.NavigationControl();</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(nav, &quot;top-left&quot;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      var scale = new maplibregl.ScaleControl({</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        maxWidth: 80,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        unit: &quot;imperial&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      });</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      map.addControl(scale);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      scale.setUnit(&quot;metric&quot;);</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &lt;/script&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &lt;/body&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/html&gt;</span></span></code></pre>\n<p><img src=\"images/maplibreboilerplate2.PNG\" alt=\"Eine MapLibre Karte inklusive Standardsteuerelementen\"></p>\n<ul>\n<li>Jedes Steuerlement verfügt über ein HTML-Element, das in der Karte landet, wie eine Schaltfläche oder ein <code class=\"language-text\">div</code>-Element</li>\n<li>Jedes Steuerlement hat Zugriff auf das Maplibre-Map-Objekt, um Informationen zu lesen und zu manipulieren.</li>\n</ul>\n<h2 id=\"die-steuerungs-api\" style=\"position:relative;\"><a href=\"#die-steuerungs-api\" aria-label=\"die steuerungs api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Die Steuerungs-API</h2>\n<p>Die Steuerungs-API ist als Schnittstelle dokumentiert: <a href=\"https://maplibre.org/maplibre-gl-js-docs/api/markers/#icontrol\">die IControl-Schnittstelle</a>. Das bedeutet, dass ein Steuerelement ein beliebiges Objekt sein kann, solange es zwei Methoden implementiert:</p>\n<ul>\n<li><code class=\"language-text\">onAdd(map): element</code>: wird aufgerufen, wenn ein Steuerelement zur Map hinzugefügt wird, mit der Map als erstem Argument. Diese Methode sollte ein Element zurückgeben. Das Steuerelement kann einen Verweis auf die Map speichern oder das Map-Objekt verwenden, um Ereignis-Listener zu binden.</li>\n<li><code class=\"language-text\">onRemove()</code>: wird aufgerufen, wenn ein Steuerelement aus der Map entfernt wird, mit der Map als erstem Argument. Dies gibt dem Steuerelement die Möglichkeit, die Bindung von Ereignis-Listenern aufzuheben, falls es in <code class=\"language-text\">onAdd</code> welche gebunden hat.</li>\n<li><code class=\"language-text\">getDefaultPosition()</code>: ist optional und ermöglicht das Festlegen einer Standardposition. Möglich sind <code class=\"language-text\">bottom-left</code>, <code class=\"language-text\">bottom-right</code>, <code class=\"language-text\">top-left</code> und <code class=\"language-text\">top-right</code>.</li>\n</ul>\n<p>Diese Schnittstelle wurde ursprünglich von <a href=\"https://blog.mapbox.com/build-mapbox-gl-js-plugins-74c52f22db63\">MapBox</a> so entworfen, dass Anwender Plugins auf jede beliebige Weise implementieren können.</p>\n<h2 id=\"so-erstellst-du-ein-maplibre-plugin\" style=\"position:relative;\"><a href=\"#so-erstellst-du-ein-maplibre-plugin\" aria-label=\"so erstellst du ein maplibre plugin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>So erstellst du ein Maplibre-Plugin</h2>\n<p>Im nächsten Beispiel zeige ich, wie ein Control-Plugin mit dem Namen <code class=\"language-text\">Foo</code> erstellt wird. Hier zunächst der JavaScript Code als ES6 Klasse.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Foo</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">onAdd</span><span class=\"mtk1\">(</span><span class=\"mtk12\">map</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_map</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">map</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;div&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">className</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;maplibregl-ctrl&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">textContent</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;Hello, world&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">onRemove</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">parentNode</span><span class=\"mtk1\">.</span><span class=\"mtk11\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_map</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getDefaultPosition</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;bottom-left&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Erstelle jetzt dein Plugin in einer Zeile und fügen es zur Karte hinzu. Im Beispiel würde das wie folgt aussehen:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">map</span><span class=\"mtk1\">.</span><span class=\"mtk11\">addControl</span><span class=\"mtk1\">(</span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Foo</span><span class=\"mtk1\">())</span></span></span></code></pre>\n<p>Der HTML Code des vollständige Beispiels sieht am Ende wie folgt aus:</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;!</span><span class=\"mtk12\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk12\">html</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">charset</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;utf-8&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">Quickstart/Schnellstart MapLibre GL Beispiel</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;viewport&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;initial-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk1\"> </span><span class=\"mtk12\">src</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.js&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk1\"> </span><span class=\"mtk12\">src</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;foo.js&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">link</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">href</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">rel</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;stylesheet&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;map&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;width: 90vw; height: 90vh&quot;</span><span class=\"mtk17\">&gt;&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var map = new maplibregl.Map(</span><span class=\"mtk4\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">container</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;map&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">style</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;https://demotiles.maplibre.org/style.json&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">center</span><span class=\"mtk1\">: [</span><span class=\"mtk7\">7.2</span><span class=\"mtk1\">, </span><span class=\"mtk7\">50.3</span><span class=\"mtk1\">], </span><span class=\"mtk3\">// Startposition [lng, lat]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">zoom</span><span class=\"mtk1\">: </span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// Zoom</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">}</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(new maplibregl.FullscreenControl());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        new maplibregl.AttributionControl(</span><span class=\"mtk4\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">customAttribution</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;Attributiontext&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        new maplibregl.GeolocateControl(</span><span class=\"mtk4\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">positionOptions</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">enableHighAccuracy:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">trackUserLocation</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var nav = new maplibregl.NavigationControl();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(nav, &quot;top-left&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      var scale = new maplibregl.ScaleControl(</span><span class=\"mtk4\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">maxWidth</span><span class=\"mtk1\">: </span><span class=\"mtk7\">80</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">unit</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;imperial&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">}</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(scale);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      scale.setUnit(&quot;metric&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      map.addControl(new Foo());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">script</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">body</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">html</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<h3 id=\"der-lebenszyklus-des-maplibre-controll-plugins\" style=\"position:relative;\"><a href=\"#der-lebenszyklus-des-maplibre-controll-plugins\" aria-label=\"der lebenszyklus des maplibre controll plugins permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Der Lebenszyklus des MapLibre Controll-Plugins</h3>\n<p>MapLibre ruft die folgende Methode eines Steuerelement-Plugins auf, wenn das Element zu einer Karte hinzugefügt wird.</p>\n<ul>\n<li>onAdd ()</li>\n</ul>\n<p>Ein MapLibre-Plugins ist ein DOM-Element Element - in der Regel ein HTML-Element -, das auf der Karte angezeigt wird. Genauer ausgedrückt: Das Element wird auf einer Schicht oberhalb der eigentlichen Kartenschicht angezeigt. Wichtig: Die onAdd-Methode muss das DOM-Element zurückgeben.</p>\n<p>In der folgenden <code class=\"language-text\">onAdd</code>-Methode erstellen wir ein div-Element. Diesem <code class=\"language-text\">div</code>-Element fügen wir danach die Klasse <code class=\"language-text\">maplibregl-ctrl</code> hinzu. Dies ist wichtig, damit es wie die Standard Steuerelmente behandelt wird. Zusätzlich verwenden wir die Klasse <code class=\"language-text\">maplibregl-ctrl-foo</code>. So formatieren wir das Steuerelement später mit CSS problemlos ganz individuell.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">onAdd</span><span class=\"mtk1\">(</span><span class=\"mtk12\">map</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_map</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">map</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">document</span><span class=\"mtk1\">.</span><span class=\"mtk11\">createElement</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;div&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">className</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;maplibregl-ctrl maplibregl-ctrl-foo&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">textContent</span><span class=\"mtk1\"> = </span><span class=\"mtk8\">&quot;Hello, world&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Hier können noch weitere Elemente hinzugefügt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Außerdem können Sie hier einem Element Events hinzufügen.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span></code></pre>\n<p>Wenn alles fertig ist, geben Sie das DOM-Element mit return controlElement zurück.</p>\n<p>MapLibre erwartet eine weitere Methode. Diese heißt <code class=\"language-text\">onRemove</code>. <code class=\"language-text\">onRemove</code> wird - wie der Name schon sagt - aufgerufen, wenn das Steuerelement von der <a href=\"https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol\">Karte entfernt</a>[^<a href=\"https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol%5D\">https://maplibre.org/maplibre-gl-js-docs/api/map/#map#removecontrol]</a> wird.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">map</span><span class=\"mtk1\">.</span><span class=\"mtk11\">removeControl</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Steuerelement</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>Die <code class=\"language-text\">onRemove</code>-Methode ist der Ort, an dem aufgeräumt wird. Entferne hier die DOM-Elemente und Ereignis-Listener.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">onRemove</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">.</span><span class=\"mtk12\">parentNode</span><span class=\"mtk1\">.</span><span class=\"mtk11\">removeChild</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_container</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">_map</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">undefined</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Hier können weitere Elemente entfernt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// Außerdem sollten eventuelle Events entfernt werden.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">…</span></span></span></code></pre>\n<p><img src=\"images/maplibreboilerplate3.PNG\" alt=\"MapLibre Steuerelement\"></p>\n<h3 id=\"styling\" style=\"position:relative;\"><a href=\"#styling\" aria-label=\"styling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Styling</h3>\n<p>Gestalte MapLibre Steuerelemente wie jedes andere DOM-Element mit CSS. Hier füge ich der CSS-Klasse leaflet-control-example Stilregeln hinzu. Naja, bisher stehen hier wenige Stile. Sie haben sicher etwas mehr Fantasie. Zur Erinnerung: Das <code class=\"language-text\">div</code>-Element mit den Klassen <code class=\"language-text\">maplibregl-ctrl</code> und <code class=\"language-text\">maplibregl-ctrl-foo</code> haben wir in der onAdd-Methode hinzugefügt.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"css\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">.maplibregl-ctrl</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">background-color</span><span class=\"mtk1\">: </span><span class=\"mtk8\">red</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">.maplibregl-ctrl-foo</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">font-size</span><span class=\"mtk1\">: </span><span class=\"mtk8\">xx-large</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Das nachfolgende Bild zeigt, dass die Klasse <code class=\"language-text\">maplibregl-ctrl</code> auf alle Steuerelemente angewandt wird. Alle haben nun einen roten Hintergrund. Die Klasse <code class=\"language-text\">maplibregl-ctrl-foo</code> wirkt sich lediglich auf unser neu hinzugefügtes Foo-Element aus. Nur der Test ist jetzt extra groß.</p>\n<p><img src=\"images/maplibreboilerplate4.PNG\" alt=\"MapLibre Steuerelement gestyled\"></p>\n<h3 id=\"fertig\" style=\"position:relative;\"><a href=\"#fertig\" aria-label=\"fertig permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fertig</h3>\n<p>Dieses Steuerelement fügt der Karte nur einen kleinen \"Hallo, Welt\"-Text hinzu. Verwende es als <a href=\"https://github.com/astridx/maplibre-plugin-boilerplate\">Ausgangspunkt</a>[^<a href=\"https://github.com/astridx/maplibre-plugin-boilerplate%5D\">https://github.com/astridx/maplibre-plugin-boilerplate]</a> für deine eigene MapLibre Erweiterung.</p>\n<h3 id=\"lese-weiter\" style=\"position:relative;\"><a href=\"#lese-weiter\" aria-label=\"lese weiter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lese weiter</h3>\n<p>Auf der <a href=\"https://maplibre.org/maplibre-gl-js-docs/plugins/\">MapLibre Website</a> werden verschiedene Plugins aufgelistet, die von der Leaflet-Community erstellt wurden. Die meisten Plugins sind <a href=\"https://de.wikipedia.org/wiki/Open_Source\">Open Source</a> und sind auf <a href=\"https://github.com/\">GitHub</a> verfügbar. Wer gerne mit Beispielen lernt, findet hier eine Fülle von Möglichkeiten, um das Erstellen eigenes Plugins zu lernen.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk6 { color: #D7BA7D; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","excerpt":"Erstelle dein erstes MapLibre GL-Plugin - Ein Tutorial für Anfänger. In diesem Beitrag erkläre ich, wie du ein Plugin für MapLibre erstellst…","fields":{"slug":"/maplibre-control-plugin-first-steps/"},"frontmatter":{"title":"Erstelle ein erstes MapLibre-Plugin - Ein Tutorial für Anfänger","date":"2021-10-30","tags":["geografische Daten","Leaflet"],"description":"desc","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKUlEQVQ4y3VUy0sqURj3z2ihC9853ktQrSJ6QJtWQSjNqM0EdRF6SUW0aFERrryX66LSgqiscRxnNNIszB5OqRWZSyGiGrBVBdEbzZzLOCbT4x7O4vCd8/t+v/PxfT8B875yuRzDMA/PaQ913m2N1PX61AipRsg6k6/bGvFQ5w/P6eIzbgn4SH+UbuhfFWmdIq1ToceVBnYr9DgXaehf9cdoPr4AfsvlzI6ESOsUgy41QioMLhmEccwyCFMY2KAYdIm0TrMj8VYEc4fxheOS5iUAJgCEkEJYVc96p/10jLwZI2867adVPetSCAMQAoCJkual8YXjPH+e2R+lRRpUBbN3MgirH9i0Bp/nDxg79WqnXucPmL/B5/qBTRmEATChggmhBvVFWf2Cp5dMQ/+qGGQTl7a6VbB7jLye22eGFi9r+kI1faGhxcu5fWaMvFbB7tJWN4AQYhBr6F99eskIvNSZUIOqETalDMKqTcGpnVfrxkuF0S9uQcUtaIXRb914mdp5rTYFZRCmggk1wpJ7qHNBlzXCB9f2hWzhrCVwr4JZIXkthCVwbwtna/tCfHCXNSKoM/lkOpyTpNDjZe3LlsDDzF5Oaz6SQpgUwrTmo5m9nCXwUNa+rNDj3NdkOrzO5BOokQIDRyIBncapk9kYM7GZHnSkBh2pic30bIwxTp1IQGdRTmmrW40Qn8FynavS6P+z9minstO7b9O7b3Yq+3vtsdLol+tcn8F82e/kaOPwrj2cndzOTG5nbOFs4/CuBER5VXiXXSxYMSUAE1IQbRrdt4WztnC2aXRfCqLAR85CwTzU+Sew0uBWtrrlOmfTSKxpJCrXOZX54CewlzrjNUk+t9LAtoGHuoifXG/FU1vxVPzk2kNdAAjB4QGY1yQMw/iitDDfnirYLdfj5R3eu6fMSoQedyTGHYmVCH33lCnv8Mr1bGlUMCHSoH6uPT8MRl68GiFC8cskfXuYvDpMXiXp21D8krsCkC+DwR9JCeQCYOJnG1n+y1vcP9pIACYk0JeR/GAGsYIZCDWoFHIpDLjCgEshl1CDFswg+p0ZfGNDpncb6v2vDf0DP3S/D7fd8goAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png","srcSet":"/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png 1x"}}}}}},"pageContext":{"slug":"/maplibre-control-plugin-first-steps/","previous":{"id":"16da1232-e9a5-59f8-baa2-43bc33c227d9","frontmatter":{"title":"Joomla is the content management system I prefer to work with and Gatsby is the static website generator of my choice","tags":["Agentur","Webdesign","Sicherheit"],"categories":["Webdesign"],"template":"post"},"fields":{"slug":"/joomla-ist-das-cms-mit-dem-ich-am-liebsten-arbeite/"}},"next":{"id":"eb3d36cb-dbfc-59f5-b0b3-eb6f2ae79ceb","frontmatter":{"title":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","Gatsby"],"categories":["MaplibreGL"],"template":"post"},"fields":{"slug":"/maplibre-blog-with-gatsby/"}}}},
    "staticQueryHashes": ["352937542"]}