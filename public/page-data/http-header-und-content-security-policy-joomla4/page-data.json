{"componentChunkName":"component---src-templates-post-js","path":"/http-header-und-content-security-policy-joomla4/","result":{"data":{"markdownRemark":{"html":"<p>Die Aufgabe eines Browsers erscheint auf den ersten Blick simpel: er zeigt Text und Bilder an, die man ihm übermittelt. Bei genauerem Hinsehen wird alles komplexer. Web-Standards sind zu unterstützen, Benutzerfreundlichkeit steht hoch im Kurs und Entwickler benötigen Werkzeuge. Hinzu kommt, dass das Web ist ein tückischer Ort ist. Webseiten werden ständig automatisiert angegriffen. Zum Schutz vor verschieden Angriffsvektoren, haben Software Hersteller HTTP Header implementiert, über welche die Webseite im Webbrowser Sicherheitsfunktionen aktiviert und so Angriffsmuster blockiert oder erschwert.</p>\n<h1>Wie macht man die Header sichbar</h1>\n<p>HTTP Header werden oft mit dem <code class=\"language-text\">&lt;head></code>-Bereich eines HTML-Dokuments verwechselt. HTTP-Header wird man neben den HTML-Header nicht finden! Die stecken im HTTP-Protokoll. Dieses bildet die Basis des World-Wide-Webs. HTTP ist die Sprache, mit der Browser und Webserver kommunizieren. Zusammen mit den sichtbaren Inhalten werden Informationen zu den Daten übermittelt. Diese sind im Kopf-Bereich der Antwort – im Head der Response. Deshalb der Name Header. Um diese anzusehen öffnet man den Netzwerk-Tab der Browser-Entwicklertools.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ddfa38d86d8ef6cb1f4f6280c11a5198/913b9/header0e.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.835443037974684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoklEQVQoz52SS2/TQBSF/cdhURSVqKQVoKgbxKJIKQ+BUHkkdmwnCP5AI2j8yoIqLFDt2PE7TpyP8UREFWwQV/p07z1z5sxmlDvtM+62n3HQ6XF8+prukwtOn76n1Tnn3lGP1oNzDjvPud95Qfv4JUcnryQHrTMO2z1OHr7h0eO3dLsXgnco3Kr5/Jq6XvMvlWap8FZ/6Qr/WdEyJsty6u0fgTNvhuu6NN3zPDnvu+vhOI7Etmwsy8K2d30ymTCdTrm8nPD12xWO7cgzRdN0dN1kPP6Ean5hYHxmNBpjGCOGuoGqDdEEqjrkw8c+2lCXZwNVF7PJUOw7DPr9AYpuJWjTjP5VxkBg2hmGQLNyTHeF6VUYbslIMPZKqetOyXe/JE4yVquKzaaWPcsylCgMCQW+77NYBJIg8ImikDzPKYqCNE2luSzLXS9yorRk/jPk5sYXYSvW67UI3qAEQSADG6Iootmb8Ga/HZjnhQxs5kLoSV7hhzHhYiH1fWAcx9L0+5UkSVgul3utoblQlKsd4oFKaIu4YPYjkL7tdiu+UC29vwDAh4zFu6ZuDwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTTP Header im Firefox sichtbar gemacht\"\n        title=\"HTTP Header im Firefox sichtbar gemacht\"\n        src=\"/static/ddfa38d86d8ef6cb1f4f6280c11a5198/f058b/header0e.png\"\n        srcset=\"/static/ddfa38d86d8ef6cb1f4f6280c11a5198/c26ae/header0e.png 158w,\n/static/ddfa38d86d8ef6cb1f4f6280c11a5198/6bdcf/header0e.png 315w,\n/static/ddfa38d86d8ef6cb1f4f6280c11a5198/f058b/header0e.png 630w,\n/static/ddfa38d86d8ef6cb1f4f6280c11a5198/40601/header0e.png 945w,\n/static/ddfa38d86d8ef6cb1f4f6280c11a5198/78612/header0e.png 1260w,\n/static/ddfa38d86d8ef6cb1f4f6280c11a5198/913b9/header0e.png 1822w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Mit dem Tool <a href=\"Security%20Headers%20von%20Scott%20Helme\">Security Headers von Scott Helme</a> ist es möglich, die HTTP-Header und deren Konfiguration zu überprüfen. Der Service liest dazu alle gesetzten Werte aus, bewertet sie und bildet daraus ein Rating. Ein Report sieht beispielsweise so aus:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a931fb9e29ce16bc22fba08cc9e03321/191e2/header1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVQoz22QS08TYRSGBzVG1+5YGJdAQcVojNE1OzcmGuNP8B+4NS5cCS2NiS40ISrRhSvwQpDSEgVSlY0xBWxrL5QWykxn2k6ZzuXxzJQSRb7kyfnOmXPeeb+jhMIKA2MKF6InGXl+hhsvz3H1ySn6RpV/6JeeoWgPfv/ZyDHOjx8PGIocDWpdFF+sKxoK9wRNg+EjDEdPcOvVJW5PXubO6yvcfHGRa2O9QZ9P/x4DB1C6HwNR/y8RcST5yLPTPF18wERylMmVCKOz9xi+20tI3A5Jz2C4E7tm9gWTxXm+bsRZyM4RX19mNpVg6sd7Pq59Yir1junVD0z/lJiSWnqWmfW5v4jxJSfzxTi+jo/C3mnbEFkYY2Z1Aa0OWwbUdwUTDA8k0JS8YXVotqHW4r+jOK4dXLSWwfWJPsaX7lNvwrbeZGVzjYexR8TePubz/BsShW/Es8skckli2SXyNZW24+J6Do7bQfE8LxA0LZdsVaWkm5R1i626TV4z+F5M8yudJp3Lk1VrZHY0fmuaiGlsGrtYdme+q7MvaLRsMmWTgmpTqnsUdUcGoCpupRxQkVVUGrBRg7WKR0l20Wq7hwualk1F3NVaDmrTpioLrNatThQnO7I4zXTQd12KapvF1Qaq5P6TDxXUTZtUySCz3aKgu/Kkw3BkDY64dyk3vOBuHnD4B3UjelAirYmkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Security Headers von Scott Helme\"\n        title=\"Security Headers von Scott Helme\"\n        src=\"/static/a931fb9e29ce16bc22fba08cc9e03321/f058b/header1.png\"\n        srcset=\"/static/a931fb9e29ce16bc22fba08cc9e03321/c26ae/header1.png 158w,\n/static/a931fb9e29ce16bc22fba08cc9e03321/6bdcf/header1.png 315w,\n/static/a931fb9e29ce16bc22fba08cc9e03321/f058b/header1.png 630w,\n/static/a931fb9e29ce16bc22fba08cc9e03321/40601/header1.png 945w,\n/static/a931fb9e29ce16bc22fba08cc9e03321/78612/header1.png 1260w,\n/static/a931fb9e29ce16bc22fba08cc9e03321/191e2/header1.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>Was bietet Joomla 4</h1>\n<p>Joomla 4 unterstützt Benutzer mit dem Plugin <a href=\"https://docs.joomla.org/J4.x:Http_Header_Management/de#Plugin\">System - HTTP Headers</a> eine sichere <a href=\"https://wiki.selfhtml.org/wiki/Sicherheit/Content_Security_Policy\">Content Security Policy</a> zu konfigurieren.</p>\n<blockquote>\n<p>Ursprünglich sollte es zusätzlich eine Komponente geben. Über diese wären Content-Security-Policy-Reports verwaltbar gewesen. Mit dem PR <a href=\"https://github.com/joomla/joomla-cms/pull/33550\">github.com/joomla/joomla-cms/pull/33550</a> wurde diese entfert. Im Kapitel Content-Security-Policy beschreibe ich eine Möglichkeit, die Reports per E-Mail zu erhalten.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b7fafa42a8115c4283afe6a0c0f26a2/191e2/header0p.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQoz5VSCU7DMBD080AgVPGACgQ8gvuR0AcAlaBH0tSOvb6HtVtQVQmFrjTaTLSeGW8iRjfPGF0/4Zz76eUDjsa3OB7f/Rtl/uTiHkXn7OoRYtn1WKwU2k5DKgK5AGMDaAdm73mfk4tQ2kL2BNFJg3at0RuPEDOcj4w0iGJsGT/z5Dw0BYi39ynmiyWaVQNrLTaVBwBOR5BawgdX+evHC2Zdwwm1R+KZVrVYyTViiEgpDYLYXBtCzrlyUzj5zQ4Nueq4lhJEFiGEP4VyFfNVTKkezrkqGkKq+xSq18gRmEwnHHle4w8nzDAsuFg20FozDHMGG4minnPiXXjEGH9RDu7y+m7by5ki+Pk145QKkm/Wcy/JRf0EGQeX57WU6xaDsDUqv9FWMB+EUvvpYwz1yt/6m+zTF0VnhQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Joomla 4 Plugin System - HTTP Headers\"\n        title=\"Joomla 4 Plugin System - HTTP Headers\"\n        src=\"/static/6b7fafa42a8115c4283afe6a0c0f26a2/f058b/header0p.png\"\n        srcset=\"/static/6b7fafa42a8115c4283afe6a0c0f26a2/c26ae/header0p.png 158w,\n/static/6b7fafa42a8115c4283afe6a0c0f26a2/6bdcf/header0p.png 315w,\n/static/6b7fafa42a8115c4283afe6a0c0f26a2/f058b/header0p.png 630w,\n/static/6b7fafa42a8115c4283afe6a0c0f26a2/40601/header0p.png 945w,\n/static/6b7fafa42a8115c4283afe6a0c0f26a2/78612/header0p.png 1260w,\n/static/6b7fafa42a8115c4283afe6a0c0f26a2/191e2/header0p.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ich beschreibe die wichtigsten HTTP Header und die Konfiguration in Joomla 4.</p>\n<blockquote>\n<p>Vorweg: Wer seine Website unter <code class=\"language-text\">localhost</code> testet, wird feststellen, dass nicht alle hier beschriebenen Funktionen lokal testbar sind.</p>\n</blockquote>\n<h1>HTTP Security Header im Detail</h1>\n<p>Die folgenden Security Header sind <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers\">HTTP Response Header</a>, welche der Webserver mit den Daten der Webseite an den Webbrowser übergibt. Daraufhin aktiviert der Browser Sicherheitsfunktionen.</p>\n<h2>Heausgehobene HTTP Header im Joomla 4 Plugins HTTP Header</h2>\n<p>Im Joomla Plugin werden die drei Header <em>X-Frame-Options</em>, <em>Referrer-Policy</em> und <em>Cross-Origin-Opener-Policy</em> im oberen Bereich angezeigt und der Header <em>Strict-Transport-Security</em> ist in einem eigenen Tabulator konfigurierbar.</p>\n<h3>X-Frame-Options</h3>\n<p>Der <a href=\"https://developer.mozilla.org/de/docs/Web/HTTP/Headers/X-Frame-Options\">X-Frame-Options</a> Header verhindert <a href=\"https://de.wikipedia.org/wiki/Clickjacking\">Clickjacking</a>. Diese Technik lädt eine fremde Website über ein <em>iframe</em>-Tag in die eigene. Ziel ist es, einen Benutzer dazu zu bringen, sensible Daten preiszugeben – zum Beispiel Logindaten. Sobald eine Site versucht, eine andere als <em>iframe</em> zu laden, überprüft der Browser die einzubettende Website. Wenn diese den <em>X-Frame-Options Header</em> setzt, wird die Seite nicht geladen.</p>\n<p>Der Header bietet drei mögliche Richtlinien: <code class=\"language-text\">DENY</code>, <code class=\"language-text\">SAMEORIGIN</code>, und <code class=\"language-text\">ALLOW-FROM</code>.</p>\n<p>In Joomla 4 ist der Header auf unterschiedliche Arten setzbar. Zum einen gibt es eine eigene Option <code class=\"language-text\">X-Frame-Options</code>. Wenn die aktiviert ist, setzt das Plugin den Header mit der Richtlinie <code class=\"language-text\">SAMEORIGIN</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6c6a4798477500b51d468972566e40ea/191e2/header2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz41Sy0rEQBDM14kiyHoWFkH9BlFRv0rxsCdPggcPevSyrET3kZjM+5WUPZPdxde6DhQzTbqrq7qT7R5dond4gR7d2/tn2Ng7xmb/BFv9038h5sa6WL9zcI5sVglM3xkmBUPNZILSDtp4KMLne/H+HmsbwKUBExpZxRRKgtAePgDON7BuPbT1MERkXZjHDpI4suHoBZM8RzkdU4JFd9o1AKnTqAWD9V3N0+gR46oghcKiJalFPUVZVfAks2matdDGoKrZMlYUSxpVmqE0luySleBg6YP3PiWF8JV8EWtD9pQGYwKWXLVtSzVNmmfGhUiSBw9XGNxcQ7kYdQQxcRUUEc6KElLKBKUUEZLCxUyG+TPub+/ADRC8SwVR0W9wtAguJPLXN3DOSSmDoDsqz2K3SEp5pKtbCBOKinxSsmqGlrYa7cYGft4o/kZLhcli01FKZWjjDn+dn8p9svwB/eTqHl+ozCcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        title=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        src=\"/static/6c6a4798477500b51d468972566e40ea/f058b/header2.png\"\n        srcset=\"/static/6c6a4798477500b51d468972566e40ea/c26ae/header2.png 158w,\n/static/6c6a4798477500b51d468972566e40ea/6bdcf/header2.png 315w,\n/static/6c6a4798477500b51d468972566e40ea/f058b/header2.png 630w,\n/static/6c6a4798477500b51d468972566e40ea/40601/header2.png 945w,\n/static/6c6a4798477500b51d468972566e40ea/78612/header2.png 1260w,\n/static/6c6a4798477500b51d468972566e40ea/191e2/header2.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Wird <code class=\"language-text\">ALLOW-FROM</code> oder <code class=\"language-text\">DENY</code> benötigt, ist dies im Plugin konfigurierbar:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a249105a7489dabea6f0462fac3baf05/191e2/header3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhklEQVQoz42S20odQRBF5+tCJCD6LEgg5htCFPWfDL6dPPkkkif9gaiIZ87c+n6d2dk9Hi+YwEnDonsX1TVVu6fa/XqKnYMT7HD/9PkIH/a+4eP+d2ztH/4XJbfcK/e3vxyjagaNVa9QtxJCmhnrIpxPsOTt/nx+r13IUMZDaodqkBadMNA2ImUgphEhbsaFBM9CIea1jjAuofp9e4961aDtW3jv8bSmDYDdOQgtEVKY9c3dNZZDyw5NxMicVjbohh6JbY7juBHHjw9CvWhLbWhV1fSah8BxOUpOCMHzzKLThMzE95R4GddYBykV8wMmxlIaZz8rpc08xeLqDIvzH7CWIkdMMYFZM9Nb1nFrLZq2gzFmpmjr2eFsQJ5we32JXz8voHuLKHrI1QpeDIhSICr5hJRI3H3XQdU1HpY1FGOSaKVoAwuWdlHGExqjc4A16B5riHoJ07YILFqKvKKQGPNC8HUTMm0qFmVSfqOqFCtrZGCKkd1mGGUQHF+cnhX9L/JfpHnkP1a350xNsB0DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        title=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        src=\"/static/a249105a7489dabea6f0462fac3baf05/f058b/header3.png\"\n        srcset=\"/static/a249105a7489dabea6f0462fac3baf05/c26ae/header3.png 158w,\n/static/a249105a7489dabea6f0462fac3baf05/6bdcf/header3.png 315w,\n/static/a249105a7489dabea6f0462fac3baf05/f058b/header3.png 630w,\n/static/a249105a7489dabea6f0462fac3baf05/40601/header3.png 945w,\n/static/a249105a7489dabea6f0462fac3baf05/78612/header3.png 1260w,\n/static/a249105a7489dabea6f0462fac3baf05/191e2/header3.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Zusätzlich ist das <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Apache_Configuration_htaccess#frame_options\">Setzten</a> des Headers per <code class=\"language-text\">.htaccess</code>-Datei möglich:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Header always set X-Frame-Options &quot;DENY&quot; &quot;expr=%{CONTENT_TYPE} =~ m#text/html#i&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<p>Achtung: Wenn du die Option im oberen Bereich aktiviert hast, wird immer <code class=\"language-text\">SAMEORIGIN</code> gesetzt. Wenn du die <code class=\"language-text\">ALLOW-FROM</code> oder <code class=\"language-text\">DENY</code> im unteren Bereich manuell konfigurierst, dann ist erforderlich, die Option im oberen Bereich zu deaktivieren.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82b640675684a2075c3370973bf59a8e/191e2/header5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVQoz32SS0/bQBzE8/2/CZV64oB651CQOEUV4gClQEsc2djrfT+H2XWMKC9Lv2R3o53MzN8bIQ0GoTBMClpbKGUQQkJM+UtSKo117XyCsR6bYZKoSO2QAUR+xILlYvxc0PrQWPfa0UwV/Ht9g/FxB7HfwU0jYC0wi+W7PeV/SmmnzjtMSsBH3/bb+y26aaDDuw6ZkfuHG+xvf8N1eyQhkGNcyPkdMSVY5yGlfjkLkZFdxGYWEkYbeO8ZNyLxn2vkLCXXHomOEi+s1MvWRxjjIGYJ59wiGOIiKJRqlk/Ov+P42xF74CY4pCfGp5PP0MagH544SN0wFRewORSF7voSv07PYEY6Y5e275Hn+T10HlmLorvHXcfYEjPPlZKsgYKt6hg4hLhqY7ac3mEM+QMK3Xhj4UOg2fSCrZFLyU3kz9UFzo9/QPSK7gYYglrHWyhWxhGpitVeD2L5reC/7hbbnxfshj96C80onq9OG8wrMnHWtUkXDmyl5vEh4xmhOQmzamBGZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        title=\"X-Frame-Option in der Joomla 4 Content Security Policy\"\n        src=\"/static/82b640675684a2075c3370973bf59a8e/f058b/header5.png\"\n        srcset=\"/static/82b640675684a2075c3370973bf59a8e/c26ae/header5.png 158w,\n/static/82b640675684a2075c3370973bf59a8e/6bdcf/header5.png 315w,\n/static/82b640675684a2075c3370973bf59a8e/f058b/header5.png 630w,\n/static/82b640675684a2075c3370973bf59a8e/40601/header5.png 945w,\n/static/82b640675684a2075c3370973bf59a8e/78612/header5.png 1260w,\n/static/82b640675684a2075c3370973bf59a8e/191e2/header5.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Referrer-Policy</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\">Referrer-Policy</a> weißt den Browser an, den Referer zu entfernen und nicht an die nachfolgende Site zu übermitteln.</p>\n<blockquote>\n<p>Der <a href=\"https://de.wikipedia.org/wiki/Referrer\">Referer Anfrage-Header</a> beinhaltet die Adresse von der vorher besuchten Webseite, welche einen Link zur aktuell angefragten Seite beinhaltet. Der Referer-Header erlaubt es Servern zu sehen, von wo die Personen sie Besuchen und diese Daten zum Beispiel zur Analyse, zum Logging oder zum Caching zu benutzen.</p>\n</blockquote>\n<p>Im Joomla Plugin sind alle möglichen Optionen in einem Dropdown ausgewählbar. Die Standardeinstellung im Plugin sieht die Option <code class=\"language-text\">no-referrer-when-downgrade</code> vor.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dff0d06d1dd0f5a923e567ae796c5915/191e2/header4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABbklEQVQoz31Ry04CQRDc//8MPRIvXjz4CR48aULEEISosLCPee28y+6BDYhIJZWZ2fRWV1dXnZTopYBUGtZamGFAyhkZuMqYEkL0xIBM9ZuuhtQK1Xq5gpSK2GMwmqqpPEbkKwSJWWfRiK4IMl5WryTaoKpnS4ROovn8wHq+gPqu4ZsWoe0us6PGmx30roWgqSI1SNSAbVsXUfXrGrbtsdt8QbQNgpBwvYQXCk7weWR50zSm6aHpLvhuhiJqnYOxHpWm3BgPT3eY3Nyi2z9LjiPO82OYwWK7JadaU1ySToXBBlRjiRA95m8LuJCpq0bTtlBU5CirEDz8gXxnN4qE1psaSqlCFt4L8kZzwikaGlcZUwJnxhR/MeUI53nDsWyYM8zEIlgCJUznz3ic3GOrUFw4H/AfWIRzO2cRzIestm2N2fQdlkZO5MqQQ0ejXfrRuqO7kRyd9XHMkG0fHfTSUDd3+J7+kCM6jWncn/MJP58BCyA0n6i4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Referrer-Policy in der Joomla 4 Content Security Policy\"\n        title=\"Referrer-Policy in der Joomla 4 Content Security Policy\"\n        src=\"/static/dff0d06d1dd0f5a923e567ae796c5915/f058b/header4.png\"\n        srcset=\"/static/dff0d06d1dd0f5a923e567ae796c5915/c26ae/header4.png 158w,\n/static/dff0d06d1dd0f5a923e567ae796c5915/6bdcf/header4.png 315w,\n/static/dff0d06d1dd0f5a923e567ae796c5915/f058b/header4.png 630w,\n/static/dff0d06d1dd0f5a923e567ae796c5915/40601/header4.png 945w,\n/static/dff0d06d1dd0f5a923e567ae796c5915/78612/header4.png 1260w,\n/static/dff0d06d1dd0f5a923e567ae796c5915/191e2/header4.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Mittels <code class=\"language-text\">.htaccess</code> kann der Header ebenfalls <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Apache_Configuration_htaccess#referrer_policy\">gesetzt werden</a>:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Header always set Referrer-Policy &quot;strict-origin-when-cross-origin&quot; &quot;expr=%{CONTENT_TYPE} =~ m#text\\/(css|html|javascript)|application\\/pdf|xml#i&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<h3>Cross-Origin-Opener-Policy</h3>\n<p>Der Header <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cross-Origin-Opener-Policy\">Cross-Origin-Opener-Policy (COOP)</a> bietet die Möglichkeit, einen neuen Browser-Kontext anzufordern, um sich besser von anderen, nicht vertrauenswürdigen Aufrufen zu isolieren.</p>\n<p>Der <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cross-Origin_Resource_Policy_(CORP)\">Cross-Origin-Resource-Policy Header (CORP)</a> erlaubt es Websites und Anwendungen, sich gegen bestimmte <em>Cross-Origin-Anforderungen</em> zu schützen.</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\">Cross-Origin Resource Sharing (CORS)</a> ist ein HTTP-Header-basierter Mechanismus, der es einem Server erlaubt, andere Ursprünge (Domäne, Schema oder Port) als seinen eigenen anzugeben, von denen ein Browser das Laden von Ressourcen erlauben soll.</p>\n<p>Mit der <a href=\"https://wicg.github.io/cross-origin-embedder-policy/\">Cross-Origin Embedder Policy (COEP)</a> wird verhindert, Anfragen nicht gleichen Ursprungs zu laden, es sei denn, dies ist ausdrücklich über CORS oder CORP erlaubt.</p>\n<p>Mittels <code class=\"language-text\">.htaccess</code> kann der Header ebenfalls <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Apache_Configuration_htaccess#general_cors_access\">gesetzt</a> werden.</p>\n<h3>Strict-Transport-Security</h3>\n<p>Der <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security\">Strict-Transport-Security (HSTS)</a> Header ist im Plugin in einem eigenen Tabulator konfigurierbar. Er bietet eine zusätzliche Absicherung aller Sites, die mit HTTPS verschlüsselt sind. Ist der Header gesetzt, lehnt der Browser alle unverschlüsselten HTTP-Verbindungen ab.</p>\n<blockquote>\n<p>Bei Seiten, die von HTTP auf HTTPS umgestellt wurden, ist die Wahrscheinlichkeit hoch, dass sich ein Link findet, der nicht mit dem zusätzlichen <em>S</em> versehen ist. Ohne HSTS würde dieser Link unverschlüsselt via HTTP weitergeleitet. Mit HSTS ausgestattete Websites liefern alle Inhalte ohne Ausnahme per HTTPS aus. Links werden umgeschrieben. So finden potenzielle Angreifer nichts Unverschlüsseltes in die Übermittlung.</p>\n</blockquote>\n<p>Im Plugin ist beispielsweise der Wert <code class=\"language-text\">max-age=31536000; includeSubDomains</code> konfigurierbar. Das folgende bild zeigt die Konfiguration über die Option <em>Force HTTP Headers</em>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/72650ba633e77117422bdcf152324699/191e2/header6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVQoz41Sy2oVQRScrxNFkLgOBEH9BlGJ+afoSrJwL1npwm1UhDt3eh79nH5NWadvjEYXcaA4XdOna+pUT/f4+RmOnr3BEevDJ69x7/gF7p+8xIOTV/8F6ZVzcv7R01N0w2yxnwx6pbFo1+BDQlgzPPFn/bX+m4dYYNwKbQO6WXuMi4P1CbkAKVfEdDdCzFgpFFO55gkuZHRXX7+j3w9Qk8K6rjg82x0A3QUsViPm2Pjnb5+wmxUduoTKHqUHjPOETJu11n+xbbd44MfnxdxwT+4YVcvQ+ZXjcpSaEaOsSxMobCwiJDylw5qQcZ0P0NqyP2Lju5xry7Mz1jbLF5dvcfHuHN6T5NQEtpyxSVUKGx3ccFbPxkGNcM41CPcrHV6Hhqsvl/j4/gPM5FH0AtP3CPOMvNuhULDwUDEckQbSNMPu9/ix62G0plMNy70ggi1iGW3SqIGX4vnr9IoHBoRxRJwmVIqJUIOsKRCXhbebURiHRCRVfqOOATSHtRzG4Q6cYTbMSD4knAHdRhM4iP1GbiP/BEAf50alQajBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Strict-Transport-Security in der Joomla 4 Content Security Policy\"\n        title=\"Strict-Transport-Security in der Joomla 4 Content Security Policy\"\n        src=\"/static/72650ba633e77117422bdcf152324699/f058b/header6.png\"\n        srcset=\"/static/72650ba633e77117422bdcf152324699/c26ae/header6.png 158w,\n/static/72650ba633e77117422bdcf152324699/6bdcf/header6.png 315w,\n/static/72650ba633e77117422bdcf152324699/f058b/header6.png 630w,\n/static/72650ba633e77117422bdcf152324699/40601/header6.png 945w,\n/static/72650ba633e77117422bdcf152324699/78612/header6.png 1260w,\n/static/72650ba633e77117422bdcf152324699/191e2/header6.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">max-age</code> weißt den Browser an, die Domain zu speichern. Der Wert <code class=\"language-text\">31536000</code> steht in Sekunden und entspricht einem Jahr. Mit der Option <code class=\"language-text\">includeSubDomains</code> weitet der Browser die Funktion auf alle Subdomains aus.</p>\n<blockquote>\n<p>Wenn <code class=\"language-text\">preload</code> aktiviert ist, wird die Domain in der <a href=\"https://hstspreload.org\">Preloadliste</a> gespeichert.</p>\n</blockquote>\n<p>Per <code class=\"language-text\">.htaccess</code> ist der Header wie folgt zu <a href=\"\">aktivieren</a>:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  # Header always set</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Strict-Transport-Security &quot;max-age=16070400; includeSubDomains&quot; &quot;expr=%{HTTPS} == &#39;on&#39;&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  # (1) Enable your site for HSTS preload inclusion.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  # Header always set</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot; &quot;expr=%{HTTPS} == &#39;on&#39;&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<blockquote>\n<p>Trotz des Nutzens steht HSTS in der <a href=\"https://de.wikipedia.org/wiki/HTTP_Strict_Transport_Security#Kritik\">Kritik</a>, da Seitenbetreiber darüber in der Lage sind, Nutzerinformationen auszulesen. Zwar ist der Zugriff kompliziert, aber möglich.</p>\n</blockquote>\n<h2>Weitere Plugins im Bereich Force HTTP Headers</h2>\n<h3>HTTP Header Feature-Policy</h3>\n<p>Der HTTP Header <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy\">Feature-Policy</a> ist relativ jung und weitreichend. Er teilt dem Browser mit, welche Funktionen die Site benötigt. Wenn kein Zugriff auf das Mikrofon notwendig ist, hat ein möglicher Angreifer keinen Zugriff auf diese Browser-Funktionen - vorausgesetzt der Header ist korrekt gesetzt.</p>\n<p>Der Aufbau ist simpel:</p>\n<p><code class=\"language-text\">Feature-Policy: &lt;directive> &lt;allowlist></code></p>\n<blockquote>\n<p>Die steuerbaren <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy\">Features (Direktiven), </a>, werden bisher <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy#browser_compatibility\">nicht alle in allen Browsern unterstützt.</a>.</p>\n</blockquote>\n<p>Über das Joomla Plugin ist der Header wie folgt konfigurierbar:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/347864a3f49895503b9055a571331b34/191e2/header7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVQoz41SS4sUMRjsXyeKILtnYRHU3yCuqH9q8bYXL94EH6e9qYvs9HRP59F5P8pKZlYcPawNRVJJvkp9lR5On7/FybM3OOH48Mkr3Hv8AvfPXuLB2fl/oZ1tda3+0dPXGCaxYrtojLOCVKbDugjnEyzx53g7/5u7kKGNh1odBqEsdtJgtREpAzEVhHg3XEjwFAoxH3iEcQnDt+/XGLcT5mWG9x77r94B0J2DXBVCCp1//fEFGzHToYkoPDOrCTuxINFmKeVf1HrEHS8XUv/mltwwqp6hsZ7tZvicEMJ+3gTyrQAdFOeQD+ut3VajlOb5gMq1lErPc9Dr2i1ffrzA5bsLWEuS6DpG1AaKVClRl2XPO/gYxmKadzDGdFgWWk+Hh9BwffUZn95/gBEWSQrYeUbUGunmBnmzQWZRJs80EBcBPW7xczNCK0WnCiv3XBOsLWS2lQUPWwdeDTlOMNMMR1eJxZW3Fwp1ULiwOEg+CJ22GFpEbWy/0cAAusPSWmM73IHRBqGJ86LGGdAxDgLHSL3lX1fu52xk1t1WAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Strict-Transport-Security in der Joomla 4 Content Security Policy\"\n        title=\"Strict-Transport-Security in der Joomla 4 Content Security Policy\"\n        src=\"/static/347864a3f49895503b9055a571331b34/f058b/header7.png\"\n        srcset=\"/static/347864a3f49895503b9055a571331b34/c26ae/header7.png 158w,\n/static/347864a3f49895503b9055a571331b34/6bdcf/header7.png 315w,\n/static/347864a3f49895503b9055a571331b34/f058b/header7.png 630w,\n/static/347864a3f49895503b9055a571331b34/40601/header7.png 945w,\n/static/347864a3f49895503b9055a571331b34/78612/header7.png 1260w,\n/static/347864a3f49895503b9055a571331b34/191e2/header7.png 1836w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Mittels <code class=\"language-text\">.htaccess</code> sieht der Eintrag für ein Verbot von microphone und geolocation wie folgt aus:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Header always set Feature-Policy microphone &#39;none&#39;; geolocation &#39;none&#39;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<h3>Expect-CT</h3>\n<p>Der <a href=\"https://developer.mozilla.org/de/docs/Web/HTTP/Headers/Expect-CT\">Expect-CT Header</a> erlaubt es Webseiten, die Anforderungen der <a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Certificate_Transparency\">Certificate Transparency</a> zu erzwingen.</p>\n<p>Wenn eine Webseite die Verwendung des <code class=\"language-text\">Expect-CT</code> Headers aktiviert überprüft der Browser jedes im Zusammenhang mit der Webseite verwendete Zertifikat in <a href=\"https://www.certificate-transparency.org/known-logs\">öffentlichen CT Protokollen</a>.</p>\n<h3>Content-Security-Policy</h3>\n<p>Die <a href=\"https://scotthelme.co.uk/content-security-policy-an-introduction/\">Content-Security-Policy</a> oder CSP ist das Tüpfelchen auf das I der HTTP Header.</p>\n<blockquote>\n<p>Ohne CSP lädt ein Browser alle Inhalte, egal von wo. Das ist in vielen Fällen hilfreich. Problematisch ist, dass nicht jede Site vertrauenswürdig ist. Ich meine hiermit das Aufrufen bösartigen Scriptcodes per <a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">Cross Site Scripting (XSS)</a>. Das Gefährliche ist, dass man als Websitebetreiber die Dinge nicht in der Hand hat, wenn fremde Inhalte aufrufbar sind. Dann reicht es nämlich, wenn der Angreifer eine verlinkte Site mit Schadcode verunreinigte.</p>\n</blockquote>\n<p>CSP bietet einen hohen Schutz, erfordert dafür Sachkenntnis. Im Grund genommen legt man eine Liste aller Ressourcen an, welche die Webseite benötigt. Alles andere wird vom Browser blockiert. Hier wird deutlich: Wer nicht weiß, was er tut, kann seine Website per Content-Security-Policy lahm legen. In der restriktivsten Einstellung lässt der Browser nur Inhalte zu, die von der aufrufenden Domain selbst (<code class=\"language-text\">self</code>) stammen.</p>\n<blockquote>\n<p>Mit Joomla 4.0 eliminierte man im Joomla Core Inline-Skripte und Styles weitestgehend. Leider verwenden Erweiterungen weiterhin Inline-JavaScript und Inline CSS Styles. Daher ist das Laden von Inline Elmeneten meist erforderlich und darf nicht unterbunten werden. Aus diesem Grund ist mit einer Joomla Website in der Regel nur ein <code class=\"language-text\">A</code> Rating und kein <code class=\"language-text\">A+</code> Rating erreichbar.</p>\n</blockquote>\n<p>Der Header ist wie folgt aufgebaut:</p>\n<p><code class=\"language-text\">Content-Security-Policy-(Report-Only) &lt;directive> &lt;allowlist>; &lt;directive> &lt;allowlist>;</code></p>\n<p>Die <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy#Browser_compatibility\">Liste</a> der möglichen Direktiven ist lang und wird von allen gängigen Browsers unterstützt.</p>\n<p>Bei der Implementierung der Content-Security-Policy ist es sinnvoll, den <code class=\"language-text\">Report-Only</code> Modus zu aktivieren und einen <a href=\"https://github.com/zero-24/csp-reporter-php\">reporting Endpoint</a> aufzusetzen. An diesen Endpoint schickt der Browser alle Verletzungen der CSP. So ist die Website anpassbar, bevor die Regel scharf geschaltet wird und Websitefunktionen nicht mehr arbeiten. Empfehlenswert ist der Einsatz dieser Direktive nur dann, wenn man weiß, was man bewirkt. Im schlimmsten Fall ist am Ende der Joomla Administrationsbereich nicht mehr funktionsfähig.</p>\n<blockquote>\n<p>Wenn man einen Report per E-Mail erhalten möchte, bietet das Skript unter der Adresse <a href=\"https://github.com/zero-24/csp-reporter-php\">https://github.com/zero-24/csp-reporter-php</a> eine Möglichkeit.</p>\n</blockquote>\n<p>Das Setzen der Content-Security-Policy in einer <code class=\"language-text\">.htaccess</code> sieht beispielweise wie folgt aus:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Content-Security-Policy &quot;default-src &#39;self&#39;; base-uri &#39;none&#39;; form-action &#39;self&#39;; frame-ancestors &#39;none&#39;; upgrade-insecure-requests&quot; &quot;expr=%{CONTENT_TYPE} =~ m#text\\/(html|javascript)|application\\/pdf|xml#i&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<blockquote>\n<p>Viele Sites beinhalten <em>Inline-Stile</em> und <em>Inline-Skripte</em>, so dass es erforderlich ist, dass man <code class=\"language-text\">unsafe-inline</code> hinzufügt, damit die Website korrekt arbeitet.</p>\n</blockquote>\n<h2>Weitere Header</h2>\n<h3>X-Content-Type-Options</h3>\n<p>Der Header <a href=\"https://developer.mozilla.org/de/docs/Web/HTTP/Headers/X-Content-Type-Options\">X-Content-Type-Options</a> ist unkompliziert zu konfigurieren, seit <a href=\"https://github.com/joomla/joomla-cms/blob/9b54e8bd5da61dfc1a4d1476b9e0df608d7289e9/htaccess.txt#L30\">Joomla 3.9.13 in der Joomla Core <code class=\"language-text\">.htaccess</code></a> enthalten und <a href=\"https://docs.joomla.org/J3.x:Joomla_3.9.3_Security_Notes\">wird für alle Joomla Webseiten</a> empfohlen.</p>\n<p>Es gibt einen gültigen Wert. Dies ist <code class=\"language-text\">nosniff</code>. Ist der Header gesetzt, versucht der Browser nicht, den Mime Type (Dateitype) einer Datei zu erraten. Dies ist bei heutigen Webseiten nicht mehr notwendig und führt zu unnötigen Sicherheitsproblemen.</p>\n<p>Idealerweise wird dieser Header in der Datei <code class=\"language-text\">.htaccess</code> <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Apache_Configuration_htaccess#prevent_some_browsers_from_mime-sniffing_the_response\">gesetzt</a>. So ist die Sicherheitsfunktion unabhängig von Joomla auf Webserver-Ebenen aktiviert:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    Header always set X-Content-Type-Options &quot;nosniff&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<h3>X-XSS-Protection</h3>\n<p>Diesen Header erwähne ich der Vollständigkeit halber. Er ist im Joomla 4 Backend nicht konfigurierbar. Der HTTP <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-XSS-Protection\">X-XSS-Protection</a> Header war dazu gedacht im Browser einen XSS Auditor zu aktivieren. Moderne Browser berücksichtigen diesen Header [nicht mehr]<a href=\"https://portswigger.net/daily-swig/google-deprecates-xss-auditor-for-chrome\">https://portswigger.net/daily-swig/google-deprecates-xss-auditor-for-chrome</a>).</p>\n<p>Die empfohlene Konfiguration für ältere Browser ist: <code class=\"language-text\">1; mode=block</code>. In Joomla 4 ist der Header ausschließlich über die Datei <code class=\"language-text\">.htaccess</code> konfigurierbar. Direkt mit der <code class=\"language-text\">.htaccess</code> Datei wird der Header wie folgt gesetzt:</p>\n<pre class=\"grvsc-container solarized-light\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;IfModule mod_headers.c&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Header always set X-XSS-Protection 1; mode=block</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;/IfModule&gt;</span></span></code></pre>\n<h1>Weitere Links</h1>\n<h2>Joomla Dokumentation</h2>\n<p><a href=\"https://docs.joomla.org/J4.x:Http_Header_Management/en\">Joomla Dokumentation</a></p>\n<h2>csp-cheat-sheet</h2>\n<p>Die Seite <a href=\"https://scotthelme.co.uk/csp-cheat-sheet/\">scotthelme.co.uk</a> bietet eine Übersicht in englischer Sprache über alle unterstützten Funktionen und Direktiven in der <em>Content Security Policy</em>. Sie kann als Kurzreferenz verwendet werden, um gültige und ungültige Direktiven und Werte zu identifizieren und enthält Beispielrichtlinien und Anleitungen zur effektiven Verwendung von CSP.</p>\n<h2>CSP-Auswerter</h2>\n<p>Der <a href=\"https://csp-evaluator.withgoogle.com/\">CSP Evaluator</a> ermöglicht es Entwicklern und Sicherheitsexperten zu überprüfen, ob eine Content Security Policy (CSP) eine starke Mitigation gegen Cross-Site-Scripting-Angriffe darstellt. Er unterstützt den Prozess der Überprüfung von CSP-Richtlinien, der normalerweise eine manuelle Aufgabe ist, und hilft, subtile CSP-Umgehungen zu identifizieren, die den Wert einer Richtlinie untergraben. Die Prüfungen des CSP Evaluators basieren auf einer groß angelegten Studie und sollen Entwicklern helfen, ihre CSP zu härten und die Sicherheit ihrer Anwendungen zu verbessern. Dieses Tool (auch als Chrome-Erweiterung verfügbar) wird nur für die Bequemlichkeit von Entwicklern zur Verfügung gestellt und Google gibt keine Garantien oder Gewährleistungen für dieses Tool.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .solarized-light { background-color: #FDF6E3; }\n  .solarized-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","fileAbsolutePath":"/home/astrid/git/websites/meinblog/content/posts/cassiopeia/10content-security-policy-joomla4.md","excerpt":"Die Aufgabe eines Browsers erscheint auf den ersten Blick simpel: er zeigt Text und Bilder an, die man ihm übermittelt. Bei genauerem…","fields":{"slug":"/http-header-und-content-security-policy-joomla4/"},"frontmatter":{"title":"HTTP-Header und Content Security Policy in Joomla 4","date":"04.05.2021","tags":["Joomla","Sicherheit","CSP","HTTP Header","Content Security Policy"],"thumbnail":null}}},"pageContext":{"slug":"/http-header-und-content-security-policy-joomla4/","previous":{"id":"e0f60f3b-f664-57af-ac35-22f95e247dfc","frontmatter":{"title":"Eine Stadtführung mit Mapbox GL","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","interaktiv","Stadtführung"],"template":"post"},"fields":{"slug":"/maplibregl-scrolltofly/"}},"next":{"id":"a14e99d4-33ac-56bb-83f6-2c115c8be38b","frontmatter":{"title":"Maplibre GL - Höhenangaben per Tilequery abfrage","tags":["MaplibreGL","geografische Daten","Geoinformationssystem","JavaScript-Bibliothek","Vektor-Tiles","Karten","Tilequery API","Schnittstelle"],"template":"post"},"fields":{"slug":"/maplibregl-axios-tilequery-elevation/"}}}},"staticQueryHashes":[]}