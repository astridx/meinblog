{"componentChunkName":"component---src-templates-post-js","path":"/das-m-im-mvc-model/","result":{"data":{"markdownRemark":{"html":"<p>In diesem Teil kommt keine neue Funktion hinzu. Wir bessern den bisherigen Aufbau. Jede Web-Anwendung besteht aus Eingaben, Daten und der Darstellung.\nProblematisch wäre es vor allem bei größeren Projekten die drei Elemente in einer Klasse zusammenzufassen. Joomla! verwendet das Model-View-Controller-Konzept für die Aufteilung. In diesem Tutorial-Teil fügen wir ein Model zum Frontend hinzu.\nDas Model-Objekt ist für die Daten und deren Verarbeitung verantwortlich.</p>\n<h2>Für Ungeduldige</h2>\n<p>Sieh dir den geänderten Programmcode in der <a href=\"https://github.com/astridx/boilerplate/compare/t3...t4\">Diff-Ansicht</a> an und übernimm diese Änderungen in deine Entwicklungsversion.</p>\n<h2>Schritt für Schritt</h2>\n<h3>Neue Dateien</h3>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t3...t4#diff-599caddf64a6ed0c335bc9c9f828f029\">src/components/com_foos/src/Model/FooModel.php</a></h4>\n<p>Beim Model ist es ebenfalls so, dass du das Rad nicht neu erfindest. Du erweiterst die Joomla Klasse <code class=\"language-text\">BaseDatabaseModel</code>. Implementiere dann nur das, was du anders einsetzt. In unserem Fall es die Ausgabe <code class=\"language-text\">$this-&gt;message = &#39;Hello Foo!&#39;;</code> für die wir die Methode <code class=\"language-text\">getMsg()</code> erstellen.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4951c642c75d353de06bcc78de3efb7e20b0f93d/src/components/com_foos/src/Model/FooModel.php\">src/components/com_foos/src/Model/FooModel.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Foos<span class=\"token punctuation\">\\</span>Site<span class=\"token punctuation\">\\</span>Model</span><span class=\"token punctuation\">;</span>\n\n\\<span class=\"token package\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'_JEXEC'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token keyword\">die</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">Joomla<span class=\"token punctuation\">\\</span>CMS<span class=\"token punctuation\">\\</span>MVC<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>BaseDatabaseModel</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FooModel</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseDatabaseModel</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">protected</span> <span class=\"token variable\">$message</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getMsg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">message</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">message</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'Hello Foo!'</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">message</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3>Geänderte Dateien</h3>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t3...t4#diff-c77adeff4ff9e321c996e0e12c54b656\">src/components/com_foos/src/View/Foo/HtmlView.php</a></h4>\n<p>Die Daten des Models holen wir uns in der View  mit <code class=\"language-text\">$this-&gt;msg = $this-&gt;get(&#39;Msg&#39;);</code>. Das wirkt hier umständlich, in komplexen Anwendungen hat sich diese Verfahrensweise bewährt. Die Datenberechnung geschieht im Model. Die Gestaltung der Ansicht mithilfe der berechneten Daten übernimmt die View.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4951c642c75d353de06bcc78de3efb7e20b0f93d/src/components/com_foos/src/View/Foo/HtmlView.php\">src/components/com_foos/src/View/Foo/HtmlView.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$tpl</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">msg</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Msg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">parent</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token function\">display</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$tpl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<blockquote>\n<p>Unter Umständen verwirrt dich der Aufruf <code class=\"language-text\">$this-&gt;get(&#39;Msg&#39;);</code> genauso wie mich, als ich Joomla das erste Mal nutzte. Die Methode im Model heißt <code class=\"language-text\">getMsg()</code>, du rufst die aber über <code class=\"language-text\">get(&#39;Msg&#39;)</code> auf. Das passt nicht. Wenn du dich vorher schon mit objektorientierter Programmierung befasst hast, dann bist du versucht, den Aufruf über <code class=\"language-text\">getMsg()</code> zu tätigen. Verwendest du Joomla, hast du es leichter, wenn du die Dinge so nutzt, wie es für dich vorbereitet ist. <a href=\"https://de.wikipedia.org/w/index.php?title=Zugriffsfunktion&#x26;oldid=196247734\">Getter</a> im Model rufst du über die Methode <code class=\"language-text\">get()</code> mit dem entsprechenden Parameter auf.</p>\n</blockquote>\n<h4><a href=\"https://github.com/astridx/boilerplate/compare/t3...t4#diff-a33732ebd6992540b8adca5615b51a1f\">src/components/com_foos/tmpl/foo/default.php</a></h4>\n<p>Über das Template geben wir die Daten aus. Hier wird später alles richtig in HTML-Tags verpackt.</p>\n<p><a href=\"https://github.com/astridx/boilerplate/blob/4951c642c75d353de06bcc78de3efb7e20b0f93d/src/components/com_foos/tmpl/foo/default.php\">src/components/com_foos/tmpl/foo/default.php</a></p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">...\nHello Foos: <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">msg</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<h2>Teste deine Joomla-Komponente</h2>\n<ol>\n<li>Installiere deine Komponente in Joomla! Version 4, um sie zu testen:</li>\n</ol>\n<p>Kopiere die Dateien im <code class=\"language-text\">administrator</code> Ordner in den <code class=\"language-text\">administrator</code> Ordner deiner Joomla! 4 Installation.<br>\nKopiere die Dateien im <code class=\"language-text\">components</code> Ordner in den <code class=\"language-text\">components</code> Ordner deiner Joomla! 4 Installation.</p>\n<p>Eine neue Installation ist nicht erforderlich. Verwende die aus dem vorhergehenden Teil weiter.</p>\n<ol start=\"2\">\n<li>Sieh dir die Frontendansicht deiner Komponente an. Die Daten für die Ausgabe werden vom Model erzeugt.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2cb1e532d76d2071ca0063157f27ec3/53ac9/j4x5x1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.46625766871166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABgElEQVQoz5WQ2y4DURSG5zUQEYlIabRFQ++IC1ciIqQObalDRIt4A3EIkRDxEB7GlXsXEkSC0Jk9UzPTTmc+uwd6CKIr+fe/197//vdaS2kLxgmMphgY22J4fJfQSJoW3yKtPTHaexN0+Jfo7EvSFVihO7iGL7SOv3+DvsFNguEU/eE04aFthoZ3iER2UaYSByTSZxLnLEksS0zM7TER3WNybp+p+QOmFw6ZWTxiNnZMNH7CQuKUeckxycvJM5Ir56yuXrC+domSUQV39088Pr/xmhG8SajCQNOzaKIB8qx4Z2RN3jMqQtfJ2Tksy8JxHDzXQ3HyeaycTUFVQQr+Fx6WU/jel1avzEpV4+EZBp409SqCv5ApVigEtm1jmpUK5UPlW1T5qy7/xawYpmnKVm1c10U3suSlYbnCiqDEX/uvvLHRGkNNN1A1UTLMy7EVJFdbbjStzRsMXbd8dnV9y83Da82z8mcKTURthS/igycti27lSsNy6ypswrDKP8/2E/Dlxl07odaRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Joomla Model im Frontend\"\n        title=\"Joomla Model im Frontend\"\n        src=\"/static/d2cb1e532d76d2071ca0063157f27ec3/a6d36/j4x5x1.png\"\n        srcset=\"/static/d2cb1e532d76d2071ca0063157f27ec3/222b7/j4x5x1.png 163w,\n/static/d2cb1e532d76d2071ca0063157f27ec3/ff46a/j4x5x1.png 325w,\n/static/d2cb1e532d76d2071ca0063157f27ec3/a6d36/j4x5x1.png 650w,\n/static/d2cb1e532d76d2071ca0063157f27ec3/e548f/j4x5x1.png 975w,\n/static/d2cb1e532d76d2071ca0063157f27ec3/53ac9/j4x5x1.png 1287w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Geänderte Dateien</h2>\n<h3>Übersicht</h3>","excerpt":"In diesem Teil kommt keine neue Funktion hinzu. Wir bessern den bisherigen Aufbau. Jede Web-Anwendung besteht aus Eingaben, Daten und der…","fields":{"slug":"/das-m-im-mvc-model/"},"frontmatter":{"title":"Das M im MVC: Model","date":"05.12.2019","tags":["CMS","Joomla"],"thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACZ0lEQVQ4y2P4T2XAAGP8+/cPjAmx0cWQxTEMhNF//vwB479//2I1FJ88A7JzkW2CgV+/foE1gvDv37/hhsAAOh/Dhd9//PhfUVX7Pz0z5/+nT5+whlPfhEn/w6Ni/1+7fgNuKIYLQbaDwIqVq/+zcPL+FxCV/B8SHvW/q6fv/3Wgxnfv3v+fMGnK/8KSsv/S8sr/WTh4/0fFJoD1gLyPYeCfPxCnX7x0+b+uocl/JTWt/5Kyiv/FpOT+B4VG/Lexd/7PLyLxX0xaHiwHMnTy1Om4DUR25br1G/5z8Aj+37Jt+/8zZ8/+19IzAhu+fsOm/9dv3PwvJCb1v6q2HsO7GGEIsgkEjh47/p+dW+D/tBmz/nv7BYFdFBOf9F/f2Oz/8pWr/osDXTl7zjwUR2C4EBb1MImM7Nz/gsBwBBl45erV/x8/fvpvaevwX0JG8X96Vu7/j9AIQ0+TWBP2x48fgQbm/Te1sAEbumnzVnDYevsH/dfUNQC61Pz/gwcPUbyMNwwPHTn6n4md+//O3Xv+F5dW/Hd29wJ728Pb7//5CxfBkQOLEFA6xellWCJt7ej6zyMoCk4mO3bu+i+npPZfWV37//yFi/6vBUYYKAwjouPg6RQ5cSOlQ0iEgLwnICL5X11LD2woMwfPf9/AkP91jc3/eYF8UOyDDAepSUnPwpcOIQbu2bcfnCxAGto7u/8fO37i//fv38Eajp84+X/Dxs3/tfWNwQm7vLIat4HIAQsyFORSXPn8wsVL/5cuWwG2CGdpg00jrECAWQZyCSzisJVSeIsvUJiil38wPsxgbOUjA81KbGoBAOxFbQm0w5BOAAAAAElFTkSuQmCC","width":80,"height":80,"src":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png","srcSet":"/static/93f776b5f583bfa08ca575230009d942/829e2/joomla.png 1x"}}}}}},"pageContext":{"slug":"/das-m-im-mvc-model/","previous":{"id":"cabb5c8d-3a36-5564-a6c4-a1e2721403cd","frontmatter":{"title":"Ein Menüpunkt","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/ein-menuepunkt/"}},"next":{"id":"753d6311-1324-57aa-b4fb-4ebbf5f63a00","frontmatter":{"title":"Den Menüpunkt mit einer Variablen versehen","tags":["CMS","Joomla"],"template":"post"},"fields":{"slug":"/den-menuepunkt-mit-einer-variable-versehen/"}}}}}