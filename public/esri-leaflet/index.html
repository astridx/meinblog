<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7a9d7c78d972bfc625e4.css" id="gatsby-global-css">:root{--font-weight-normal:200;--font-weight-bigger1:250;--font-weight-bigger2:300;--font-weight-biggest:350}sup{display:none}pre{font-size:.7rem}@media screen and (min-width:800px){pre{font-size:.8rem}}@media screen and (min-width:1000px){pre{font-size:1rem}}*,:after,:before{box-sizing:border-box}html{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI,Roboto,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-weight:var(--font-weight-normal);font-size:.9rem;line-height:1.5}body{--font-color:#495057;--link-color:#02091c;--heading-color:#183446;--dark-font-color:#212529;--light-font-color:#868e96;--light-background:#fff;--light-blockqoute:#f0f0f0;--dark-blockqoute:#02091c;--border:#d6d9de;--link-color-white:#fff}body,body.dark{color:var(--font-color);background-color:var(--light-background);margin:0;padding:0 1.5rem}body.dark{--font-color:#b6afa8;--link-color:#fdf6e3;--heading-color:#e7cbb9;--dark-font-color:#dedad6;--light-font-color:#797169;--light-background:#000;--light-blockqoute:#222;--dark-blockqoute:#fdf6e3;--border:#292621;--link-color-white:#222}@media screen and (min-width:800px){body{padding:0 2rem}}article{min-width:0}section{margin:2rem 0}section>h2{margin-top:4rem}@media screen and (min-width:800px){section{margin:3rem 0}}.container{max-width:1100px;margin-left:auto;margin-right:auto}img{display:inline-block;max-width:100%;height:auto}blockquote,dl,ol,p,table,ul{font-size:1.05rem;margin:0 0 1.5rem}ul{padding:0 1rem}@media screen and (min-width:800px){ul{padding:0 2rem}}ul li p{margin:0}ul li ul{padding-left:1rem;margin:0}ul li ul li{margin:.25rem 0}ol li ol{margin-bottom:0}.task-list-item [type=checkbox]{margin-right:.5rem}blockquote{margin:1.5rem 0;padding:1rem;background:var(--light-blockqoute);border-top:1px solid var(--dark-blockqoute);border-right:5px solid var(--dark-blockqoute)}blockquote p{margin:0}blockquote a{padding:1px 4px}blockquote a,blockquote a:hover{border-bottom:2px solid var(--dark-blockqoute);color:var(--heading-color)}blockquote a:hover{border-radius:.3rem}h1,h2,h3,h4,h5{margin:0 0 1.5rem;font-weight:var(--font-weight-biggest);line-height:1.2;color:var(--heading-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1:not(:first-child),h2:not(:first-child),h3:not(:first-child),h4:not(:first-child){margin-top:3rem}h1{font-size:2.5rem;line-height:1.1}h2{font-size:1.75rem}h2 code{font-size:1.75rem!important}h3{font-size:1.5rem;color:var(--font-color);font-weight:var(--font-weight-bigger2)}h3 code{font-size:1.5rem!important}h4{font-size:1.4rem;color:var(--font-color);font-weight:var(--font-weight-bigger1)}h4,h5{margin-bottom:1rem}h5{font-size:1.2rem}@media screen and (min-width:800px){h1{font-size:3rem}h2{font-size:2rem}h2 code{font-size:2rem!important}h3{font-size:1.6rem;color:var(--font-color);font-weight:var(--font-weight-bigger2)}h3 code{font-size:1.6rem!important}}aside{min-width:300px}aside p,aside ul{font-size:.95rem}aside ul{padding-left:1rem}aside h3{font-size:1.4rem}aside a.link:hover{border-bottom:0;background:var(--light-background)}.aside-content{border-top:2px solid var(--light-background)}@media screen and (min-width:1100px){.aside-content{border-top:0;border-left:2px solid var(--light-background);padding-left:2rem}.aside-content section{margin-top:.25rem}}a.link{display:grid;grid-template-columns:45px auto;align-items:center;color:var(--heading-color);border-bottom:none;padding:.75rem;border-radius:.3rem}a.link:hover{border-bottom:none;background:var(--light-background)}a.link img{display:inline-block;height:auto;margin-right:1rem;height:22px;width:auto}.lead{margin:4rem 0}.lead h1{color:var(--dark-font-color);font-weight:var(--font-weight-biggest);font-size:2.5rem;margin-bottom:2rem}.lead p{font-size:1.1rem}@media screen and (min-width:800px){.lead h1{font-size:3rem}.lead p{font-size:1.2rem}}p.subtitle{color:var(--light-font-color);font-size:1.2rem}@media screen and (min-width:800px){p.subtitle{font-size:1.4rem}}a{color:var(--link-color);text-decoration:none;font-weight:var(--font-weight-bigger2)}a:hover{border-bottom:2px solid var(--link-color);color:var(--heading-color)}a.gatsby-resp-image-link:hover{border-bottom:none}a code{border-bottom:2px solid var(--link-color)}a code:hover{background:var(--link-color)!important;color:var(--link-color-white)!important}main{margin-top:7rem}.navbar{width:100%;padding:1rem 2rem;position:fixed;top:0;left:0;background:var(--link-color-white);box-shadow:0 3px 13px rgba(100,110,140,.1),0 2px 4px rgba(100,110,140,.15);z-index:2;border-bottom:solid}.navbar .flex{justify-content:space-between}.footer a,.navbar a{border-radius:.3rem;padding:.5rem;margin:0 .25rem;color:var(--light-font-color);border-bottom:none;font-weight:var(--font-weight-normal)}.footer a:hover,.navbar a:hover{background:var(--light-background);color:var(--font-color)}.navbar a:first-of-type{margin-left:-1rem}.navbar a:last-of-type{margin-right:-1rem}.navbar a.brand{font-size:1.1rem;font-weight:var(--font-weight-bigger2);color:var(--font-color);white-space:nowrap}@media screen and (min-width:800px){main{margin-top:0}.navbar{margin:2rem 0 5rem;padding:1.5rem 0;position:static;background:var(--link-color-white);box-shadow:none}.navbar .flex{justify-content:flex-start}.footer a,.navbar a{padding:1rem 1.5rem;font-size:1.1rem}.navbar a.brand{font-size:1.3rem;margin-right:3rem}.navbar a:first-of-type{margin-left:-1.5rem}}.footer{margin:3rem auto}.footer>.flex{flex-direction:column}.footer-links,.footer>.flex{align-items:center;justify-content:center}.footer-links{display:flex;flex-wrap:wrap}.flex nav{padding:1rem 0}.footer a.img{display:flex;align-items:center;padding:0;margin:0 .75rem;background:none}.footer img{height:30px;width:30px}@media screen and (min-width:800px){.footer{margin:5rem auto}.footer>.flex{align-items:flex-start;margin-left:-1.5rem;margin-right:-1.5rem}.footer a.img{padding:0 .5rem;margin:0 1rem}}.emoji{margin:0 .4rem 0 .1rem}table{border-collapse:collapse;border-spacing:0;width:100%;max-width:100%;overflow-x:auto;display:block}th{border-bottom:2px solid var(--light-background)}tfoot th{border-top:2px solid var(--light-background)}td{border-bottom:2px solid var(--light-background)}td,th{text-align:left;padding:.75rem!important;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;word-break:break-word}tbody tr:nth-child(2n){background-color:var(--light-background)}.flex{display:flex;align-items:center}.grid{display:grid;align-items:stretch}.grid.projects{grid-template-columns:40px auto}.row .cell.description{grid-column:1/span 2;margin-bottom:2rem;line-height:1.3;font-size:1.1rem}@media screen and (min-width:800px){.grid{margin-left:-1rem;margin-right:-1rem}.grid.projects{grid-template-columns:50px 1fr 4fr}.row .cell.description{grid-column:auto;margin-bottom:0}.grid.posts{grid-template-columns:200px 4fr}.grid.lists{grid-template-columns:2fr 4fr}.grid.posts.with-tags{grid-template-columns:200px 4fr 2fr}}.row{display:contents}.lists .row,.posts .row{display:block;margin-bottom:2rem;border-bottom:none}.row .cell{display:flex;align-items:center;font-weight:var(--font-weight-biggest);color:var(--dark-font-color);font-size:1.2rem;line-height:1.2;padding:.5rem 0}.row .cell time{font-size:.8rem}@media screen and (min-width:800px){.row .cell{font-size:1.1rem}.row .cell time{font-size:.9rem}.row .cell.simple{padding:.5rem 0}.lists .row,.posts .row{display:contents}.row:hover>*{background:var(--light-background)}.row .cell.simple:first-child,.row .cell:first-child{padding-left:1rem;border-top-left-radius:.3rem;border-bottom-left-radius:.3rem}.row .cell.simple:last-child,.row .cell:last-child{padding-right:1rem;padding-left:1rem;border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}}.row .cell.light{font-weight:var(--font-weight-normal);color:var(--light-font-color)}.grid.guide{grid-gap:1.5rem;grid-auto-rows:1fr;margin-top:3rem;margin-left:0;margin-right:0}.grid.guide a{transition:all .2s ease;display:flex;align-items:center;padding:1.5rem;border-radius:.3rem;box-shadow:0 3px 13px rgba(100,110,140,.1),0 2px 4px rgba(100,110,140,.15);border-bottom:none}.grid.guide .gatsby-image-wrapper{margin-right:1.5rem}.grid.guide a:hover{-webkit-transform:translate3D(0,-1px,0);transform:translate3D(0,-1px,0);box-shadow:0 8px 22px rgba(100,110,140,.2),0 5px 18px rgba(100,110,140,.25)}.grid.guide h2{margin:0;font-size:1rem;flex:1 1}@media screen and (min-width:600px){.grid.guide{grid-template-columns:repeat(2,minmax(0,1fr))}.grid.guide a{flex-direction:column;justify-content:center}.grid.guide h2{text-align:center;margin:1rem 0 0;flex:none}.grid.guide .gatsby-image-wrapper{margin-right:0}}@media screen and (min-width:800px){.grid.guide{grid-template-columns:repeat(3,minmax(0,1fr))}}@media screen and (min-width:1000px){.grid.guide{grid-template-columns:repeat(4,minmax(0,1fr))}}@media screen and (min-width:1200px){.grid.guide{grid-template-columns:repeat(5,minmax(0,1fr))}}html body div#___gatsby div#gatsby-focus-wrapper main.container section.grid.post article div p span.gatsby-resp-image-wrapper a.gatsby-resp-image-link img.gatsby-resp-image-image{border:1px solid #ddd;border-radius:4px;padding:5px}.grid.post{grid-gap:3rem;margin-left:0;margin-right:0}.article-header h1{font-size:2rem;margin-bottom:1rem;margin-top:.5rem}@media screen and (min-width:1100px){.grid.post{grid-template-columns:3fr 1fr}.article-header h1{font-size:2.75rem;margin-bottom:3rem}}[type=search]{display:block;padding:.8rem 1rem;border:2px solid var(--border);width:100%;max-width:400px;border-radius:.3rem;font-size:1rem}::-webkit-input-placeholder{color:var(--light-font-color)}:-moz-placeholder,:-ms-input-placeholder,::-moz-placeholder,::-webkit-input-placeholder,::placeholder{color:var(--light-font-color)}.suggested{flex-direction:column;align-items:stretch;margin-left:-1rem;margin-right:-1rem}.suggested a{text-align:center;margin:1rem;border-bottom:none;transition:all .2s ease;padding:1.5rem;border-radius:.3rem;box-shadow:0 3px 13px rgba(100,110,140,.1),0 2px 4px rgba(100,110,140,.15);color:var(--font-color)}.suggested a:hover{-webkit-transform:translate3D(0,-1px,0);transform:translate3D(0,-1px,0);box-shadow:0 8px 22px rgba(100,110,140,.2),0 5px 18px rgba(100,110,140,.25)}@media screen and (min-width:800px){.suggested{flex-direction:row}.suggested a{flex-grow:0;flex-shrink:0;flex-basis:calc(50% - 2rem)}}.small{max-width:600px}.medium{max-width:750px}.meta,time{color:var(--light-font-color);font-size:.9rem;white-space:nowrap;font-weight:var(--font-weight-normal)}.count{font-weight:var(--font-weight-biggest);color:var(--link-color)}.tags{display:flex!important;align-items:center;overflow:hidden}.tags>a{display:block;font-weight:var(--font-weight-bigger1);background:#f1f3f5;color:#343a40;margin:.2rem;padding:.4rem .5rem;font-size:.8rem;border-radius:.3rem;border-bottom:0;white-space:nowrap}.tags>a:first-child{margin-left:0}.tags>a:last-child{margin-right:0}.tags>a:hover{background:#868e96;color:var(--link-color-white)}mark{background:#ffec99}a.tag-javascript,a.tag-sql{background:#fff3bf;color:#000}a.tag-javascript:hover,a.tag-sql:hover{background:#ffd43b;color:#000}a.tag-git,a.tag-html,a.tag-linux,a.tag-snippets{background:#fff4e6;color:#e8590c}a.tag-git:hover,a.tag-html:hover,a.tag-linux:hover,a.tag-snippets:hover{background:#fd7e14;color:var(--link-color-white)}a.tag-new-year,a.tag-vue{color:#087f5b;background:#e6fcf5}a.tag-new-year:hover,a.tag-vue:hover{background:#0ca678;color:var(--link-color-white)}a.tag-fundamentals,a.tag-game,a.tag-testing{background:#d3f9d8;color:#111}a.tag-fundamentals:hover,a.tag-game:hover,a.tag-testing:hover{background:#37b24d;color:var(--link-color-white)}a.tag-automation,a.tag-node,a.tag-security{background:#fff5f5;color:#e03131}a.tag-automation:hover,a.tag-node:hover,a.tag-security:hover{background:#f03e3e;color:var(--link-color-white)}a.tag-jQuery,a.tag-notes,a.tag-projects,a.tag-reference,a.tag-wordpress{background:#e3fafc;color:#0c8599}a.tag-jQuery:hover,a.tag-notes:hover,a.tag-projects:hover,a.tag-reference:hover,a.tag-wordpress:hover{background:#1098ad;color:var(--link-color-white)}a.tag-architecture,a.tag-css,a.tag-dom{background:#e7f5ff;color:#1971c2}a.tag-architecture:hover,a.tag-css:hover,a.tag-dom:hover{background:#1c7ed6;color:var(--link-color-white)}a.tag-gatsby,a.tag-life,a.tag-php,a.tag-redux{background:#f3f0ff;color:#6741d9}a.tag-gatsby:hover,a.tag-life:hover,a.tag-php:hover,a.tag-redux:hover{background:#7950f2;color:var(--link-color-white)}a.tag-api,a.tag-react{background:#edf2ff;color:#3b5bdb}a.tag-api:hover,a.tag-react:hover{background:#4263eb;color:var(--link-color-white)}a.tag-database,a.tag-design{background:#fff0f6;color:#c2255c}a.tag-database:hover,a.tag-design:hover{background:#e64980;color:var(--link-color-white)}a.tag-notes{background:#f8f0fc;color:#9c36b5}a.tag-notes:hover{background:#ae3ec9;color:var(--link-color-white)}:root{--code-font-family:Menlo,"Roboto Mono",Courier New,monospace;--code-font-color:#b3b9c5;--code-background-color:#353535;--string:#92d192;--variable:#f2777a;--property:#abb2bf;--number:#fca369;--operator:#ac8d58;--punctuation:#d5d8df;--comment:#848991;--function:#62cfcf;--keyword:#ffeead;--attribute:#ffd479;--class:#e1a6f2;--tag:#6ab0f3;--error:#f2777a;--light-background:#f1f3f5}pre[class*=language-]{box-shadow:0 8px 16px rgba(0,0,0,.55)}code[class*=language-],pre[class*=language-]{-webkit-font-smoothing:subpixel-antialiased;color:var(--code-font-color);font-family:var(--code-font-family);font-size:.8rem;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;font-weight:400;line-height:1.7;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1.5rem 2rem;margin:.5rem -1.5rem 2rem;overflow:auto}@media screen and (min-width:800px){code[class*=language-],pre[class*=language-]{font-size:.9rem}pre[class*=language-]{padding:1.5rem;margin-left:auto;margin-right:auto;border-radius:.3rem}}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:var(--code-background-color)}:not(pre)>code[class*=language-]{padding:.1rem .3rem;border-radius:.3rem}code.language-text,pre.language-text{background:#e0e3e7!important;color:#333!important;box-shadow:none}code.language-shell:before{content:"$ ";color:var(--comment)}pre.language-terminal{position:relative;background:#fff;color:#595c62;box-shadow:0 8px 16px rgba(100,120,130,.35);padding-top:3rem;margin:2rem 0;border-radius:.3rem}code.language-terminal{color:#595c62}pre.language-terminal:before{content:"\2022   \2022   \2022";position:absolute;top:0;left:0;background:#e0e3e7;color:var(--code-font-color);width:100%;font-size:2.5rem;margin:0;line-height:0;padding:18px 0 16px;text-indent:6px;letter-spacing:-18px}.gatsby-highlight-code-line{background-color:#191919;display:block;margin-right:-1rem;margin-left:-1rem;padding-right:1rem;padding-left:.75rem;border-left:.25rem solid #748ffc}.token.cdata,.token.comment,.token.doctype,.token.important,.token.prolog{color:var(--comment)}.token.punctuation{color:var(--punctuation)}.token.namespace{opacity:.7}.token.property{color:var(--property)}.token.constant,.token.deleted,.token.symbol,.token.tag{color:var(--tag)}.token.number{color:var(--number)}.token.builtin,.token.char,.token.inserted,.token.url{color:var(--code-font-color)}.token.attr-name,.token.selector{color:var(--attribute)}.token.attr-value,.token.string{color:var(--string)}.token.operator{color:var(--operator)}.token.atrule,.token.keyword{color:var(--keyword)}.token.function{color:var(--function)}.language-css,.token.boolean,.token.class-name{color:var(--class)!important}.token.regex{color:var(--keyword)}.token.variable{color:var(--variable)}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.filename{font-size:.9rem;margin-bottom:-.8rem;padding:.5rem 1rem .75rem;line-height:1.8;background-color:#000;color:#fff;z-index:1;margin-left:-1.5rem;margin-right:-1.5rem}@media screen and (min-width:800px){.filename{border-top-left-radius:.3rem;border-top-right-radius:.3rem;margin-left:auto;margin-right:auto}}code::selection,pre::selection{text-shadow:none;color:inherit;background:hsla(0,0%,58.8%,.3)!important}code[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;color:inherit;background:hsla(0,0%,58.8%,.3)!important}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true">ESRI - Environmental Systems Research Institute | Astrid Günther</title><link data-react-helmet="true" rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAKJQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////oK8DKAAAADR0Uk5TAAcFUJJIFGOlRfPFUiXbeXXt8n4Kas1bA4/5gyyAnlf89WcCcN4oMfuyHN3TbhLuwXIiARdSFQIAAAABYktHRDXettlrAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAaUlEQVQY02NgoANgROUyMbMwsLIhCbBzcDJwcfMwwfi8fPw8DAKCQsIiUAFREzFxBglJEylpqFEyshxyDAzyCiaKSjBNyhIMDComJiaqagiD1cVMTDQ0tRAC2iYaOrp6SFbrGxgaGSPxAeofB3Dy5mHsAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTEyLTMxVDEzOjI3OjUyKzAwOjAwahG+IAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0xMi0zMVQxMzoyNzo1MiswMDowMBtMBpwAAABGdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuNy44LTkgMjAxNC0wNS0xMiBRMTYgaHR0cDovL3d3dy5pbWFnZW1hZ2ljay5vcmfchu0AAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBhZ2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OmhlaWdodAAxOTIPAHKFAAAAF3RFWHRUaHVtYjo6SW1hZ2U6OldpZHRoADE5MtOsIQgAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTU0NjI2Mjg3MhvFQhUAAAAPdEVYdFRodW1iOjpTaXplADBCQpSiPuwAAABWdEVYdFRodW1iOjpVUkkAZmlsZTovLy9tbnRsb2cvZmF2aWNvbnMvMjAxOC0xMi0zMS9hNTIxNmRhZDQ0YjlhNzJmNjM1OWZjMjEwMjJlYzQwMS5pY28ucG5nxAVqqwAAAABJRU5ErkJggg=="/><meta data-react-helmet="true" name="description" content="Wenn Sie intensiver mit digitalen Landkarten arbeiten,
möchten Sie sicherlich auch einmal Daten eines Geoinformationssystems (GIS) auf
Ihrer…"/><meta data-react-helmet="true" name="image" content="https://blog.astrid-guenther.de//logo.png"/><meta data-react-helmet="true" property="og:url" content="https://blog.astrid-guenther.de//esri-leaflet/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="ESRI - Environmental Systems Research Institute"/><meta data-react-helmet="true" property="og:description" content="Wenn Sie intensiver mit digitalen Landkarten arbeiten,
möchten Sie sicherlich auch einmal Daten eines Geoinformationssystems (GIS) auf
Ihrer…"/><meta data-react-helmet="true" property="og:image" content="https://blog.astrid-guenther.de//logo.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="astridguenther"/><meta data-react-helmet="true" name="twitter:title" content="ESRI - Environmental Systems Research Institute"/><meta data-react-helmet="true" name="twitter:description" content="Wenn Sie intensiver mit digitalen Landkarten arbeiten,
möchten Sie sicherlich auch einmal Daten eines Geoinformationssystems (GIS) auf
Ihrer…"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.astrid-guenther.de//logo.png"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://blog.astrid-guenther.de/","name":"ESRI - Environmental Systems Research Institute","alternateName":"ESRI - Environmental Systems Research Institute"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://blog.astrid-guenther.de//esri-leaflet/","name":"ESRI - Environmental Systems Research Institute","image":"https://blog.astrid-guenther.de//logo.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://blog.astrid-guenther.de/","name":"ESRI - Environmental Systems Research Institute","alternateName":"ESRI - Environmental Systems Research Institute","headline":"ESRI - Environmental Systems Research Institute","image":{"@type":"ImageObject","url":"https://blog.astrid-guenther.de//logo.png"},"description":"Wenn Sie intensiver mit digitalen Landkarten arbeiten,\nmöchten Sie sicherlich auch einmal Daten eines Geoinformationssystems (GIS) auf\nIhrer…"}]</script><link rel="icon" href="/favicon-32x32.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#16868F"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=3ab21ccc9ee6bc1e6ee3329051bee6cc"/><link rel="alternate" type="application/rss+xml" title="Astrid Günther | RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-bbd22f9d344145c1b194.js"/><link as="script" rel="preload" href="/framework-b17a64ad725e0b3c1338.js"/><link as="script" rel="preload" href="/app-6e19340bc1dca09b3b91.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/05f1d64e2e1399e8ce81fd5e37a2b8dc2f9ac157-fb0c0a50fbc4aa1c63f0.js"/><link as="script" rel="preload" href="/cd89b575fbc7744d97a7acf3b55b56387c8b3feb-ecedd2c80549e60c9d95.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-8d0f43e9772b68fff69d.js"/><link as="fetch" rel="preload" href="/page-data/esri-leaflet/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="navbar"><div><a href="/"><img style="display:block;max-width:100%;margin:auto" src="/logo2.png" alt=""/></a></div><div class="container flex"><div><a href="/blog">Blog</a><a href="/tutorial">Sets</a><button id="dark-mode-button" style="margin-left:20px"><a href="/en/esri-leaflet/">english</a></button><label><input type="checkbox"/> <!-- -->Dark mode</label></div></div></nav><main class="container"><aside><div class="aside-content"><section></section></div></aside><header class="article-header medium"><h1>ESRI - Environmental Systems Research Institute</h1><a href="https://github.com/astridx/meinblog/blob/master/content/posts/leaflet/6esri-leaflet.md" rel="noreferrer" target="_blank">Ändere diesen Beitrag</a></header><aside><div class="aside-content"><section><time>18.12.2018</time><div class="cell tags"><a class="tag-geografische Daten" href="/tags/geografische-daten">geografische Daten</a><a class="tag-Leaflet" href="/tags/leaflet">Leaflet</a></div></section></div></aside><section class="post"><article><div><p>Wenn Sie intensiver mit digitalen Landkarten arbeiten,
möchten Sie sicherlich auch einmal Daten eines Geoinformationssystems (GIS) auf
Ihrer Karte anzeigen.</p>
<blockquote>
<p>Ein <a href="https://de.wikipedia.org/w/index.php?title=Geoinformationssystem&#x26;oldid=183596912">Geoinformationssystem</a><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>
ist ein Informationssystem zur Erfassung, Bearbeitung, Organisation,
Analyse und Präsentation von Daten, die einen Bezug zu einer Stelle
auf unserer Erde haben. Zu einem Geoinformationssystem gehören dabei
die notwendige Hardware, die notwendige Software, die Daten und die
Anwendungen selbst.</p>
</blockquote>
<p>Wenn Sie Daten eines Geoinformationssystems nutzen möchten,
werden Sie früher oder später über den Begriff
<a href="https://de.wikipedia.org/w/index.php?title=Shapefile&#x26;oldid=183295349">Shapefile</a><sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>
oder Shape Datei stolpern.
Aber auch wenn Sie nie auf den Begriff
Shape Datei
stoßen werden Sie vielleicht einmal einen Webservice nutzen,
der Endpunkt eines ARCServers ist.
Außerdem werden Sie sicher auch das
<a href="https://de.wikipedia.org/w/index.php?title=ESRI&#x26;oldid=182723856">ESRI Inc (Environmental Systems Research Institute)</a><sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>
kennenlernen.
Dieses Institut ist ein US-amerikanischer Softwarehersteller.
Das ESRI hat sich auf Geoinformationssysteme spezialisiert.
Das Unternehmen hat unter anderem die Anwendung
<a href="https://de.wikipedia.org/w/index.php?title=ArcGIS&#x26;oldid=183028892">ArcGIS</a><sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup>
erstellt und das Dateiformat Shapefiles eingeführt.</p>
<blockquote>
<p>Die wesentlichen Produkte des ESRI sind
Geoinformationssysteme. Die Namen der verschiedenen
Geoinformationssysteme des ESRI enthalten in der Regel den Namensteil
ArcGIS. Es gibt ArcGIS Anwendungen für Server und für Clients.</p>
</blockquote>
<p>Bitte lassen Sie sich durch die vielen neuen Begriffe nicht verunsichern.
Natürlich gibt es Leaflet Plugins, die Ihnen beim Integrieren dieser Services zur
Hand geht. Außerdem sehen wir uns alles Schritt für Schritt und nacheinander an.</p>
<h2>In diesem Kapitel werden wir …</h2>
<p>In diesem Teil werden wir uns als erstes die Karten,
die das ESRI anbietet, ansehen.
Danach schauen wir, was sich hinter dem Begriff Shapefile versteckt.
Außerdem werden wir ESRI Webservices kennen lernen.
Unter anderem einen <code class="language-text">L.esri.DynamicMapLayer</code>, Geocoding und
einen <code class="language-text">L.esri.FeatureLayer</code> – hier konkret einen <code class="language-text">Query Layer</code>.
Mit letztgenanntem können Sie Daten, die Sie nicht benötigen,
einfach aus der gegebenen Datenmenge herausfiltern. Das kann bei großen Datenmenge
praktisch sein.</p>
<h2>L.esri.BasemapLayer erweitert L.TileLayer</h2>
<p>Mit der Klasse <code class="language-text">L.esri.BasemapLayer</code> können Sie Karten,
die das Esri anbietet, auf Ihrer Website als Leaflet Karte anzeigen.</p>
<blockquote>
<p>Die <a href="https://github.com/esri/esri-leaflet#terms">Nutzungsbedingungen</a>
für ESRI Dienste gelten für Leaflet Anwendungen. Diese können Sie
auf der Website <a href="https://github.com/esri/esri-leaflet#terms">https://github.com/esri/esri-leaflet#terms</a>
nachlesen.</p>
</blockquote>
<h3>Basemaps und optionale Layer von ESRI</h3>
<p>Sie möchten Basemaps von ESRI verwenden. Wir haben im Kapitel <em>Schöne Kartenlayer</em> schon Karten von anderen Kartenanbietern eingebunden. Dieses Kapitel erweitert die Erklärungen im Kapitel <em>Schöne Kartenlayer</em> um ein weiteres Beispiel – nämlich die Karten des ESRI Instituts.</p>
<h4>Basemaps</h4>
<p>Basemaps von ESRI bieten eine weltweite Abdeckung bei einer Vielzahl von Zoom Stufen. Dabei können die folgenden Themenbereiche wählen.</p>
<ul>
<li>Streets</li>
<li>Topographic</li>
<li>NationalGeographic</li>
<li>Oceans</li>
<li>Gray</li>
<li>DarkGray</li>
<li>Imagery</li>
<li>ShadedRelief</li>
<li>Terrain</li>
<li>USATopo (Diese Karte wird nur für die USA angeboten)</li>
</ul>
<p>Wenn Ihnen eine der Basiskarten grundsätzlich gut gefällt, diese Ihnen aber zu wenig Informationen bietet, können Sie weitere optionale Ebenen über diese Basisebene einblenden. ESRI bietet speziell für jede Basisebene eine optionale Ebene mit weiteren Informationen.</p>
<h4>Optionale Label Layer</h4>
<p>Label Layer sind optionale Ebenen,
die zusätzliche Textbeschriftungen zu den Basiskarten hinzufügen.
ESRI bietet Ihnen sieben verschiedene optionale Schichten.
Jede Ebene ist speziell für eine Basiskarte kreiert worden. Wenn Sie möchten, können Sie diese aber auch quer Beet kombinieren. Konkret bietet ESRI die Layer</p>
<ul>
<li>OceansLabels:</li>
<li>GrayLabels:</li>
<li>DarkGrayLabels:</li>
<li>ImageryLabels:</li>
<li>ImageryTransportation:</li>
<li>ShadedReliefLabels</li>
<li>TerrainLabels</li>
</ul>
<p>Alle möglichen Basiskarten mit optionalen Ebenen können Sie auch in der
Dokumentation des Leaflet Plugins nachlesen.
Genau finden Sie diese Informationen unter der Adresse
<a href="https://esri.github.io/esri-leaflet/api-reference/layers/basemap-layer.html">https://esri.github.io/esri-leaflet</a><sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>.</p>
<blockquote>
<p>Wenn Sie möchten, können Sie die Anzeige von Basemaps bei höheren Auflösungen auf Retina-Geräten mit der Option <code class="language-text">detectRetina</code> optimal einstellen. Im nachfolgenden Programmcodeausschnitt wird die Basemap auf einem Retina Display in Retina-Auflösungen ausgegeben. Was ein Retina Display ist, habe ich Ihnen im Kapitel <em>Custom Markers</em> in einem Hinweis erklärt. Die <a href="http://leafletjs.com/reference-1.2.0.html#tilelayer-detectretina">Option <code class="language-text">detectRetina</code></a><sup id="fnref-6"><a href="#fn-6" class="footnote-ref">6</a></sup> ist eine Leaflet Funktion.</p>
</blockquote>
<pre class="grvsc-container solarized-light" data-language="" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">...</span></span>
<span class="grvsc-line"><span class="grvsc-source">L.esri.basemapLayer(&#39;DarkGray&#39;, {</span></span>
<span class="grvsc-line"><span class="grvsc-source">detectRetina: true</span></span>
<span class="grvsc-line"><span class="grvsc-source">}).addTo(map);</span></span>
<span class="grvsc-line"><span class="grvsc-source">...</span></span></code></pre>
<p>Wenn Sie die Option <code class="language-text">detectRetina</code> mit <code class="language-text">true</code> belegt haben und ein Website-Besucher Ihre Karte auf einem Geräte mit einem Retina-Display öffnet, wird Leaflet anstelle der Bilddateien zur aktuellen Zoom-Stufe die vierfache Anzahl der Bildkacheln der nächsthöheren Zoom-Stufe anfordern und anzeigen. Wie die Bilddateien für eine Zoom-Stufe berechnet werden, können Sie im Kapitel <em>Wie weiß Leaflet welche Kacheln angezeigt werden sollen</em> nachlesen.</p>
<h3>Ein erstes Beispiel</h3>
<p>Das nachfolgende Beispiel zeigt Ihnen, wie Sie eine ESRI Basiskarte
in Leaflet anzeigen können.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet-debug.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 7);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var gray = L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var graylabels = L.esri.basemapLayer(&#39;GrayLabels&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*gray.setOpacity(0.5);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*gray.on(&#39;load&#39;, alertme);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*function alertme(){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*alert(&quot;Fertig!&quot;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_945.html--&gt;</span></span></code></pre>
<p>Was haben wir gemacht?
Fangen wir mit dem Wichtigen an:
Wichtig ist, dass wir das Skript zum ESRI Leaflet Plugin einbinden.
Ich habe dies mit der Zeile <code class="language-text">&lt;script src="esri-leaflet-debug.js">&lt;/script></code> getan.
Im Echtsystem können Sie die komprimierte Version verwenden,
also <code class="language-text">&lt;script src="esri-leaflet.js">&lt;/script></code>.
Die aktuellste Version dieses Skripts können Sie von der
Adresse <a href="http://esri.github.io/esri-leaflet/download/">http://esri.github.io/esri-leaflet/download</a>
kopieren. Nach dem Einbinden des Plugins haben wir mit der
Zeile <code class="language-text">var gray = L.esri.basemapLayer('Gray').addTo(mymap);</code> das
<code class="language-text">L.esri.basemapLayer</code> Objekt erstellt und es auch sofort zur Karte hinzugefügt.
Zusätzlich haben wir die Karte mit <code class="language-text">gray.setOpacity(0.5);</code> transparent
dargestellt und dem Ereignis <code class="language-text">on('load')</code> die Funktion <code class="language-text">alertme()</code> zugeordnet.
Immer dann, wenn die Karte fertig geladen ist, soll die Funktion <code class="language-text">alertme()</code>
ausgeführt werden.
Genau bedeutet das, dass immer, wenn die Karte fertig geladen ist,
ein Hinweisfenster erscheint. Verschieben Sie die Karte einmal.
Dabei werden Sie sehen, dass das Ereignis <code class="language-text">on('load')</code> auch immer dann,
wenn die Karte erschoben wird, eintritt.</p>
<p>Die beiden nachfolgenden Abbildungen zeigen Ihnen die Basiskarte mit dem Namen
gray – einmal mit und einmal ohne optionale Ebene.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0a9fa2082d13d1b9ba7ce0af597af7c9/46115/943.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKUlEQVQoz12SbbKDIAxF2f/yan1WKwp+6yZ4nDjXOv7IEAK5OSG44zjSPM+p831q6jZ9m9OGYUwxxLQsi9m2bWb7vtv9aZrMiK3revmOy9779Fd+UvmuzN5Fmdq2TSGEFGM0w+cePoKKaT+Oo4k6gsWrvASLLEas6zoT4CJJfd9fPjYMg5HhEwfMBLdtzTQnIa1631myErG6rm0lSXRqWaSIYi700cSEfKcQGQkQiUTCxCSMT0fuUzVZsMrB+aqCIUTSnYokxZ7CtzeMNk3R6S0YCnu1o+GJRgKauIo5Rs3mWVFJiEhIlPf3ky9xE9TYJYwAZPh6AhVh+powItqL1PFRny2IQoVYKfCjPMmIcYb4JahK+hYiUvsaAiSiDrxtzLR5cPrsnLP+A5MoIbtfonETAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Die Basiskarte Gray mit optionale Ebene"
        title="Die Basiskarte Gray mit optionale Ebene"
        src="/static/0a9fa2082d13d1b9ba7ce0af597af7c9/f058b/943.png"
        srcset="/static/0a9fa2082d13d1b9ba7ce0af597af7c9/c26ae/943.png 158w,
/static/0a9fa2082d13d1b9ba7ce0af597af7c9/6bdcf/943.png 315w,
/static/0a9fa2082d13d1b9ba7ce0af597af7c9/f058b/943.png 630w,
/static/0a9fa2082d13d1b9ba7ce0af597af7c9/40601/943.png 945w,
/static/0a9fa2082d13d1b9ba7ce0af597af7c9/78612/943.png 1260w,
/static/0a9fa2082d13d1b9ba7ce0af597af7c9/46115/943.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<hr>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/f2f6c89cf107a87c2b5cb90e505c5604/46115/944.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQoz5WTWxaDIAxE2f/2Wp9FkafoJqaEFg9VbO3HHJCQ6yQAW9cVflkwjhP6juPRD0EcWmlYY7GE2DzP8N4XRXEa0x7m/QwpJeqqRXVvcL/V6NoexhhYa+OYi9aS8rU0Z0RtA4BgpKbuPhLzhBJoL0aWOR+iw1iq1gdnpcQzMSGmCFNKH4L/AmPJbfMqdw9JTq+CNodyUuFQFJxzRXdKqSIk30/70nfsobXm9M+/ys7BNI+nfCXxSi+3a/PtipRi7u0m19bDHHhVUhtMobeSFB4FSQgRxycjxibOO49IEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Die Basiskarte Gray ohne optionale Ebene"
        title="Die Basiskarte Gray ohne optionale Ebene"
        src="/static/f2f6c89cf107a87c2b5cb90e505c5604/f058b/944.png"
        srcset="/static/f2f6c89cf107a87c2b5cb90e505c5604/c26ae/944.png 158w,
/static/f2f6c89cf107a87c2b5cb90e505c5604/6bdcf/944.png 315w,
/static/f2f6c89cf107a87c2b5cb90e505c5604/f058b/944.png 630w,
/static/f2f6c89cf107a87c2b5cb90e505c5604/40601/944.png 945w,
/static/f2f6c89cf107a87c2b5cb90e505c5604/78612/944.png 1260w,
/static/f2f6c89cf107a87c2b5cb90e505c5604/46115/944.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h3>Unterschiedliche Basemaps auswählen</h3>
<p>Im nächsten Beispiel habe ich im HTML-Dokument eine Auswahllist
über der Karte eingefügt.
So können Sie zwischen den verschiedenen ESRI Karten schnell hin und her
wechseln und sich so einen Überblick über das Kartenangebot verschaffen.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet-debug.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;select</span></span>
<span class="grvsc-line"><span class="grvsc-source">*style =&quot;position: absolute;top: 10px;right:10px;z-index: 400;&quot;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*id=&quot;basemaps&quot;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*onChange=&quot;changeBasemap(basemaps)&quot;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Topographic&quot;&gt;Topographic&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Streets&quot;&gt;Streets&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;NationalGeographic&quot;&gt;National Geographic&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Oceans&quot;&gt;Oceans&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Gray&quot;&gt;Gray&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;DarkGray&quot;&gt;Dark Gray&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Imagery&quot;&gt;Imagery&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;ShadedRelief&quot;&gt;Shaded Relief&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;Terrain&quot;&gt;Terrain&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;USATopo&quot;&gt;USATopo	&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;/select&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 7);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var layer = L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*function changeBasemap(basemaps){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var basemap = basemaps.value;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*if (layer) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.removeLayer(layer);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*layer = L.esri.basemapLayer(basemap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.addLayer(layer);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_944.html--&gt;</span></span></code></pre>
<p>Was haben wir genau gemacht?
Hier gibt es nichts weltbewegend Neues.
Eine Auswahlliste haben wir schon oft im Buch verwendet.
Wenn ein Website-Besucher den aktiven Listeneintrag der Auswahlliste ändert,
wird die aktuelle Kartenebene mit <code class="language-text">mymap.removeLayer(layer)</code> entfernt.
Danach wird eine neue Ebene mit der gewünschten Option erstellt –
<code class="language-text">layer = L.esri.basemapLayer(basemap)</code> – und diese wird dann zum Kartenobjekt hinzugefügt
<code class="language-text">mymap.addLayer(layer)</code>.</p>
<p>Im Ergebnis können Sie sich mithilfe der Auswahlliste alle ESRI Karten ansehen.
Oder Sie können es einem Website-Besucher ermöglichen die Karte,
die dieser am schönsten findet, für seine Ansicht zu aktivieren.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/adc989a888b0f17e25bcedcc2b18d7cf/46115/942.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACr0lEQVQozyWSS2/jZBiFs2YzQggJid1s2KERiGFEpwPThqYhjpMmcW52fY3vTmKncZs2TTodSpkfwA9AAokFQgiB+HsPb8LilXz5dL5znvNW/vjzZ9Zbk6q95FNty2eDW54N7hilEXY2prxxubsLWa5sFru58VhtEx4e57x9yHj3ruCXX3/in39/56+/f6Oy/t5DGR/zweGEJwcB772IeHpsoU+qGN5rJkGNMGlg+KfoMmbYZLbUyZcGmxuHS3n25JtuVWkPDqhkpcnTqsX7hxlPXqZ8fBQyslXyXOHqosN1qTGJFMxYxUnamH6DZK6JSIt5MeLHtxnllU061bAmDSrlrcUXap+Pvkl5pjrYscZs1iIMa6RhnfVKx886aOdHnA1eYjg1vEjlcmVyLyg2tz7bbcT61hXBOpWal/PhK4+e0yabNSjLLotlj2KpEc86uHGTLB+J6yp982vcUCFImziBgu0qxFmPRWlwPjmVOaHyydm98POxdo4ylShr4Sd1EWvtOdZ7zxlaxxhube8gSs8ktpydnTHQj7C8Bpr+moEkSKcdKr1kRX3UlB8nFPlg72ooThrdz+mMv8KUW7XzY3HS5vFNhGF9i+crXF8ZzHMNR5gGUZMwUBkbVSr3D74AruILF1/acsLGHrg1kXbjOlO5YOSc4Prfcb8JKIohF9LsUlqO4zZe8D8C2zsVUWVXirMHPbYkktsQAY0gkVjSmCsrMy/6REUXQ5zuWK03OzxNERyxkvdM2vXEYb3zJWr3hezhxiOTFuOkiz1RCKc94agxtmtSxBF2VKM1PNg7N8yqnGsxLXrkhcbVpcnFYigGmrKnNTrGKyorqTuQItJpV9g08SWGG6r0pQh1fIgjkSdpj/nFmEWh82Yb8PhDQn6tM12eM12MiOYdSdGnXLv8B8Q601eHgF2SAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Dieses Bild zeigt die ESRI Basiskarte Imagery."
        title="Dieses Bild zeigt die ESRI Basiskarte Imagery."
        src="/static/adc989a888b0f17e25bcedcc2b18d7cf/f058b/942.png"
        srcset="/static/adc989a888b0f17e25bcedcc2b18d7cf/c26ae/942.png 158w,
/static/adc989a888b0f17e25bcedcc2b18d7cf/6bdcf/942.png 315w,
/static/adc989a888b0f17e25bcedcc2b18d7cf/f058b/942.png 630w,
/static/adc989a888b0f17e25bcedcc2b18d7cf/40601/942.png 945w,
/static/adc989a888b0f17e25bcedcc2b18d7cf/78612/942.png 1260w,
/static/adc989a888b0f17e25bcedcc2b18d7cf/46115/942.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>Shapefiles</h2>
<p>Das Dateiformat Shapefile wurde von der Firma ESRI für die Software ArcView entwickelt.
Shape Dateien sind speziell für die Verarbeitung von Geodaten entwickelt worden.</p>
<h3>Was genau verbirgt sich hinter dem Begriff Shapefile</h3>
<p>Ein <a href="https://de.wikipedia.org/w/index.php?title=Shapefile&#x26;oldid=183295349">Shapefile</a><sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup> ist keine einzelne Datei.
In der Regel handelt es sich um mehrere Dateien,
die zu einem Zip-Archiv zusammengefasst sind.
In diesem Zip-Archiv müssen mindestens die drei nachfolgend genannten
Dateitypen vorhanden sein:</p>
<ul>
<li>Eine Datei mit der Endung <code class="language-text">.shp</code> dient zur Speicherung der Geometriedaten.</li>
<li>Eine Datei mit der Endung <code class="language-text">.dbf</code> enthält Attribute oder Eigenschaften.</li>
<li>Eine Datei mit der Endung <code class="language-text">.shx</code> dient als eine Art Index. Mithilfe dieser Datei sind die Geometriedaten in der Datei <code class="language-text">.shp</code> mit den Eigenschaften in der <code class="language-text">.dbf</code>-Datei verknüpft.</li>
</ul>
<blockquote>
<p>Weitere Informationen zu Shapefiles und wie Sie diese selbst erstellen können,
finden Sie auf der Website
<a href="http://desktop.arcgis.com/de/arcmap/10.3/manage-data/shapefiles/creating-a-new-shapefile.htm">http://desktop.arcgis.com</a><sup id="fnref-7"><a href="#fn-7" class="footnote-ref">7</a></sup>.</p>
</blockquote>
<h3>Wie kommen Sie an ein Shapefiles</h3>
<p>Natürlich können Sie selbst ein Shapefile erstellen.
Das ist aber gar nicht einfach und außerdem nicht Thema dieses Buches.
Einfach ist es aber, an Shapefiles von anderen heranzukommen.
Insbesondere Daten, die von öffentlichem Interesse sind,
werden oft zum Download als Shapefile angeboten.
Suchen einfach einmal in einer Suchmaschine nach Websites, die
den Text <em>Open Data</em> enthalten.</p>
<p>Bei einer Suche nach <em>Open Data</em> in einer Suchmaschine im Internet habe ich
unter anderem das Schienennetz der Deutschen Bahn als Shapefile gefunden:<br>
<a href="http://data.deutschebahn.com/dataset/geo-strecke">http://data.deutschebahn.com/dataset/geo-strecke</a>.
Höchstwahrscheinlich interessieren Sie sich für Daten in der Nähe Ihres Wohnortes.
Dann geben Sie zum Suchbegriff <em>Open Data</em> einfach den Namen einer
Stadt in der Nähe Ihres Wohnortes ein.
Eine Suche nach <em>Open Data</em> in der Nähe von <em>Koblenz</em> hat mich zu einer Website
des Landesvermessungsamtes Koblenz geführt.
Die Website
<a href="https://lvermgeo.rlp.de/de/geodaten/opendata/">https://lvermgeo.rlp.de/de/geodaten/opendata/</a>
informiert über das Angebot des Landesvermessungsamtes -
insbesondere über das Angebot an offenen Daten.
Einige dieser Daten, zum Beispiel die Flurgrenzen, stehen als Shapefile zur Verfügung.</p>
<p>Wenn Sie per Internetsuche keine passenden Daten finden, können Sie auf der
Website von Openstreetmap, insbesondere auf der
Unterseite <a href="https://wiki.openstreetmap.org/w/index.php?title=Shapefiles&#x26;oldid=1640971">https://wiki.openstreetmap.org/wiki/Shapefiles</a><sup id="fnref-8"><a href="#fn-8" class="footnote-ref">8</a></sup>
nach weiteren Anbietern suchen.
Neben weiteren Informationen zum Shapefile Format gibt es hier auch eine Liste mit
Anbietern von Shapefiles.</p>
<blockquote>
<p>Es muss nicht an Ihnen liegen, wenn Sie bei der Arbeit mit Geodaten auf
einen Fehler stoßen.
Insbesondere dann nicht, wenn Sie Daten von anderen in Ihre Arbeit
einbinden. Da das Shapefile Format kompliziert ist, ist es gut, dass
es im Internet Websites gibt, auf denen man eine Shapefile Datei
testen kann. Eine dieser Websites ist
<a href="http://leaflet.calvinmetcalf.com">http://leaflet.calvinmetcalf.com</a><sup id="fnref-8"><a href="#fn-8" class="footnote-ref">8</a></sup>.</p>
</blockquote>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/78b2d4468523151139d234d528329d0b/46115/969.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdElEQVQoz22Ry2sTURTGR9HaLgJuqu6KVNDiUjd24R8gdSeI4EKqaHVREKSolW5c6EZwo4tKNlVsm2rty4YsKgpu1IpW+khMkyZt0plJMpnJYzKT588715XggcO5c+6d73zfd5Rni2sol0OceLDM0bvfOXDxFXvaOtirKPT3DzA3P8/tgZtcu3KD3lO9+DraUcRdZ2enrENDQziOQ6lUwjRNFKMCFwZHUY6c5dCxcxw83Ms+8VBR2jh5/REfl99x9eETBp/7OX3pFmeO9xAKhQiHw4yPj0swy7KoVquyKohYnAvIaV76RPZ2d3Pn6SgvgjMYyTfoiTnc7WnikRmy6V3+F+VyWYIqqXQaVcswMzvH/vYOerq6CM4u0LCTaJtv0bQFsrkZTDWAri3RpI6r6eJnF8MwKBaLuK5LpVL5C+gdvHg5NiYZPr53n6KZI5n+xOZOkHDiPanYFLEfk8TWpnBreVpmgYYAqdXrUrJt2xQKBQmszAvT/X4/5/v6mAgESK1vEA3/Iqp+QI9Pk0gJmdEpND2EkfkqpBmUd1Xccol6o/GP5Ib4Vnw+n2Q2MjIiL4xEktj6Kul0EH1rAqccpKq/htoKjtsksbVFPh6XUr2teqw8qV5ttVoow8PDJBIJ6rUaOeGJYwtzVY2CncIS/uXTATJbk2SMIGZZw0yr2LpGVcjN5XJks1m53WazKQkp+XxeHjwfPNqOmOSKXlU8dKILbG8EWN0JEd9Zwilp5H5vCvYp6Vk2m0HXdSzB1PPSI6VEIhG5Ia9REw0vXZHF3RTbK1/Y/vkZK/wNW02CaZEXKjJimKpniAl7LKtAoVSWfhZthz95D5GuGUtEfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Test eines Shapefiles mithilfe der Website [http://leaflet.calvinmetcalf.com](http://leaflet.calvinmetcalf.com). Das getestet Shapefile `vg2500_geo84.zip` finden Sie in den Beispieldateien."
        title="Test eines Shapefiles mithilfe der Website [http://leaflet.calvinmetcalf.com](http://leaflet.calvinmetcalf.com). Das getestet Shapefile `vg2500_geo84.zip` finden Sie in den Beispieldateien."
        src="/static/78b2d4468523151139d234d528329d0b/f058b/969.png"
        srcset="/static/78b2d4468523151139d234d528329d0b/c26ae/969.png 158w,
/static/78b2d4468523151139d234d528329d0b/6bdcf/969.png 315w,
/static/78b2d4468523151139d234d528329d0b/f058b/969.png 630w,
/static/78b2d4468523151139d234d528329d0b/40601/969.png 945w,
/static/78b2d4468523151139d234d528329d0b/78612/969.png 1260w,
/static/78b2d4468523151139d234d528329d0b/46115/969.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h3>Wie binden Sie Shapefiles in Ihre Leaflet Karte ein?</h3>
<h4>Deutsche Verwaltungsgrenzen als Shapefile in der Leaflet Karte</h4>
<p>Die Shape Datei, die ich im nächsten Beispiel verwende, habe ich von der Website <a href="https://www.arcgis.com/home/item.html?id=ae25571c60d94ce5b7fcbf74e27c00e0">https://www.arcgis.com</a><sup id="fnref-9"><a href="#fn-9" class="footnote-ref">9</a></sup> kopiert. Die Firma ESRI bietet auf dieser Website mit ArcGIS ein Geoinformationssystem, dass die Verwendung, Erstellung und Freigabe von Geodaten einfach macht. Ich habe mir den oben verlinkten Datensatz mit den Verwaltungsgrenzen von Deutschland kopiert. Die Datei landet unter dem Namen <code class="language-text">vg2500_geo84.zip</code> bei mir auf dem Computer.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c21127c3e2a7d5b5489e65cad59d5ae2/46115/970.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxklEQVQoz3WRz04TURTG5y0QNm6gdIu6k0Ub2foMPoBPoAvTNNFiIhGMAq/g0h0kWCegQEF2blBDXBAakum0nZk79+/M57m3vaQ04SS/nG/OnTnznXODQcqQcYGU5QRHlo9gVJO6gDYF1BRcaiT0vlAKuZAQUjmttEGwtPYd1TchFt8eoNLax/zrEAutka62QlToeZ50ZfUA1dV9LFpN3G+2ce/VHmYb3zDXaGOuGWKmESJon1/j2edfqG0c4um7PTzZOkF96xT1T8eob3ZQ+3iImtUW0ra2sn2Kxx+OsLT2A4/Wj/Hw/REerHewvPkTgRr2kPYi8O4VdJqACwEluEMrCUNoKUaZUFLCxu7vGM+//EHz6z+83L3Ai50LREwhOO+c4O/ZGa4vLzHMGHrDlHZCe6HGWmvcFRmXGDABrkswZcCkQVGUCPrdLuKrLhQtVRKa8FF6yvIWNhhdRpLl4DmD4DkKY1w9sCPmYzdFUTgMHVq8thkTjW0MBkNEUURGNH1rbs6CNEkgqaEYI2lczrnDaz/6LYeMOSbDNczSFHEcOye24N1Mh2/ks/0Zo3HNeNQbh4wuot/vOyfe5fTOJpt5fdc6/gNQHdSHFEHlQAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Download eines Shapefiles von der Adresse arcgis.com."
        title="Download eines Shapefiles von der Adresse arcgis.com."
        src="/static/c21127c3e2a7d5b5489e65cad59d5ae2/f058b/970.png"
        srcset="/static/c21127c3e2a7d5b5489e65cad59d5ae2/c26ae/970.png 158w,
/static/c21127c3e2a7d5b5489e65cad59d5ae2/6bdcf/970.png 315w,
/static/c21127c3e2a7d5b5489e65cad59d5ae2/f058b/970.png 630w,
/static/c21127c3e2a7d5b5489e65cad59d5ae2/40601/970.png 945w,
/static/c21127c3e2a7d5b5489e65cad59d5ae2/78612/970.png 1260w,
/static/c21127c3e2a7d5b5489e65cad59d5ae2/46115/970.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Wie ich die Shape Datei mit Leaflet in eine Karte integriere, zeigt Ihnen das nachfolgende Beispiel. Natürlich gibt es dafür auch wieder ein Leaflet Plugin. Die Website zum Plugin <code class="language-text">Leaflet.Shapefile</code> finden Sie auf Github unter der Adresse <a href="https://github.com/calvinmetcalf/leaflet.shapefile">https://github.com/calvinmetcalf/leaflet.shapefile</a>. Die Datei zum Plugin heißt <code class="language-text">leaflet.shpfile.js</code>. Der gleiche Entwickler bietet auch ein Skript zum Analysieren der Shape Datei unter der Adresse <a href="https://github.com/calvinmetcalf/shapefile-js">https://github.com/calvinmetcalf/shapefile-js</a> an. Diese Datei heißt <code class="language-text">shp.js</code>. Diese beiden Dateien müssen Sie in Ihre HTML-Datei einbinden.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;shp.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;leaflet.shpfile.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 6);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.tileLayer(&#39;http://{s}.tile.osm.org/{z}/{x}/{y}.png&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var shpfile = new L.Shapefile(&#39;vg2500_geo84.zip&#39;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*shpfile.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_943.html--&gt;</span></span></code></pre>
<p>Die Zeilen</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">...</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;script src=&quot;shp.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;script src=&quot;leaflet.shpfile.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">...</span></span>
<span class="grvsc-line"><span class="grvsc-source">var shpfile = new L.Shapefile(&#39;vg2500_geo84.zip&#39;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">shpfile.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">...</span></span></code></pre>
<p>zeigen schon alles Notwendige.</p>
<p>Und was haben wir genau gemacht? Im Kopfbereich unserer Beispiel HTML-Datei haben wir zwei Skripte eingebunden. Einmal das Skript <code class="language-text">leaflet.shpfile.js</code> zum Leaflet Plugin und dann das Skript <code class="language-text">shp.js</code> zum Analysieren der Shape Datei. Danach haben wir mit der Zeile <code class="language-text">var shpfile = new L.Shapefile('vg2500_geo84.zip')</code> eine Ebene mit den Daten der Shape Datei erstellt. Zum Schluss haben wir diese Ebene zum Kartenobjekt hinzugefügt: <code class="language-text">shpfile.addTo(mymap)</code>.</p>
<p>Als Ergebnis sehen Sie nun alle Verwaltungsgrenzen, also die reinen Geometrien. Eigenschaften, die in der Shape Datei enthalten sind, werden in diesem Beispiel noch nicht angezeigt. Das Anzeigen von Eigenschaften und das Zuordnen anderer Stile habe ich für das nächste Beispiel aufgehoben.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3a787d557bdcd0146ab9c144c7752c86/46115/967.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQoz12Sy27TQBSG+2KIJ2DHnh1r3oE1rBCLbtjBNmkT2kaUglSiNNSX8SW+JL6O7SR2nKRRN0Wgn99uQUoXo5GOx998c/5zcOm6ONY09DUdfV3HkaLBi2bwAh9HqtbW+vw+NE381A3sFhKq5+JUF5jMplhmKTbzDJtyjs0yx8HXyeQeyB973E8Itj0H8dRrQU29q6kY6h4UxcJI2O2ZAdcqibEmsC6yFrqtChxc7AF15HEIQ5jwDR2aZaDL+okq8OpjjZcfdjg8zyBlgCyNMU8jLHm+lglKSTih/4GN3ZkQCIMpfhgmFo7A3NbxTVNwfuHh+fs7PHv3C687O2yLGHWeouSqZIo1DSspsc6zfcPPD5YD9kcxBEbs4XJi4FMvwZM3fwi8Q/eyRN2Y0XC9yFFltMsirBp4kT5+8r3pKaFjQlPfwy4JkM5ivDi8xdO3vxlMhhuGVkU0yyVWRWOZYEv4qpD7wH9J97hGTHUVhW3jN9zFOMSVViBzWAtClHGMKolQ0rSaRogCXvIY2HsYkWNFQXd8jTwMsGOj6zBC7tpY+hZUBlanEvMZAWnSBiIZTJ/jNmLv94DN3JksFr6LKQ03tPMdB9+bwBQBw7QgLBtDYUF6AS0j3PDZV7aNzrWCL2TsAxUVDg1u2fQtnxA4Ewxo2lFVjPjTGVuiWxbGnAbLdtnbKSxeaDNA3+Zk8Pl/AWUQtZ+MindtAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Eine Karte auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird."
        title="Eine Karte auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird."
        src="/static/3a787d557bdcd0146ab9c144c7752c86/f058b/967.png"
        srcset="/static/3a787d557bdcd0146ab9c144c7752c86/c26ae/967.png 158w,
/static/3a787d557bdcd0146ab9c144c7752c86/6bdcf/967.png 315w,
/static/3a787d557bdcd0146ab9c144c7752c86/f058b/967.png 630w,
/static/3a787d557bdcd0146ab9c144c7752c86/40601/967.png 945w,
/static/3a787d557bdcd0146ab9c144c7752c86/78612/967.png 1260w,
/static/3a787d557bdcd0146ab9c144c7752c86/46115/967.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Deutsche Verwaltungsgrenzen mit Optionen</h4>
<p>Im nächsten Beispiel sehen Sie, wie Sie das Aussehen der Formen in der Shape Datei beeinflussen könne.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;shp.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;leaflet.shpfile.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 6);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.tileLayer(&#39;http://{s}.tile.osm.org/{z}/{x}/{y}.png&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var shpfile = new L.Shapefile(&#39;vg2500_geo84.zip&#39;,</span></span>
<span class="grvsc-line"><span class="grvsc-source"> {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*style:function(feature)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*{</span></span>
<span class="grvsc-line"><span class="grvsc-source">*return {color:&quot;black&quot;,fillColor:&quot;red&quot;,fillOpacity:.75}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*shpfile.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_942.html--&gt;</span></span></code></pre>
<p>Das vorhergehende Beispiel manipuliert die Option <code class="language-text">style</code>.
Die Belegung der Option <code class="language-text">style</code> mit
<code class="language-text">color:"black",fillColor:"red",fillOpacity:.75</code> färbt die Grenzen
der Shape Datei schwarz und füllt die Formen mit der Farbe Rot –
bei einer Transparenz von 75 Prozent.</p>
<p>Das rot gefärbte Deutschland können Sie sich in der nächsten Abbildung ansehen.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8e499dff9d320955ade95273d6d0f10a/46115/968.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQoz12TyW7TUBSG8wx9B3gW2CG28EYs2CEk1O5hAR2SKoNKqCoqaON5SmxfD/EUx7FdumD789sISlj8OlfH937nv+dcD7QgwEQ3MO1kUJoOXfiQXZd5HWPq29KB5FCGhZ9lDoffp2qXX6IqUtxXGzRlgZYazG0bp7KMoaL0+rSQ4IYegsDFsSRjxNyxJOHG9aGtBHYEXBkmzhUVSRRil67RMne3zdFSPfCMh0aq2sdr04RhWRB0NdO0PndCnR8eYfzuCKdnI8xth/sMbDtgHKHOEuySmA6zB+BQVfqq1TqEzGv7mgTPZBG6mVzMMTw4wPfBAF9fvkD5o0aTRii4t4xD1IT9cfoApCZ0JNPZJftZrAxE2gLXtgvj1WtEhIXU8ukT5AUdEVj3sQNljFzT6d6VR3R5wn5O6PRK1SAxV68TmG/ewiFsRfkf3qPOc2zDAA0dVVmMbRahSmNU+fo/oKL2caxo0A0dO+Gh5ZW2SQTl2XN4jx5DTCdsC0EiREtHFR1u/AB3hNf/Xvm3Q/XvEKaEF0Kg5YFGBEgdD3EgkC59NGGEDddlKPph1GEMxbKRsPgecEjIZ8ZLana7wIZTbLI1Eo995KAiTvZa1pB0QBbZJSzGgiu+y498bjNJ2Qd2/VtyIPehj9JdoY4EFuzlqNvMh3xD6NK28IVQ3/RQ8qdo6PCWj/+C5xeOhV8636uV0Woa8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel wurden die Farben geändert."
        title="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel wurden die Farben geändert."
        src="/static/8e499dff9d320955ade95273d6d0f10a/f058b/968.png"
        srcset="/static/8e499dff9d320955ade95273d6d0f10a/c26ae/968.png 158w,
/static/8e499dff9d320955ade95273d6d0f10a/6bdcf/968.png 315w,
/static/8e499dff9d320955ade95273d6d0f10a/f058b/968.png 630w,
/static/8e499dff9d320955ade95273d6d0f10a/40601/968.png 945w,
/static/8e499dff9d320955ade95273d6d0f10a/78612/968.png 1260w,
/static/8e499dff9d320955ade95273d6d0f10a/46115/968.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Ein Pop-up-Fenster</h4>
<p>Schön wäre es, wenn man für jede Verwaltungseinheit den Namen in einem Pop-up Fenster angezeigt bekommen würde – und zwar genau dann, wenn man die Fläche auf der Karte anklickt. Im nächsten Beispiel sehen Sie, wie Sie dies umsetzen können.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;shp.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;leaflet.shpfile.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 5);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.tileLayer(&#39;http://{s}.tile.osm.org/{z}/{x}/{y}.png&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var shpfile = new L.Shapefile(</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&#39;vg2500_geo84.zip&#39;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">*{</span></span>
<span class="grvsc-line"><span class="grvsc-source">*onEachFeature:function(feature, layer)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*{</span></span>
<span class="grvsc-line"><span class="grvsc-source">*layer.bindPopup(feature.properties.GEN);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> shpfile.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;-- index_941.html --&gt;</span></span></code></pre>
<p>In diesem Beispiel haben wir die Option <code class="language-text">onEachFeature</code> verwendet. Wir haben dieser Option eine anonyme Funktion zugeordnet in der wir jedem Feature in der Shape Datei mithilfe von <code class="language-text">layer.bindPopup(feature.properties.GEN)</code> ein Pop-up Fenster zugewiesen haben. Im Pop-up Fenster erscheint der Text, der bei dem Feature im Attribut <code class="language-text">GEN</code> als Eigenschaft eingetragen ist. Wenn Sie sich nun fragen, woher Sie wissen können, dass es als Eigenschaft ein Attribut <code class="language-text">GEN</code> gibt, dann warten Sie bis zum nächsten Beispiel. Dort werde ich Ihnen zeigen, wie Sie alle Optionen auslesen können.</p>
<p>Probieren Sie aber zunächst dieses Beispiel selbst aus. Öffnen Sie die Karte und klicken Sie einen Landkreis an. Wie in der nachfolgenden Abbildung zu sehen ist, sollte sich auch auf Ihrer Karte ein Pop-up Fenster öffnen.</p>
<p>Auf diese Art und Weise können Sie auch
das Aussehen einer Form, abhängig vom Wert eines Attributes
gestalten.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e8af2bc121c44cb5a5372b3de8a0c9a2/46115/966.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVQoz12Sy27TYBCF+3BsWPUpeBEkxIYFAh6ANYvQ0qRtEiiKqoZCfPvtXHz/fYnjJI7tqJtIZXE4ToRKWByNNB5/c2b+ORFhiK5podfIooQJM/ChuS7zJq6pe3sG1XGgTWfYFTlmvo+e0eRtFPkcD8US1SpHTZ18n07xRdPQ1vW9PisqXOkhDF2cqRo6zJ3z+50Y414RyKIAt+MxLjUDaSSxmSeoCd2uF6ipPfCCP3UMYx+HLLYmEwR01RcCbeZbqgrLcbFOJXwZYmg7uGPdugHGEcosxSaN6TB7ArYNHZe6gSKR0Di2L1R4E4ELYeDbLwMvWwXedGpcjXJsMkIWKXLWrmKJkrC/Tp+AVJeONDobcJ+5Y0FaOhRNRfvKx+mHR5y+3+H1+RZFGqKYxygJOIAyRrqk06ORO8ZhX106vTUERgQ/eDN0BzGevf2N5+8e8UNfYJtEHDdCRWCRxVjTcdOgWCT/AXVjH691AdMysQk8VBypSiO8+lTixccdDDNFzXwh6YyOCjpc+iG2hJf/jnxweHiYM6pHeB4EqDlKFXDEqYM1TyybsUkUYxkGWMlg/xiljKFPpkjZ/AjYJuSGcUD1RwqWfMUqS5B6HgTvMRxbGOomUimxZJNNmqCiQ5t32+K59VX9GNjsz272FvpYuQ5K3pzCXXZ4Nn0e8k9hwWb9gFB/4mFFxw1QYbOvmo4Rv/0B9li4IiUasekAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel wird der Name der Verwaltungseinheit angezeigt, wenn man mit der Maus die entsprechende Form anklickt."
        title="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel wird der Name der Verwaltungseinheit angezeigt, wenn man mit der Maus die entsprechende Form anklickt."
        src="/static/e8af2bc121c44cb5a5372b3de8a0c9a2/f058b/966.png"
        srcset="/static/e8af2bc121c44cb5a5372b3de8a0c9a2/c26ae/966.png 158w,
/static/e8af2bc121c44cb5a5372b3de8a0c9a2/6bdcf/966.png 315w,
/static/e8af2bc121c44cb5a5372b3de8a0c9a2/f058b/966.png 630w,
/static/e8af2bc121c44cb5a5372b3de8a0c9a2/40601/966.png 945w,
/static/e8af2bc121c44cb5a5372b3de8a0c9a2/78612/966.png 1260w,
/static/e8af2bc121c44cb5a5372b3de8a0c9a2/46115/966.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Ein Pop-up-Fenster mit allen Informationen des Features</h4>
<p>Sie wissen nicht, welche Eigenschaften in der Shape Datei genau für die
Geometrien enthalten sind – Sie möchten sich aber gerne einen Überblick über
diese Eigenschaften verschaffen. Das nächste Beispiel zeigt Ihnen,
wie Sie die Informationen nur mit JavaScript in Erfahrung bringen können.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;shp.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;leaflet.shpfile.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 5);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.tileLayer(&#39;http://{s}.tile.osm.org/{z}/{x}/{y}.png&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var shpfile = new L.Shapefile(</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &#39;vg2500_geo84.zip&#39;,</span></span>
<span class="grvsc-line"><span class="grvsc-source"> {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*onEachFeature:function(feature, layer)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*{</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var holder=[];</span></span>
<span class="grvsc-line"><span class="grvsc-source">*for (var key in feature.properties){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*holder.push(key+&quot;: &quot;+feature.properties[key]+&quot;&lt;br&gt;&quot;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*popupContent=holder.join(&quot;&quot;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*layer.bindPopup(popupContent);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}});</span></span>
<span class="grvsc-line"><span class="grvsc-source">*shpfile.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_940.html--&gt;</span></span></code></pre>
<p>Für die Beantwortung dieser Fragestellung nutzen wir auch
wieder die Option <code class="language-text">onEachFeature</code>.
In dieser Option erstellen wir eine Variable, genau ein Array, mit dem Namen
<code class="language-text">holder</code>. Als nächstes durchlaufen wir in einer Schleife alle Schlüssel,
die in den Eigenschaften der Shape Datei, also in <code class="language-text">feature.properties</code> enthalten sind.
Wir fügen mit
<a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/push"><code class="language-text">push()</code></a><sup id="fnref-10"><a href="#fn-10" class="footnote-ref">10</a></sup>
jeden Eintrag in das Array <code class="language-text">holder</code> ein und separieren diesen von dem
nächsten Eintrag mit
<a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/join"><code class="language-text">join()</code></a><sup id="fnref-11"><a href="#fn-11" class="footnote-ref">11</a></sup>.
Den Text mit allen Schlüssel-Wert-Paaren fügen wir am Schluss als Pop-up
Text zum Layer hinzu.</p>
<p>Als Ergebnis sehen Sie alle möglichen Schlüssel-Wert-Paare
in einem Pop-up Fenster über Ihrer Karte, sobald Sie eine Fläche anklicken.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/d2fa638196ae7abe74ab5d0cfa95722f/46115/965.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDElEQVQoz12TW2/TQBCF+0f5J/yP8sArb4imbVI1CVBFoRFVfFtfEju+xbfYju04rQQqQurpcQoq4eFo5Nndb87Mrk9EEGCoGxh1MiihQ/c9KKsV8zquqe/2EpLjQLaW+LnNsfQ8jLQub6PKUzxUBXZljpY6uVkscKEo6KvqQWeSjFXoIghW6MkKBsx1UbJMGIaOOg0xNS1cKRqSdcjvGC2h++0GLXUAXvLQQNMOcWbyoGXBp6uxEMwxryk4++ai98XB5a3ADcEzQrcdMFqjyRLUSUSH2Suwr6m44uEqDqGwbU/IcC2Bc67d6iYu5D0+zn9BDu7RFAmaTYKce8soREPYX6evQGpIRwqdTTjP3DEQmSqmdzJS08F9FePpR4mn34/YbjJUKZ0V6R9QxkiXdHrU8oAuzznPIZ1ONQGJ4JoFlpqH03GDd+MalhOjideHdnd0VGURttmaBSJUm/g/oKod4rUqoHNOle+ijQIejvD2Q4s37x8haSla5quQzuioosPCC7AnvPm35ReHLxfTo0aE576Plq3s/ADN0kYd+tjYLnYsUAQ+Sn53l9GEEVRrgYTzPAL2CfnKOKHGcwlF11YWI3FdCL7HwDQwU3UkYYiCReokxo4Obb7bT3xuY1k9Bnbzszm3h8BDuXLQrH22KDCQuZkP+U4YsLl/QqhnuSj5U3RAicU+KyrmXHsGQ6y8DqzX42UAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel werden alle Informationen zur Verwaltungseinheit angezeigt, wenn man mit der Maus die entsprechende Form anklickt."
        title="Eine Karte, auf der ein Shapefile, dass die deutschen Verwaltungsgrenzen enthält, angezeigt wird. In diesem Beispiel werden alle Informationen zur Verwaltungseinheit angezeigt, wenn man mit der Maus die entsprechende Form anklickt."
        src="/static/d2fa638196ae7abe74ab5d0cfa95722f/f058b/965.png"
        srcset="/static/d2fa638196ae7abe74ab5d0cfa95722f/c26ae/965.png 158w,
/static/d2fa638196ae7abe74ab5d0cfa95722f/6bdcf/965.png 315w,
/static/d2fa638196ae7abe74ab5d0cfa95722f/f058b/965.png 630w,
/static/d2fa638196ae7abe74ab5d0cfa95722f/40601/965.png 945w,
/static/d2fa638196ae7abe74ab5d0cfa95722f/78612/965.png 1260w,
/static/d2fa638196ae7abe74ab5d0cfa95722f/46115/965.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>ESRI Services</h2>
<p>Sie wissen nun wie Sie eine ESRI Basiskarte laden,
wie Sie mit dem Plugin ESRI-Leaflet grundsätzlich umgehen und wie Sie Dateien
im Format Shapefile nutzen können.</p>
<p>ESRI bietet aber noch eine ganze Menge mehr.
Sie können ArcGIS Server-Web-Services nutzen.
Das ESRI Plugin unterstützt Sie auch bei der Verbindung mit einem
Web Service, der sich auf einer ArcGIS Server-Website befindet und
für Client-Anwendungen zur Verfügung gestellt wird.
Mit einem ArcGIS Web Service kann entweder eine weitere
<a href="http://esri.github.io/esri-leaflet/api-reference/#layers">Ebene</a>
für eine Karte zur Verfügung gestellt oder eine bestimmte
<a href="http://esri.github.io/esri-leaflet/api-reference/#tasks">Aufgabe</a> bearbeitet werden.</p>
<p>Eine Ebene kann dabei neben dem</p>
<ul>
<li><code class="language-text">L.esri.BasemapLayer</code>, den Sie ja schon kennengelernt haben,</li>
<li>ein <code class="language-text">L.esri.DynamicMapLayer,</code></li>
<li>ein <code class="language-text">L.esri.ImageMapLayer</code>,</li>
<li>ein <code class="language-text">L.esri.RasterLayer</code>,</li>
<li>ein <code class="language-text">L.esri.TiledMapLayer</code>,</li>
<li>ein <code class="language-text">L.esri.FeatureLayer</code>,</li>
<li>ein <code class="language-text">L.esri.Cluster.FeatureLayer</code> oder</li>
<li>ein <code class="language-text">L.esri.Heat.FeatureLayer</code> sein.</li>
</ul>
<p>Eine Aufgabe könnte das Einschränken der Anzeige auf bestimmte Objekte mit
<code class="language-text">L.esri.Query</code> sein oder das Zuordnen von Adressen zu Koordinaten mit <code class="language-text">L.esri.Geocoding</code>.</p>
<p>Im nächsten Kapitel beginnen wir damit,
das wir eine Ebene, nämlich einen <code class="language-text">L.esri.DynamicMapLayer</code>,
mithilfe eines Web Services nutzen.
Wenn Sie dieses Beispiel durchgearbeitet haben,
können Sie alle anderen Layer ebenfalls verwenden.
Die Vorgehensweise ist bei jedem einheitlich.
Der einzige Unterschied besteht im Angebot der möglichen Methoden und Optionen.
Da aber die Dokumentation zum Plugin sehr gut ist,
dürfte dies keine Schwierigkeit darstellen.
Die Dokumentation zu den Layern finden Sie unter der Adresse
<a href="http://esri.github.io/esri-leaflet/api-reference/#layers">http://esri.github.io/esri-leaflet/api-reference/#layers</a>.</p>
<h3>L.esri.DynamicMapLayer</h3>
<p>Für das nachfolgende Beispiel habe ich Daten des
<a href="http://www.stadt-koeln.de/politik-und-verwaltung/geoportal/">Geoportals Köln</a><sup id="fnref-12"><a href="#fn-12" class="footnote-ref">12</a></sup> genutzt.
Dieses Portal bietet den Zugriff auf offene Daten, Dienste und Anwendungen
verschiedener Herkunft. Das Geoportal Köln zentralisieren nach eigenen Angaben
Informationen aus den Bereichen Umwelt, Verkehr, Vermessung und Planung.
Jeder hat die Möglichkeit die Geodaten des Geoportal Köln zu nutzen,
anzusehen und zu analysieren. Informationen zum Geoportal Köln finden Sie auf der
Website der <a href="http://www.stadt-koeln.de/politik-und-verwaltung/geoportal/">Stadt Köln</a><sup id="fnref-12"><a href="#fn-12" class="footnote-ref">12</a></sup>.
Die Dokumentation zur Schnittstelle des Web Services finden Sie unter
der Adresse <a href="https://geoportal.stadt-koeln.de/arcgis/">https://geoportal.stadt-koeln.de/arcgis/</a>.
Wenn Sie dann auf den Eintrag <em>Behindertenparkplätze</em> klicken sehen Sie die Angaben,
die speziell unser nachfolgendes Beispiel betreffen.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.97264, 7.00469], 12);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var url =</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&quot;https://geoportal.stadt-koeln.de/arcgis/rest/services/Behindertenparkplaetze/MapServer&quot;;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var dMap = L.esri.dynamicMapLayer({</span></span>
<span class="grvsc-line"><span class="grvsc-source">*url: url,</span></span>
<span class="grvsc-line"><span class="grvsc-source">*opacity : 0.25,</span></span>
<span class="grvsc-line"><span class="grvsc-source">*useCors: false</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*dMap.bindPopup(</span></span>
<span class="grvsc-line"><span class="grvsc-source">*function(err, featureCollection, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*return featureCollection.features[0].properties.Bezeichnung +</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&#39;&lt;br&gt;Anzahl: &#39; +</span></span>
<span class="grvsc-line"><span class="grvsc-source">*featureCollection.features[0].properties.Anzahl;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_939.html--&gt;</span></span></code></pre>
<p>Als erstes haben wir im vorherigen Beispiel das Skript zum Esri Leaflet Plugin
eingebunden. Als nächstes haben wir die URL, unter welcher der betreffende Service
angeboten wird, in die Variabel <code class="language-text">url</code> gespeichert.
Danach haben wir mit dem Code</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">var dMap = L.esri.dynamicMapLayer({</span></span>
<span class="grvsc-line"><span class="grvsc-source">url: url,</span></span>
<span class="grvsc-line"><span class="grvsc-source">opacity : 0.25,</span></span>
<span class="grvsc-line"><span class="grvsc-source">useCors: false</span></span>
<span class="grvsc-line"><span class="grvsc-source">}).addTo(mymap);</span></span></code></pre>
<p>ein <code class="language-text">L.esri.dynamicMapLayer</code>-Objekt erstellt und diesem gleichzeitig Optionen
übergeben. Unter anderem die URL. Zuletzt haben wir dann mit dem Code</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">dMap.bindPopup(</span></span>
<span class="grvsc-line"><span class="grvsc-source">function(err, featureCollection, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">return featureCollection.features[0].properties.Bezeichnung +</span></span>
<span class="grvsc-line"><span class="grvsc-source">&#39;&lt;br&gt;Anzahl: &#39; +</span></span>
<span class="grvsc-line"><span class="grvsc-source">featureCollection.features[0].properties.Anzahl;</span></span>
<span class="grvsc-line"><span class="grvsc-source">});</span></span></code></pre>
<p>jedem Feature ein Pop-up hinzugefügt und in dieses Pop-up die Eigenschaften
<code class="language-text">Bezeichnung</code> und <code class="language-text">Anzahl</code>
als Text eingetragen.
Welche Eigenschaften Ihnen ein Web Service zur Verfügung stellt,
finden Sie in der Dokumentation zum jeweiligen Service.
Die Adresse zur Dokumentation des hier verwendeten Services hatte
ich Ihnen weiter oben schon genannt.</p>
<p>Die nachfolgende Abbildung zeigt Ihnen alle
– im Web Service Behindertenparkplätze des Geoportals Köln eingetragenen – Parkplätze.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/edeeefe20a319f34b4ea91e3f6c82613/46115/938.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz11S0U7DMAzc/38UT4CQeBgCBqxaGVuXNLaTbPuCw3abMvHgWmmc8/nOq1IKaq24Xq+4XC4eV42cCyix/7f7Vpdz9nw+n6davW9h51UpFSLiDy5aZECJBOM46v+MECKY2SOl5NlAG/D/WBmygVmc9QdLRT/k6awNiMhBLJcZyM4NwGosFkB7aAWWjYE9kDwVirINUVmJNahI/Dd2i9a4gTtDu6BEPmp2rYqPHqniOATEMTk4sUqhNZYba8sG1DRemZB2yFmcAXFWYHbQ7iD4ORG+90f0R8bhxNgdSINd31uWy8j2sS6iF9bJwEIkHALj41vw0RO2fcDXXlnJpHXRNzSbY4beGuQjs44Qkvjlz0DY9Ix1J3h4Yzy+BpxGVobKpKpJatowlsXIpmHTcXF5iBnHqMD6+KVj3L8J7taM5010djYyq1lhNEmys7zdz0VDQ/aR5120n51q9LQRj5dPZRgSpjrR1dJt4AnQ9K83wO5y07A5VWaXY8p43zG2+4QYR3f2FMgbkxpCludlT7ohMUZ3/Rf5UTcJcjZDIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Eine Karte auf der die Behindertenparkplatze in der Stadt Köln mithilfe eines Webservices angezeigt werden. Sie können Informationen zum Parkplatz in einem Pop-up einsehen."
        title="Eine Karte auf der die Behindertenparkplatze in der Stadt Köln mithilfe eines Webservices angezeigt werden. Sie können Informationen zum Parkplatz in einem Pop-up einsehen."
        src="/static/edeeefe20a319f34b4ea91e3f6c82613/f058b/938.png"
        srcset="/static/edeeefe20a319f34b4ea91e3f6c82613/c26ae/938.png 158w,
/static/edeeefe20a319f34b4ea91e3f6c82613/6bdcf/938.png 315w,
/static/edeeefe20a319f34b4ea91e3f6c82613/f058b/938.png 630w,
/static/edeeefe20a319f34b4ea91e3f6c82613/40601/938.png 945w,
/static/edeeefe20a319f34b4ea91e3f6c82613/78612/938.png 1260w,
/static/edeeefe20a319f34b4ea91e3f6c82613/46115/938.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h3>Geocoding</h3>
<p>Was ist <a href="https://de.wikipedia.org/w/index.php?title=Georeferenzierung&#x26;oldid=174938538">Geocoding</a><sup id="fnref-13"><a href="#fn-13" class="footnote-ref">13</a></sup>?
Geocoding bezeichnet die Umwandlung von Adressen wie <em>'Kirchstraße 13, 56571 Muster'</em>
in geografische Koordinaten wie <em>'50.423021 Breite'</em> und <em>'7.083739 Länge'</em>.
Nur so können Sie nämlich einen Marker auf einer Karte platzieren oder
die Karte an einer bestimmten Adresse zentriert öffnen.</p>
<blockquote>
<p>Nicht nur ESRI bietet Geocoding Dienste an. Auch OpenStreetMap bietet
Ihnen diesen Service. <a href="https://nominatim.openstreetmap.org">Nominatim</a><sup id="fnref-14"><a href="#fn-14" class="footnote-ref">14</a></sup>
ist eine Anwendung, mithilfe derer OpenStreetMap Daten anhand von
Texten durchsucht werden können. Diese Texte sind in der Regel eine
Adresse oder ein Teil einer Adresse. Falls der Suchtext mit einer
Eigenschaft eines OpenStreetMap-Objektes, übereinstimmt, wird die Koordinate zu
diesem Objekt auf eine Suchanfrage hin zurückgegeben.</p>
</blockquote>
<blockquote>
<p>Da Nominatim auf OpenStreetMap Daten beruht,
können Sie sich nicht darauf verlassen, dass alle Adressen
eingetragen sind. OSM ist keine kommerzielle Firma, sondern ein
Projekt das auf der Mitarbeit von Freiwilligen beruht. Dafür können
Sie aber selbst Einfluss auf den Datenbestand nehmen. Bei
OpenStreetMap kann jeder mitmachen:
<a href="http://wiki.openstreetmap.org/wiki/DE:Getting_Involved">http://wiki.openstreetmap.org/wiki/DE:Getting_Involved</a><sup id="fnref-15"><a href="#fn-15" class="footnote-ref">15</a></sup>.
Ein Pluign, dass unter anderem Nominatim als Service nutze, ist das Plugin
<a href="https://github.com/perliedman/leaflet-control-geocoder">Leaflet Control Geocoder</a><sup id="fnref-16"><a href="#fn-16" class="footnote-ref">16</a></sup>. Dieses sehen wir uns im nächsten Kapitel an.</p>
</blockquote>
<p>Ich zeige Ihnen in diesem Kapitel anhand des
<a href="https://github.com/Esri/esri-leaflet-geocoder">ESRI Leaflet Geocoder Plugins</a><sup id="fnref-17"><a href="#fn-17" class="footnote-ref">17</a></sup> folgendes:</p>
<ul>
<li>Ich zeige Ihnen, wie Sie eine Adresse in eine Koordinate umwandeln können.</li>
<li>Ich zeige Ihnen, wie Sie eine Koordinate in eine Adresse umwandeln können.</li>
<li>Ich zeige Ihnen, wie Sie eine Karte so öffnen können,
dass eine bestimmte Adresse zentriert angezeigt wird.</li>
</ul>
<h4>Nach Eingabe einer Adresse den passenden Ort auf der Karte finden</h4>
<p>Sie zeigen eine Karte auf Ihrer Website an und möchten es anderen ermöglichen,
zu einer bestimmten Adresse auf der Karte zu navigieren, nachdem Sie diese Adresse
in einem Textfeld eingetragen haben. Dann integrieren Sie doch einfach ein ESRI
Leaflet Geocoder Control in Ihre Karte. Wie Sie dies tun können zeigt Ihnen das
nächste Beispiel.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;link rel=&quot;stylesheet&quot; href=&quot;esri-leaflet-geocoder.css&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet-geocoder.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 300px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.97264, 7.00469], 12);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var searchControl = L.esri.Geocoding.geosearch().addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var results = L.layerGroup().addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*searchControl.on(&#39;results&#39;, function(data) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*results.clearLayers();</span></span>
<span class="grvsc-line"><span class="grvsc-source">*for (var i = data.results.length - 1; i &gt;= 0; i--) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*results.addLayer(L.marker(data.results[i].latlng));</span></span>
<span class="grvsc-line"><span class="grvsc-source"> }</span></span>
<span class="grvsc-line"><span class="grvsc-source"> });</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_938.html--&gt;</span></span></code></pre>
<p>Zur Darstellung des Textfeldes für die Eingabe der Adresse ist es notwendig zwei
weitere Skripte einzubinden.
Neben dem Skript <code class="language-text">esri-leaflet.js</code> sollten Sie auch noch die Dateien
<code class="language-text">esri-leaflet-geocoder.css</code> und <code class="language-text">esri-leaflet-geocoder.js</code>
in Ihr HTML-Dokument einbinden.
Die notwendigen Dateien hierfür finden Sie unter der
Adresse <a href="https://github.com/Esri/esri-leaflet-geocoder">https://github.com/Esri/esri-leaflet-geocoder</a>.
Als nächstes wird dann mit
<code class="language-text">var searchControl = L.esri.Geocoding.geosearch().addTo(mymap);</code>
das Eingabefeld für die zu suchende Adresse erstellt und zur Karte hinzugefügt.
Dieses Eingabefeld nennt Leaflet auch Control.
Wir brauchen eine Ebene, die die Suchergebnisse richtig verarbeitet.
Diese erstellen wir mit der Zeile <code class="language-text">var results = L.layerGroup().addTo(mymap);</code>.
Zum Schluss können wir dann das Ereignis <code class="language-text">on("results")</code>
des Objektes <code class="language-text">searchControl</code> mit einer Funktion belegen.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">searchControl.on(&#39;results&#39;, function(data) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">results.clearLayers();</span></span>
<span class="grvsc-line"><span class="grvsc-source">for (var i = data.results.length - 1; i &gt;= 0; i--) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">results.addLayer(L.marker(data.results[i].latlng));</span></span>
<span class="grvsc-line"><span class="grvsc-source">}</span></span>
<span class="grvsc-line"><span class="grvsc-source">});</span></span></code></pre>
<p>Wenn es neue Suchergebnisse gibt, dann werden alle alten Suchergebnisse von
der Ebene entfernt und die neuen Suchergebnisse als Marker auf der Ebene platziert.</p>
<blockquote>
<p>Ihre Adresse wird
nicht auf der Karte gefunden? Das ESRI Leaflet Geocoder Control
findet mithilfe der <a href="http://esri.github.io/esri-leaflet/api-reference/controls/geosearch.html">Methode <code class="language-text">geosearch()</code></a><sup id="fnref-18"><a href="#fn-18" class="footnote-ref">18</a></sup>
standardmäßig nur Adressen, die aktuell auch sichtbar auf der Karte
sind. Erst wenn Ihre - sicher vorhandene - Adresse auch bei einer Zoom-Stufe von 0 nicht
gefunden wird, stimmt etwas nicht. Falls Sie lieber sofort die ganze
Welt durchsuchen möchten, dann sollten Sie die Option
<code class="language-text">useMapBounds</code> des Objektes, das Ihnen die Funktion <code class="language-text">L.esri.Geocoding.geosearch()</code>
liefert, mit <code class="language-text">false</code> belegen.</p>
</blockquote>
<p>Die erste Ansicht der Karte nach dem Hinzufügen des ESRI Leaflet Geocoder Control
Plugins ist nicht spektakulär.
Sie sehen in der linken oberen Ecke eine kleine Lupe.
Wenn Sie diese anklicken, öffnet sich ein Textfeld.
In dieses Textfeld können Sie nun die Adresse eingeben,
nach der Sie suchen möchten.
Standardmäßig werden Ihnen alternative Eingaben vorgeschlagen.
Sie können das Verhalten des Plugins mit vielen Optionen beeinflussen.
Sehen sich die Dokumentation unter Adresse
<a href="http://esri.github.io/esri-leaflet/api-reference/controls/geosearch.html">http://esri.github.io/esri-leaflet/api-reference/controls/geosearch.html</a> an.
Vielleicht ist da sogar eine Option dabei, auf die Sie selbst nicht gekommen wären,
die sie aber als nützlich ansehen.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a0fb94013d7b37745846cf575aed8552/46115/937.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQoz2VTyZbDIAzj/z+xp3aaEPblvd49yIkYmjmoDiAL2aYmpSSlNumfj7TepbWmSCmLd0H62CulSM5Zo/JHrLUqD+cE1iZYK+nxkPJ8SgtB8iDHGMXa44y7lTD2AeecRohS+A7Th2rx/sRFAjkPh7jx/d7+CeGbAnAKTEH8hOEEzpzzXyUh2v3QcrFeyyZ4xhyD2nEAsRCiEgiQ9lEyHGKNFhBw6b3XuF5mUBbJiCwJQ8Eekl6vn9lHitxdfpd8EXDTmkTBbdtnIpOZA846IC35XgrFECG2XsgntGIdjAqyVIrwVnxjKCmd+6WWi/fniI5nD1kme5hzmWsADjEU8CZH3RZ9VquwTpn94KQIOoTYcT1yvATt63DoQ5zn2LfjD4J+/wJAeDuYaq0CkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Nach Eingabe einer Adresse den passenden Ort auf der Karte finden."
        title="Nach Eingabe einer Adresse den passenden Ort auf der Karte finden."
        src="/static/a0fb94013d7b37745846cf575aed8552/f058b/937.png"
        srcset="/static/a0fb94013d7b37745846cf575aed8552/c26ae/937.png 158w,
/static/a0fb94013d7b37745846cf575aed8552/6bdcf/937.png 315w,
/static/a0fb94013d7b37745846cf575aed8552/f058b/937.png 630w,
/static/a0fb94013d7b37745846cf575aed8552/40601/937.png 945w,
/static/a0fb94013d7b37745846cf575aed8552/78612/937.png 1260w,
/static/a0fb94013d7b37745846cf575aed8552/46115/937.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Mithilfe eines Parameters in der URL den passenden Ort finden</h4>
<p>Manchmal kommt es vor, dass Sie eine Karte schon an einer bestimmten Adresse zentriert öffnen möchten. Wie Sie so etwas umsetzten können, zeigt Ihnen das nächste Beispiel.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet-geocoder.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 300px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var x = location.search;</span></span>
<span class="grvsc-line"><span class="grvsc-source">* var y = x.split(&quot;=&quot;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var temp=y[1];</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var address = decodeURIComponent(temp);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.97264, 7.00469], 3);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*L.esri.Geocoding.geocode()</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.text(address)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.run(function(err, result, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*L.marker(result.results[0].latlng)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.setView(result[0].latlng,13);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_937.html--&gt;</span></span></code></pre>
<p>Was haben wir genau gemacht? Angenommen, wir haben in der Adresszeile des Browsers
den Text <code class="language-text">?test=56751 Gering</code> an die URL angefügt. Dieser Text würde im
Beispiel als erstes in der Variablen <code class="language-text">x</code> gespeichert.
Hierzu wird die
<a href="https://wiki.selfhtml.org/index.php?title=JavaScript/Location/search&#x26;oldid=58666">Eigenschaft <code class="language-text">location.search</code></a><sup id="fnref-19"><a href="#fn-19" class="footnote-ref">19</a></sup>
zu Hilfe genommen. Diese Eigenschaft speichert eine Zeichenkette die,
durch ein Fragezeichen getrennt, zur aktuellen URL gehört.
Die Variable <code class="language-text">x</code> enthält also nun den Text <code class="language-text">test=56751 Gering</code>.
Diesen Text haben wir dann mithilfe von <code class="language-text">x.split("=")</code>
an der Position des Gleichheitszeichens getrennt und die beiden
Teile als Array in der Variablen <code class="language-text">y</code> gespeichert.
Den Adressteil können wir nun über <code class="language-text">y[1]</code> abrufen.
Wir müssen die Adresse vor der Eingabe in eine Suchfunktion aber noch dekodieren.
In der URL wurde diese nämlich kodiert.
<code class="language-text">var address = decodeURIComponent(temp)</code>
macht aus <code class="language-text">56751%20Gering</code> wieder <code class="language-text">56751 Gering</code> und speichert den
dekodierten Text in der Variablen <code class="language-text">address</code> ab.<br>
Und diesen Text können wir nun als Suchtext in die Methode <code class="language-text">text()</code>
des Geocode Objektes eingeben und auf dem Ergebnis die Methode <code class="language-text">run()</code> ausführen.</p>
<blockquote>
<p>Weitere Informationen zu <code class="language-text">decodeURIComponent()</code> finden Sie unter der Adresse
<a href="https://wiki.selfhtml.org/index.php?title=JavaScript/decodeURIComponent&#x26;oldid=48866">https://wiki.selfhtml.org/</a><sup id="fnref-20"><a href="#fn-20" class="footnote-ref">20</a></sup>.</p>
</blockquote>
<pre class="grvsc-container solarized-light" data-language="" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">L.esri.Geocoding.geocode()</span></span>
<span class="grvsc-line"><span class="grvsc-source">.text(address)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.run(function(err, result, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">L.marker(result.results[0].latlng)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">}</span></span>
<span class="grvsc-line"><span class="grvsc-source">);</span></span>
<span class="grvsc-line"><span class="grvsc-source">mymap.setView(result.results[0].latlng,13);</span></span>
<span class="grvsc-line"><span class="grvsc-source">});</span></span></code></pre>
<p>Die Rückruffunktion, die daraufhin ausgeführt wird, erstellt einen Marker
für das erste Ergebnis und zentriert diesen Marker,
bei einer Zoom-Stufe von 13, in der Karte. Eine
<a href="https://de.wikipedia.org/w/index.php?title=R%C3%BCckruffunktion&#x26;oldid=180146705">Rückruffunktion</a><sup id="fnref-21"><a href="#fn-21" class="footnote-ref">21</a></sup> ist eine
Funktion, die einer anderen Funktion als Parameter übergeben und von dieser erst
später, unter definierten Bedingungen mit definierten Argumenten, aufgerufen wird.
Eine solche Funktion kennen Sie sicher auch unter dem englischen Namen
<code class="language-text">callback function</code>.</p>
<blockquote>
<p>Möchten Sie die Suchanfrage genauer formulieren?
Dann ersetzen Sie den Text</p>
</blockquote>
<pre class="grvsc-container solarized-light" data-language="" data-index="15"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">L.esri.Geocoding.geocode()</span></span>
<span class="grvsc-line"><span class="grvsc-source">.text(&#39;Amselweg 7, Koblenz, Rheinland Pfalz, 65065&#39;)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.run(function(err, results, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">...</span></span>
<span class="grvsc-line"><span class="grvsc-source">});</span></span></code></pre>
<p>mit</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="16"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">L.esri.Geocoding.geocode()</span></span>
<span class="grvsc-line"><span class="grvsc-source">.address(&#39;Amselweg 7&#39;)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.city(&#39;Koblenz&#39;).region(&#39;Rheinland Pfalz&#39;)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.postal(65065)</span></span>
<span class="grvsc-line"><span class="grvsc-source">.run(function(err, results, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">...</span></span>
<span class="grvsc-line"><span class="grvsc-source">});</span></span></code></pre>
<p>Welche Funktionen Sie genau verwenden können,
ist in der Dokumentation beschrieben:
<a href="https://esri.github.io/esri-leaflet/api-reference/tasks/geocode.html">https://esri.github.io/</a><sup id="fnref-22"><a href="#fn-22" class="footnote-ref">22</a></sup>.</p>
<p>Voilà! Wenn sie an die URL, unter der Sie Ihre Leaflet Karte abegelegt haben,
den Text <code class="language-text">?test=56751 Gering</code> anhängen, wird Ihnen die in der
nachfolgenden Abbildung dargestellte Karte angezeigt.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/46115/936.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz12T226DMBBE+f8fqqpWUVupD5Vy4U4IgRAImFsCJB8w3XHiqOrDxsZeH8/OOlZdKZzKCskuhedGaFSLeZ50KNUg8LcIg1gH54Evo8yzNMd2m8CXNeZdr1cUxQlWuj8gP5aoZXGz9hDHKS7TiGmesZe95dLFZuNjvXLhOiFsmTOPl/OS06nGOI64XC7o+wFW07SoihLHw1FH5EWYhwFK1kIngCug9dLR6s7nswAq7ORSjm3baRCBJqzr7YbiZ4n06xsHN0D8/oHGduC/LhB/fiN+eYO3+EJZN1BVLZBWQ2iJUcaLDNjizzZKsBcP6YVj+7DtQMd65cGVb5aXitrSC54HOf6fMzSw73t0XY9RvGNz6JfxyhcLouQAL9hjHHoMDzVUNYg15z/fDGuaJu0FDWWDHKoT2NN8ARbSNHaQFXBeSen03kAINHDLSD5KIpURwrAfneXTIIjK2dVCmkUBuqLxrswwtIdUFoU7reQvyJRNNeYgcwnvuk7WFSp5MgSxUVTIi+Qd5ogfD5RPwyhksHwm3t9Yr6FUpmqlc7lPCyimlD8H/ba4QTVZlutDpXjFRAONoh2SJNPKjPlZXmJFezbMcR/NC6XSGL8FzhyVh0GrhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Mithilfe eines Parameters in der URL den passenden Ort finden."
        title="Mithilfe eines Parameters in der URL den passenden Ort finden."
        src="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/f058b/936.png"
        srcset="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/c26ae/936.png 158w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/6bdcf/936.png 315w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/f058b/936.png 630w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/40601/936.png 945w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/78612/936.png 1260w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/46115/936.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Nach Klick auf die Karte die passende Adresse ausgeben</h4>
<p>Umgekehrtes Geocoding ist die Bezeichnung für die Umwandlung geografischer Koordinaten in,
für Menschen gut lesbare, Adressen.
Sie wissen ja schon, dass Leaflet bei einem Klick mit der Maus auf die
Karte die Koordinaten in einem Objekt speichert.
Nun möchten Sie aber gerne anstelle der Koordinaten wissen,
welche Adresse Sie gerade angeklickt haben. Das nächste Beispiel zeigt ihnen,
wie Sie dies erreichen können.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="17"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet-geocoder.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 300px;&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.97264, 7.00469], 12);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.on(&#39;click&#39;, function(e){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var r = L.marker();</span></span>
<span class="grvsc-line"><span class="grvsc-source">*L.esri.Geocoding.reverseGeocode()</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.latlng(e.latlng)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.run(function(error, result, response){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.removeLayer(r);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*r = L.marker(result.latlng)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.addTo(mymap)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.bindPopup(result.address.Match_addr)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*.openPopup();</span></span>
<span class="grvsc-line"><span class="grvsc-source"> });</span></span>
<span class="grvsc-line"><span class="grvsc-source"> });</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_936.html--&gt;</span></span></code></pre>
<p>Das haben wir gemacht? Wir haben veranlasst, dass immer zu dem Zeitpunkt,
zu dem jemand auf die Karte klickt, eine umgekehrte Geocoding Suche gestartet wird.
Genau habe wir dies mit dem Programmcode, der in der Funktion
<code class="language-text">mymap.on('click', function(e){}</code>
ausgeführt wird, erreicht. Gleichzeitig wird ein Marker an der Position,
die angeklickt wurde, erstellt.
Das Ergebnis der Suche – also die gefundene Adresse – wird schlussendlich als Text
in einem Pop-up zum Marker angezeigt.</p>
<p>Wie dieses Pop-up aussieht, können Sie sich in der nächsten Abbildung ansehen.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/46115/936.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz12T226DMBBE+f8fqqpWUVupD5Vy4U4IgRAImFsCJB8w3XHiqOrDxsZeH8/OOlZdKZzKCskuhedGaFSLeZ50KNUg8LcIg1gH54Evo8yzNMd2m8CXNeZdr1cUxQlWuj8gP5aoZXGz9hDHKS7TiGmesZe95dLFZuNjvXLhOiFsmTOPl/OS06nGOI64XC7o+wFW07SoihLHw1FH5EWYhwFK1kIngCug9dLR6s7nswAq7ORSjm3baRCBJqzr7YbiZ4n06xsHN0D8/oHGduC/LhB/fiN+eYO3+EJZN1BVLZBWQ2iJUcaLDNjizzZKsBcP6YVj+7DtQMd65cGVb5aXitrSC54HOf6fMzSw73t0XY9RvGNz6JfxyhcLouQAL9hjHHoMDzVUNYg15z/fDGuaJu0FDWWDHKoT2NN8ARbSNHaQFXBeSen03kAINHDLSD5KIpURwrAfneXTIIjK2dVCmkUBuqLxrswwtIdUFoU7reQvyJRNNeYgcwnvuk7WFSp5MgSxUVTIi+Qd5ogfD5RPwyhksHwm3t9Yr6FUpmqlc7lPCyimlD8H/ba4QTVZlutDpXjFRAONoh2SJNPKjPlZXmJFezbMcR/NC6XSGL8FzhyVh0GrhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Nach Klick auf die Karte die passende Adresse ausgeben."
        title="Nach Klick auf die Karte die passende Adresse ausgeben."
        src="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/f058b/936.png"
        srcset="/static/2d4b055ec103b4b41e6d7d8a3a593d5a/c26ae/936.png 158w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/6bdcf/936.png 315w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/f058b/936.png 630w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/40601/936.png 945w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/78612/936.png 1260w,
/static/2d4b055ec103b4b41e6d7d8a3a593d5a/46115/936.png 1290w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>Die Dokumentation zum ESRI Reverse Geocoding finden Sie unter der Internetadresse
[http://esri.github.io/](<a href="http://esri.github.io/esri-leaflet/api-reference/tasks/reverse-geocode.html">http://esri.github.io/esri-leaflet/api-reference/tasks/reverse-geocode.html</a>]<sup id="fnref-23"><a href="#fn-23" class="footnote-ref">23</a></sup>.</p>
<h3>Feature Services</h3>
<p>Im vorletzten Kapitel haben wir mit dem
<code class="language-text">L.esri.dynamicMapLayer</code> Daten über einen Webservice geladen.
Dabei wurden alle zur Verfügung stehenden Daten auf der Karte angezeigt.
Das kann sehr unübersichtlich werden. Meist bietet ein Webservice große Datenmengen an.
Sie möchten sicherlich nur die für Sie und Ihre Anwender relevanten Daten auf Ihrer
Karte anzeigen. Eine Lösung für diese Aufgabe erarbeiten wir in diesem Kapitel.</p>
<p>In diesem Beispiel werden wir die
<a href="https://esri.github.io/esri-leaflet/api-reference/layers/feature-layer.html">Klasse <code class="language-text">L.esri.featureLayer</code></a><sup id="fnref-24"><a href="#fn-24" class="footnote-ref">24</a></sup>
instanziieren. Vorher haben wir mit der
Klasse <a href="https://esri.github.io/esri-leaflet/api-reference/layers/dynamic-map-layer.html"><code class="language-text">L.esri.dynamicMapLayer</code></a><sup id="fnref-25"><a href="#fn-25" class="footnote-ref">25</a></sup>
gearbeitet. Vielleicht fragen Sie sich nun, wie die beiden Klassen sich genau
unterscheiden.
ESRI erklärt dies wie folgt: Mit einem
<a href="http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002w8000000">Feature-Service</a><sup id="fnref-26"><a href="#fn-26" class="footnote-ref">26</a></sup>
können Sie Funktionen über das Internet bereitstellen.
Mit dem <a href="http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002m7000000">Karten-Service</a><sup id="fnref-27"><a href="#fn-27" class="footnote-ref">27</a></sup>
können Sie Karten im Web bereitstellen.
Meiner Meinung nach ist ein <em>Feature Service</em> ein spezieller <em>Karten-Service</em> –
denn ein Feature Service setzt eine Karte voraus.</p>
<blockquote>
<p>Interessieren Sie sich für die
technologische Entwicklung beim ESRI? Die wichtigsten Informationen
zur ArcGIS Plattform und zu ergänzenden Technologien können Sie auf
dem Blog GIS IQ – <a href="https://gis-iq.esri.de">https://gis-iq.esri.de/</a>
– mitverfolgen.</p>
</blockquote>
<h4>Attribute</h4>
<p>So, nun kommen wir zum praktischen Beispiel. Wir konfigurieren eine Abfrage zum
Filtern von Daten. Konkret verwenden wir Daten zur Bodengeologie, deren Daten
über die Adresse
<a href="http://services.arcgis.com/OLiydejKCZTGhvWg/ArcGIS/rest/services/BodenGeologie/FeatureServer">http://services.arcgis.com</a><sup id="fnref-28"><a href="#fn-28" class="footnote-ref">28</a></sup>
bereit gestellt werden.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="18"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;select id=&quot;bodengeologieID&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;&quot;&gt;Reset&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Saure regionalmetamorphe Gesteine&#39;&quot;&gt;Saure regionalmetamorphe Gesteine&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;fluvioglaziale Sedimente&#39;&quot;&gt;fluvioglaziale Sedimente&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Kalkstein&#39;&quot;&gt;Kalkstein&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Geschiebelehm/Geschiebemergel&#39;&quot;&gt;Geschiebelehm/Geschiebemergel&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Mergel&#39;&quot;&gt;Mergel&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Toniger Lehm&#39;&quot;&gt;Toniger Lehm&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Tiefengesteine bzw. Plutonite&#39;&quot;&gt;Tiefengesteine bzw. Plutonite&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;keine Informationen&#39;&quot;&gt;keine Informationen&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Basische bis ultrabasische vulkanischen Gesteine (Vulkanite)&#39;&quot;&gt;Basische bis ultrabasische vulkanischen Gesteine (Vulkanite)&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Löss&#39;&quot;&gt;Löss&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Residualton&#39;&quot;&gt;Residualton&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Fluviale Tone, Schluffe und Lehme&#39;&quot;&gt;Fluviale Tone, Schluffe und Lehme&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Sandstein&#39;&quot;&gt;Sandstein&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Sande der Flussterrassen&#39;&quot;&gt;Sande der Flussterrassen&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Tonstein&#39;&quot;&gt;Tonstein&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Steiniger Lehm&#39;&quot;&gt;Steiniger Lehm&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Residuallehm&#39;&quot;&gt;Residuallehm&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;option value=&quot;PARAMADOTXT=&#39;Schiefer&#39;&quot;&gt;Schiefer&lt;/option&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;/select&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 12);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var url =</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&#39;http://services.arcgis.com/OLiydejKCZTGhvWg/ArcGIS/rest/services/BodenGeologie/FeatureServer/0&#39;;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var bodengeologie = document.getElementById(&#39;bodengeologieID&#39;);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var bodengeologieLayer  = L.esri.featureLayer({</span></span>
<span class="grvsc-line"><span class="grvsc-source">*url: url</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var popupTemplate = &quot;&lt;h3&gt;Details:&lt;/h3&gt;\n\</span></span>
<span class="grvsc-line"><span class="grvsc-source">*PARAMADOTXT: {PARAMADOTXT}&lt;br&gt;&quot;;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologieLayer.bindPopup(function (layer){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*return L.Util.template(popupTemplate, layer.feature.properties)</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologie.addEventListener(&#39;change&#39;, function(){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologieLayer.setWhere(bodengeologie.value);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_935.html--&gt;</span></span></code></pre>
<p>Was macht der Programmcode in diesem Beispiel konkret.
Zunächst wird mit dem Befehl
<code class="language-text">var bodengeologieLayer = L.esri.featureLayer({ url: url }).addTo(mymap);</code> ein
<code class="language-text">L.esri.featureLayer</code> Objekt erstellt und dieses zur Karte hinzugefügt.
Der nächste Schritt ist das Filtern der Daten.
Dies erreichen wir mit der Zeile <code class="language-text">bodengeologieLayer.</code><strong><code class="language-text">setWhere</code></strong><code class="language-text">(bodengeologie.value);</code>.</p>
<p>Das Ergebnis sehen Sie in der nächsten Abbildung.
Wenn Sie in der Auswahlliste den Eintrag <em>Schiefer</em> auswählen,
werden nur die Regionen in denen Schiefer vorkommt, auf der Karte als Bereich angezeigt.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/eb47f424c754cfbe8f427836ae4464d8/53ac9/935a.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNElEQVQoz42S226DMBBE8/8/10p96AWlTSEhgO21DYUECWm6a9fUpIrUh5W9Fx3PDuzs6YQvDu89+mHA0PfhfrlMuF5nzPP/Y1kW7EzXwZQldFGAqgpEBGM06pZCKG1CzXLEXsxvQ+rjOGJH1sKyqqZpoOt6bWrDde61itApHaGcp/M2pD5NEwN/BpRSMNmLcZDgnMVnHZVKLSm8CwxqtN404hlzUdqqX5Cc+WyuPAAFlgODCoaJFc+lg2Jg7y3eKgGboDpBc0+FETxMCtNLjqPTvObZ4mHvuGe4ZnCoHV5LfpAM26M3SpMVq4eSqMz4ThOePiKYGCCQw9mhOLrgaQLka4uodWVphgHS2B8tXnjV3sWPkryUu3e0UZQrXFdePWQV8os8vnte8d7/Zv94l7ZKCr8BB6n1fYhAuNIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Karte zur Veranschaulichung der Bodengeologie mithilfe eines Feature Layer Service."
        title="Karte zur Veranschaulichung der Bodengeologie mithilfe eines Feature Layer Service."
        src="/static/eb47f424c754cfbe8f427836ae4464d8/f058b/935a.png"
        srcset="/static/eb47f424c754cfbe8f427836ae4464d8/c26ae/935a.png 158w,
/static/eb47f424c754cfbe8f427836ae4464d8/6bdcf/935a.png 315w,
/static/eb47f424c754cfbe8f427836ae4464d8/f058b/935a.png 630w,
/static/eb47f424c754cfbe8f427836ae4464d8/40601/935a.png 945w,
/static/eb47f424c754cfbe8f427836ae4464d8/78612/935a.png 1260w,
/static/eb47f424c754cfbe8f427836ae4464d8/53ac9/935a.png 1287w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h4>Abstand visualisieren</h4>
<p>Ein weiteres Merkmal, das auf Landkarten oft wichtig ist,
ist die Entfernung zu einem Punkt. Oft möchte man gerne wissen,
welche Objekte sich innerhalb eines bestimmten Abstands zu einer
bestimmten Koordinate befinden. Diese Fragestellung beantwortet das nächste Beispiel.</p>
<pre class="grvsc-container solarized-light" data-language="" data-index="19"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"> &lt;!DOCTYPE HTML&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;html lang=&quot;de&quot;&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;meta charset=&quot;utf-8&quot;/&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;title&gt;Eine OSM Karte mit Leaflet&lt;/title&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;link rel=&quot;stylesheet&quot; href=&quot;../leaflet/leaflet.css&quot; /&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script src=&quot;../leaflet/leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*&lt;script src=&quot;esri-leaflet.js&quot;&gt;&lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/head&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;div style=&quot;height: 700px&quot; id=&quot;mapid&quot;&gt;&lt;/div&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var mymap = L.map(&#39;mapid&#39;, {}).setView([50.27264, 7.26469], 12);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> L.esri.basemapLayer(&#39;Gray&#39;).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var url = &#39;http://services.arcgis.com/OLiydejKCZTGhvWg/ArcGIS/rest/services/BodenGeologie/FeatureServer/0&#39;;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var bodengeologie = document.getElementById(&#39;bodengeologieID&#39;);</span></span>
<span class="grvsc-line"><span class="grvsc-source"> var bodengeologieLayer  = L.esri.featureLayer({</span></span>
<span class="grvsc-line"><span class="grvsc-source"> url: url</span></span>
<span class="grvsc-line"><span class="grvsc-source"> }).addTo(mymap);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*var nearbyIds = [];</span></span>
<span class="grvsc-line"><span class="grvsc-source">*mymap.on(&#39;click&#39;, function(e){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologieLayer.query().nearby(e.latlng, 5000).ids(function(error, ids){</span></span>
<span class="grvsc-line"><span class="grvsc-source">*for (var j = 0; j &lt; nearbyIds.length; j++) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologieLayer.setFeatureStyle(nearbyIds[j],{</span></span>
<span class="grvsc-line"><span class="grvsc-source">*color: &#39;#3388FF&#39;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*);</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*nearbyIds = ids;</span></span>
<span class="grvsc-line"><span class="grvsc-source">*for (var i = 0; i &lt; ids.length; i++) {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*bodengeologieLayer.setFeatureStyle(ids[i], {</span></span>
<span class="grvsc-line"><span class="grvsc-source">*color: &#39;#BA454E&#39;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source">*}</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source">*});</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/script&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/body&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source"> &lt;/html&gt;</span></span>
<span class="grvsc-line"><span class="grvsc-source">&lt;!--index_934.html--&gt;</span></span></code></pre>
<p>Was passiert hier?
Zunächst werden im Beispiel Bodengeologien mithilfe des Objektes
<code class="language-text">L.esri.featureLayer</code> zur Karte hinzugefügt.
Soweit gibt es keinen Unterschied zum vorherigen Beispiel.
Danach rufen wir die Funktion <code class="language-text">nearby()</code> des
<a href="https://esri.github.io/esri-leaflet/api-reference/tasks/query.html">Objektes <code class="language-text">L.esri.Query()</code></a><sup id="fnref-29"><a href="#fn-29" class="footnote-ref">29</a></sup>
für jeden Marker auf.
Alle die Marker, die sich in einem Abstand von 5000 Metern befinden,
werden im Anschluss rot (#BA454E) gefärbt. Alle anderen bekommen die Farbe Blau (#3388FF);</p>
<p>Das Ergebnis sehen Sie im nächsten Bild.
Sobald Sie einen Punkt auf der Karte anklicken, werden alle Geologien im Abstand
von 5000 Metern um die angeklickte Stelle rot hervorgehoben.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/4e574272f27a1b49223c85bd84ec5fe6/53ac9/935b.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhUlEQVQoz3WS207DMAyG9/6PAAh4AC4RF1xMTCBAQxqHDTE06DZ2aNM0iVPRblz92Ok6yunCquPEn3/bbVnr4L3/Zs65YLVPRMGXb+3X56a/Wq3Q0lrDGBPMWhuMnEHKcWu/YmL1OynyV7wsS7TEybIqMahh2GBMuI+I45wgarl6E1B30DSJB6A4SqmtQmMyxKmDzhwmMSFlKPG9gJvq/gXKIU1TVpNtoeQscs9qGb647sJMp3A8J5PVI/gBawIF1KxYP16mhOiN1T6PYFXCbfMdFyByv2boqQGUpTRlS4JhaHuQY6YIRZHjLvKYJwax5kLKhvusXhDnzBLuUvNSiqJS6DZtEEO1cbgcerT7eYh7XtJ4STi5zbFzVuBq6NB78dtuZDzTWOYrCjdAsTA3srgZeRz3csyVJGRQqcHjxOPgvMAh226nxMWTR5FX7cq7ydIh0Rarj7UATQAmnCgPTx9yriY/sxRw6DPsqPuOvU4RvvvnJav3vLSqdVE5jw2GC4919IpPNxXtN54T3NkAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Karte zur Veranschaulichung der Bodengeologie mithilfe eines [Feature Layer Service](https://esri.github.io/esri-leaflet/api-reference/services/feature-layer-service.html). Außerdem werden per Klick die Bodengeologien die in einem bestimmten Abstand zur angeklickten Position liegen farblich hervorgehoben."
        title="Karte zur Veranschaulichung der Bodengeologie mithilfe eines [Feature Layer Service](https://esri.github.io/esri-leaflet/api-reference/services/feature-layer-service.html). Außerdem werden per Klick die Bodengeologien die in einem bestimmten Abstand zur angeklickten Position liegen farblich hervorgehoben."
        src="/static/4e574272f27a1b49223c85bd84ec5fe6/f058b/935b.png"
        srcset="/static/4e574272f27a1b49223c85bd84ec5fe6/c26ae/935b.png 158w,
/static/4e574272f27a1b49223c85bd84ec5fe6/6bdcf/935b.png 315w,
/static/4e574272f27a1b49223c85bd84ec5fe6/f058b/935b.png 630w,
/static/4e574272f27a1b49223c85bd84ec5fe6/40601/935b.png 945w,
/static/4e574272f27a1b49223c85bd84ec5fe6/78612/935b.png 1260w,
/static/4e574272f27a1b49223c85bd84ec5fe6/53ac9/935b.png 1287w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>In diesem Kapitel haben wir …</h2>
<p>In diesem Teil haben wir uns als erstes die Karten, die ESRI anbietet, angesehen. Danach haben wir mit einem Shapefile gearbeitet und ESRI Webservices genutzt. Sie wissen nun was ein <code class="language-text">L.esri.DynamicMapLayer,</code> was Geocoding und was ein <code class="language-text">L.esri.FeatureLayer</code> ist.</p>

      <div class="footnotes">
        <hr/><strong>References:</strong>
        <ol >
    
    <li class="footnote-list-item" id="fn-1" >
          
        
      <a href="#fnref-1" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=Geoinformationssystem&#x26;oldid=183596912">https://de.wikipedia.org/w/index.php?title=Geoinformationssystem&#x26;oldid=183596912</a> (<a href="https://bit.ly/2EXsUOo">https://bit.ly/2EXsUOo</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-2" >
          
        
      <a href="#fnref-2" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=Shapefile&#x26;oldid=183295349">https://de.wikipedia.org/w/index.php?title=Shapefile&#x26;oldid=183295349</a> (<a href="https://bit.ly/2rYJGnL">https://bit.ly/2rYJGnL</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-3" >
          
        
      <a href="#fnref-3" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=ESRI&#x26;oldid=182723856">https://de.wikipedia.org/w/index.php?title=ESRI&#x26;oldid=182723856</a> (<a href="https://bit.ly/2LFncRH">https://bit.ly/2LFncRH</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-4" >
          
        
      <a href="#fnref-4" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=ArcGIS&#x26;oldid=183028892">https://de.wikipedia.org/w/index.php?title=ArcGIS&#x26;oldid=183028892</a> (<a href="https://bit.ly/2F05aJk">https://bit.ly/2F05aJk</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-5" >
          
        
      <a href="#fnref-5" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://esri.github.io/esri-leaflet/api-reference/layers/basemap-layer.html">https://esri.github.io/esri-leaflet/api-reference/layers/basemap-layer.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-6" >
          
        
      <a href="#fnref-6" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://leafletjs.com/reference-1.2.0.html#tilelayer-detectretina">http://leafletjs.com/reference-1.2.0.html#tilelayer-detectretina</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-7" >
          
        
      <a href="#fnref-7" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://desktop.arcgis.com/de/arcmap/10.3/manage-data/shapefiles/creating-a-new-shapefile.htm">http://desktop.arcgis.com/de/arcmap/10.3/manage-data/shapefiles/creating-a-new-shapefile.htm</a> (<a href="https://bit.ly/2GNRQcV">https://bit.ly/2GNRQcV</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-8" >
          
        
      <a href="#fnref-8" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://leaflet.calvinmetcalf.com">http://leaflet.calvinmetcalf.com</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-9" >
          
        
      <a href="#fnref-9" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://www.arcgis.com/home/item.html?id=ae25571c60d94ce5b7fcbf74e27c00e0">https://www.arcgis.com/home/item.html?id=ae25571c60d94ce5b7fcbf74e27c00e0</a> (<a href="https://bit.ly/2CEvFS3">https://bit.ly/2CEvFS3</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-10" >
          
        
      <a href="#fnref-10" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/push">https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/push</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-11" >
          
        
      <a href="#fnref-11" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/join">https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/Array/join</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-12" >
          
        
      <a href="#fnref-12" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://www.stadt-koeln.de/politik-und-verwaltung/geoportal/">http://www.stadt-koeln.de/politik-und-verwaltung/geoportal/</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-13" >
          
        
      <a href="#fnref-13" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=Georeferenzierung&#x26;oldid=174938538">https://de.wikipedia.org/w/index.php?title=Georeferenzierung&#x26;oldid=174938538</a> (<a href="https://bit.ly/2ETwZTu">https://bit.ly/2ETwZTu</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-14" >
          
        
      <a href="#fnref-14" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://nominatim.openstreetmap.org">https://nominatim.openstreetmap.org</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-15" >
          
        
      <a href="#fnref-15" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://wiki.openstreetmap.org/wiki/DE:Getting_Involved">http://wiki.openstreetmap.org/wiki/DE:Getting_Involved</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-16" >
          
        
      <a href="#fnref-16" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://github.com/perliedman/leaflet-control-geocoder">https://github.com/perliedman/leaflet-control-geocoder</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-17" >
          
        
      <a href="#fnref-17" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://github.com/Esri/esri-leaflet-geocoder">https://github.com/Esri/esri-leaflet-geocoder</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-18" >
          
        
      <a href="#fnref-18" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://esri.github.io/esri-leaflet/api-reference/controls/geosearch.html">http://esri.github.io/esri-leaflet/api-reference/controls/geosearch.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-19" >
          
        
      <a href="#fnref-19" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://wiki.selfhtml.org/index.php?title=JavaScript/Location/search&#x26;oldid=58666">https://wiki.selfhtml.org/index.php?title=JavaScript/Location/search&#x26;oldid=58666</a> (<a href="https://bit.ly/2QbKv6d">https://bit.ly/2QbKv6d</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-20" >
          
        
      <a href="#fnref-20" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://wiki.selfhtml.org/index.php?title=JavaScript/decodeURIComponent&#x26;oldid=48866">https://wiki.selfhtml.org/index.php?title=JavaScript/decodeURIComponent&#x26;oldid=48866</a> (<a href="https://bit.ly/2BPl6Kn">https://bit.ly/2BPl6Kn</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-21" >
          
        
      <a href="#fnref-21" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://de.wikipedia.org/w/index.php?title=R%C3%BCckruffunktion&#x26;oldid=180146705">https://de.wikipedia.org/w/index.php?title=R%C3%BCckruffunktion&#x26;oldid=180146705</a> (<a href="https://bit.ly/2Td1WVY">https://bit.ly/2Td1WVY</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-22" >
          
        
      <a href="#fnref-22" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://esri.github.io/esri-leaflet/api-reference/tasks/geocode.html">https://esri.github.io/esri-leaflet/api-reference/tasks/geocode.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-23" >
          
        
      <a href="#fnref-23" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://esri.github.io/esri-leaflet/api-reference/tasks/reverse-geocode.html">http://esri.github.io/esri-leaflet/api-reference/tasks/reverse-geocode.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-24" >
          
        
      <a href="#fnref-24" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://esri.github.io/esri-leaflet/api-reference/layers/feature-layer.html">https://esri.github.io/esri-leaflet/api-reference/layers/feature-layer.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-25" >
          
        
      <a href="#fnref-25" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://esri.github.io/esri-leaflet/api-reference/layers/dynamic-map-layer.html">https://esri.github.io/esri-leaflet/api-reference/layers/dynamic-map-layer.html</a></p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-26" >
          
        
      <a href="#fnref-26" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002w8000000">http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002w8000000</a> (<a href="https://bit.ly/2GK1mO5">https://bit.ly/2GK1mO5</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-27" >
          
        
      <a href="#fnref-27" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002m7000000">http://resources.arcgis.com/de/help/main/10.2/index.html#//0154000002m7000000</a> (<a href="https://bit.ly/2VfqdN3">https://bit.ly/2VfqdN3</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-28" >
          
        
      <a href="#fnref-28" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="http://services.arcgis.com/OLiydejKCZTGhvWg/ArcGIS/rest/services/BodenGeologie/FeatureServer">http://services.arcgis.com/OLiydejKCZTGhvWg/ArcGIS/rest/services/BodenGeologie/FeatureServer</a> (<a href="https://bit.ly/2Qa7rCY">https://bit.ly/2Qa7rCY</a>)</p>
      </li>
      
    

    <li class="footnote-list-item" id="fn-29" >
          
        
      <a href="#fnref-29" class="footnote-backref" style="display:inline;text-decoration: none;">
        ^
      </a>
    <p class="footnote-paragraph" style="display:inline; margin-left: 5px;"><a href="https://esri.github.io/esri-leaflet/api-reference/tasks/query.html">https://esri.github.io/esri-leaflet/api-reference/tasks/query.html</a></p>
      </li>
      
    </ol></div>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .solarized-light { background-color: #FDF6E3; }
  .solarized-light .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
</style></div></article><a href="https://github.com/astridx/meinblog/blob/master/content/posts/leaflet/6esri-leaflet.md" rel="noreferrer" target="_blank">Ändere diesen Beitrag</a></section><div id="utterances"><h2>Comments</h2><div class="comments"></div></div><aside><div class="aside-content"><section><h3>Fehler gefunden?</h3><div>Bitte lasse mich wissen, wenn etwas falsch oder unklar ist. Öffne gerne ein<!-- --> <a href="https://github.com/astridx/meinblog/issues/">Github-Issue</a>.</div><h3>Du oder Sie?</h3><div>Ob Du oder Sie - das ist im Deutschen oft gar nicht so leicht zu entscheiden. Manche Leser sieze ich, andere duze ich. Deshalb gibt es im Weblog ein buntes Durcheinander und jeder sucht sich das aus, was für Ihn passt.</div></section></div></aside></main><footer class="footer container"><section class="flex"><nav class="footer-links"><a href="/blog">Blog</a><a href="https://astrid-guenther.de/impressum">Impressum</a><a href="https://astrid-guenther.de/datenschutzerklaerung">Datenschutz</a></nav><nav class="flex"><a href="https://www.gatsbyjs.org/" title="Built with Gatsby" target="_blank" rel="noopener noreferrer" class="img"><img src="/static/gatsby-b7637c262ad964cf2f70abbbfc9e1f93.png" class="footer-img" alt="Gatsby"/></a><a href="https://github.com/astridx" title="Open-source on GitHub" target="_blank" rel="noopener noreferrer" class="img"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyRTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyRjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJDOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJEOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FYrpWAAABrNJREFUeNrkW2lsVFUUvjMWirYUkS5BXApUa2vd6gL+wAWjoP5RiW2EUBajAiqSuPADQ0w1UUQTrcFAUUSJEKriEuMWFKuJIElFSS24YNpQK6WoBbuAktbva880M8O8vnfevJm+CSf5cme599xzvnfffffce17AJFjycnLzUVwDXAgUAucBY4BMIEOqdQIdwJ/Az4J64OvWtoONibQvkACHgyiuBe4CbgLOjVNlE/AZsAmoBSE9viQAjueieBCYC5yVoAvWDKwHqkBEmy8IgON09lHgXmCESY4cBaqBlSCieUgIgOPDUCwBngBOM0MjXdL/CyDiv6QRAOcvR7EBKDL+kD3AbJBQl1AC4DjrLwaeBYYbf8m/ciu+BCJ6PScAzp+K4nXgTuNveQuYAxK6PSMAzo9C8TFwtUkN2Q7cDBIOx02AOP8FUGpSSzgf3GBHQsDGec7unwOTTWrKDiGhS02ATHjvALeb1JZ3gRlWE+MpVq0yMzIekRk/1YWP6o7Ors5vHI8AXH1Odl8BaTbKrwd4j10MTAduS8JqkKvA94BPgN0A56htNm2OMyDDKNhuSwCcT5dIrMBG6S4oLI1qezqKBcBjwGiPHW8HVgCr0W97VL/fobjMpv2vQAnaHgv/MdYVXurAeSNPhggRw56BQatRVgL3A0H5+xDwI8Dw9g/5Hlq+clmdDYwF8iV0zpb/GP2tApZHOx4m2xwQUCC+VVqOABg+AUUDkO6AgHkwaL2DJXORxPVNylUnw+gpXObaLXFRlxHoaw7U8uoXQ99vViNgqUPnKQfsKojhdW7GuxDW5JUtIuni432hH4JhLJ7Dq6qwcZiPZnpNXDJPfI0kQEJbjVM5PiIgW3nhlkQQILH9LGWnV/iIAK0ts8TngREwDchVKrnKRwRobckVnwcIKFcq4ONrkY8IWBT2SHUq5eEE3Khs/CRm6Z1+8V5sqVQ26/M5gHuhSJ79TqUFmIhOj/ppwQ8/Rshqb5yiWXFQFhsaWeU352UU0KaXlc2mBI1+Y3OzjyO/Gm2kSAIKFQ2awfQ+v3oP23gL/K5oUhh0GPiEZG8KxP97FHULgsqwtTUFCDioqHsGCRipaHA8BQjQrAcyg4roj5KVAgSMUtRNDyqVj0wBAlQ2koBuRf3xKUBAvqJuN1eCrYpAiHNAltNjpyFYDfL47oix38wdmDA5AvYr+kjzWRgcLVcqnKfsJwGNyk5u9TEBtyjrNwaVgRClTPKA/Db8aVOZslkDG2nD2vEuOkqGlLmYpHcGJLlJu8LjtvJFgx06Jvnq8xC33gUBeUE4waWjduua5wdVPrr6VS6cr6PvoXv5Ixed3g3mH/fB1V9OW1w07fM5IEouUEZR4bIWWJzsTRJ55r8I3ONSRRFs3hsIU8hkgkkulf0CPAx8qElQcuk4beYp9Epgoks138LOvqSPgfyAzIwMZlnFSobgIegc4H3gH6AkxmKDub9Mjb0DeoYDrZ1dne0eO14AvfPx8RXgAYaycahbBvt+GLgFpIM0md3PjqrMTMxpYKxB6p1v+s/n7bbSuMCqldmZyc+fRh9ND+IsAxrmG3C3qtj0J1uP84hLrnwnwJbjEQRIxzw0XB2jER93C9Bog9TjsRgzLpzuJr0BzHV6e8gwf9XoziqdCv1YE/oSTQBHwfem/3w+5syPxuukLtfdO0zk+WIs+YuPKLQ7ohzyWTIix3joPPMTLg1d/Yg5gIL7ogf32U/4WGGhYDr+34J6bUALPpPA62w6XYMOP9BaCv3HoD/PeJubODN6U/eEq4cKTIurttpBAZ4L+87TmKdtOt0ah8FbPXS+WnyLEKskqUy5FaweM5dA2e6w+pNkZuajhfMD3/zYBfDKb3Y6+cWwgytOL7bh98nQ73BEgHReIvd4Roy/a6Cs3CRYJOnq7zjV8HWcybC33mpLLKZIA84FPRYhcSokUNL2Civnjd0MjoZbUCy0+PtNkDDD5wQsFB8sxWm2+GJZd8eSt4HnZXnZ66Nb4CHYYxuxat4XmI1inbHeczskq77DMrK4z8AgK3+Q/L5EEMBn/PzQos0zAsQgvg5XY3TpNKOTSAD3NsrQX63TBqq9PVHM9NgvfXi/06ZSjfNqAoQEHj9Pled+pw8cpw2co6aKbSoJxDlJnYniKdP/sqSVrrEw7IBL/TnG+rSXEy7fYVoG/S1uffDkzVEYypB1qewJRCdb5rp9yxN6mQDZFmOS2wisCIXo8Yin7w7LiKiQEcFYfhOMnBmnzo1CLIO09Qyt47niJxDQ29trTmY56Qn4X4ABAFR7IoDmVT5NAAAAAElFTkSuQmCC" class="footer-img" alt="GitHub"/></a></nav></section></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/esri-leaflet/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e795261d8342deefff90.js"],"app":["/app-6e19340bc1dca09b3b91.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ad6431e4664bcf916d19.js"],"component---src-pages-404-en-js":["/component---src-pages-404-en-js-09822341b641ee17899b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4f2740a19f7661111dc1.js"],"component---src-pages-blog-en-js":["/component---src-pages-blog-en-js-733f4727cb894e593cd6.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-a6149436b1330e16c422.js"],"component---src-pages-index-en-js":["/component---src-pages-index-en-js-ab814213079d43ff81de.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5c80af919d24c56af6ea.js"],"component---src-pages-tutorial-en-js":["/component---src-pages-tutorial-en-js-6cc5a1122f91850d8e4d.js"],"component---src-pages-tutorial-js":["/component---src-pages-tutorial-js-e2056d284cd68d4bd1b5.js"],"component---src-templates-post-js":["/component---src-templates-post-js-8d0f43e9772b68fff69d.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-8b2eeb038bd3e22c9ce0.js"]};/*]]>*/</script><script src="/polyfill-e795261d8342deefff90.js" nomodule=""></script><script src="/component---src-templates-post-js-8d0f43e9772b68fff69d.js" async=""></script><script src="/cd89b575fbc7744d97a7acf3b55b56387c8b3feb-ecedd2c80549e60c9d95.js" async=""></script><script src="/05f1d64e2e1399e8ce81fd5e37a2b8dc2f9ac157-fb0c0a50fbc4aa1c63f0.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-6e19340bc1dca09b3b91.js" async=""></script><script src="/framework-b17a64ad725e0b3c1338.js" async=""></script><script src="/webpack-runtime-bbd22f9d344145c1b194.js" async=""></script></body></html>