<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.94192faef3675174f929.css" data-identity="gatsby-global-css">pre[class*=language-].line-numbers{padding-left:3.8em}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;left:-3.8em;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}:root{--primary:#16868f;--secondary:#16868f;--link-color:#fff;--border-color:#111;--heading-font-color:var(--primary);--background-color:#252525;--sidebar-color:#2b2b2b;--navbar-color:#181818;--navbar-color-hover:#272727;--sidebar-color-hover:#383838;--sidebar-color-focus:#444;--category-background-color:#161616;--category-background-color-hover:#1f1f1f;--light-border-color:#444;--toolbar-background-color:#181818;--toolbar-color:#eee;--font-color:#b3b9c5;--medium-font-color:#aaa;--dark-font-color:#8f949d;--bright-font-color:#eee;--input-background:#393939;--blockquote-background-color:rgba(0,0,0,.4);--blockquote-color:var(--dark-font-color);--black:#111;--inline-code-background-color:hsla(0,0%,100%,.08);--inline-code-color:#b3b9c5;--dark-opacity:rgba(0,0,0,.2);--dark-opacity-hover:rgba(0,0,0,.3);--reverse:#111;--scrollbar:var(--border-color);--scrollbar-track:var(--light-border-color);--yellow:#16868f;--button-color:#6b76f3;--page-width:1000px;--font-family:"Source Serif Pro",-apple-system,BlinkMacSystemFont,"Inter","Helvetica Neue","Roboto",Roboto,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--heading-font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Roboto",Roboto,Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--code-font-family:Menlo,"DM Mono","Roboto Mono",Courier New,monospace}*,:after,:before{box-sizing:border-box}a:focus-visible,button:focus-visible{outline:3px solid var(--primary)}body{-webkit-font-smoothing:antialiased;background:var(--navbar-color);color:var(--font-color);font-family:var(--font-family);font-size:1rem;line-height:1.6;margin:0}blockquote,ol,p,table,ul{color:var(--font-color);font-size:1.2rem;margin:0 0 2rem}button{appearance:none;-moz-appearance:none;-webkit-appearance:none;background:transparent;border:none;border-radius:8px;cursor:pointer;font-family:var(--heading-font-family)}ol li,ul li{margin-bottom:.5rem}ol li p,ul li p{margin:0}ol li ol,ul li ul{margin:.3rem}h1,h2,h3,h4,h5{color:var(--heading-font-color);font-family:var(--heading-font-family);font-weight:600;line-height:1.2;margin:0 0 1.5rem;scroll-margin-top:80px}h3,h4,h5{color:var(--secondary);font-weight:500}a{text-decoration:none}a,a.button{font-family:var(--heading-font-family)}a.button{border:1px solid var(--button-color)!important;border-radius:8px;color:var(--reverse);display:block;font-size:1.1rem;font-weight:600;line-height:1.2;padding:.75rem 1.25rem;text-align:center}a.button,a.button:hover{background:var(--button-color)}a.button:hover{-webkit-filter:brightness(1.2);filter:brightness(1.2)}a.button:active{-webkit-transform:scale(.95);transform:scale(.95)}a.button.icon-button{align-items:center;display:flex}a.button.icon-button img{margin-right:.5rem;max-height:22px}table{border-collapse:separate;border-radius:8px;border-spacing:0;display:block;font-family:var(--heading-font-family);font-size:.95rem;max-width:100%;overflow-x:auto;width:100%}table :not(pre)>code[class*=language-]{font-size:.95rem!important}tbody,thead{white-space:nowrap}th{border-bottom:2px solid var(--light-border-color)}tfoot th{border-top:1px solid var(--light-border-color)}td{border-bottom:1px solid var(--light-border-color)}td,th{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;padding:.75rem!important;text-align:left;word-break:break-word}tbody tr:nth-child(odd){background-color:var(--dark-opacity)}tbody tr:last-child td:first-of-type{border-bottom-left-radius:8px}tbody tr:last-child td:last-of-type{border-bottom-right-radius:8px}@media screen and (min-width:800px){table{border:1px solid var(--light-border-color);display:table}tbody,thead{white-space:normal}}.sidebar{background:var(--sidebar-color);border-right:1px solid var(--light-border-color);height:100vh;left:0;overflow-x:hidden;overflow-y:hidden;position:fixed;top:0;width:320px;z-index:9}.sidebar:hover{overflow-y:auto}.sidebar .categories{margin-top:60px}.sidebar .title{align-items:center;background:var(--toolbar-background-color);color:var(--font-color);display:flex;font-size:.85rem;font-weight:600;height:35px;justify-content:space-between;padding:0 .5rem 0 2.5rem;position:fixed;text-transform:uppercase;top:0;width:320px;z-index:8}.sidebar button.collapse-categories{height:35px;padding:0 .75rem}.sidebar button.collapse-categories:hover{background:var(--dark-opacity)}.sidebar button.collapse-categories div{border:1px solid var(--font-color);line-height:0;padding:1px 3px}.sidebar button.collapse-categories svg rect{fill:var(--font-color)}.sidebar button.category{align-items:center;background:var(--category-background-color);border:none;border-radius:0;color:var(--bright-font-color);cursor:pointer;display:grid;font-size:.8rem;font-weight:700;grid-template-columns:1.5rem auto;margin-bottom:1px;padding:.75rem 1rem;position:-webkit-sticky;position:sticky;text-align:left;text-transform:uppercase;top:60px;width:100%;z-index:7}.sidebar button.category:hover{background:var(--category-background-color-hover);color:var(--bright-font-color)}.sidebar button.category:focus-visible{background:var(--primary);border-bottom:none;color:var(--reverse)!important;outline:none}.sidebar button.category:focus{color:var(--bright-font-color);outline:none}.sidebar button.category svg{margin-right:.5rem}.sidebar button.category svg path,.sidebar button.category:focus svg path{stroke:var(--bright-font-color)}.sidebar button.category:focus-visible svg path{stroke:var(--reverse)}.sidebar nav{width:320px}.sidebar nav.collapsed{display:none}.sidebar a{align-items:center;border-left:3px solid transparent;color:var(--medium-font-color);display:grid;font-family:var(--heading-font-family);font-size:.85rem;grid-template-columns:2rem auto;line-height:1.2;padding:.4rem 1rem}.sidebar a svg path{-webkit-filter:var(--icon-filter);filter:var(--icon-filter)}.sidebar a:hover{background:var(--sidebar-color-hover);color:var(--bright-font-color)}.sidebar a.active,.sidebar a:focus{background:var(--sidebar-color-focus);border-left:3px solid var(--primary);color:var(--bright-font-color);outline:none}.sidebar a.active svg path{fill:var(--primary)}.container{margin-left:auto;margin-right:auto;max-width:var(--page-width);padding:2rem}.container.large{max-width:1350px}.container.small,.small{max-width:550px}.navigation{background:var(--navbar-color);border-bottom:1px solid var(--light-border-color);height:60px;left:0;position:fixed;top:0;width:100%;z-index:9}.navigation-inner{font-family:var(--heading-font-family);height:100%;margin:0 auto;max-width:var(--page-width);padding:.5rem 1.5rem}.navigation button,.navigation-inner{align-items:center;display:flex;justify-content:space-between}.navigation button{background:transparent;border:none;color:var(--font-color);cursor:pointer;font-weight:500;gap:.5rem;line-height:0;padding:.5rem;position:relative}.navigation button:hover{background:var(--navbar-color-hover);color:var(--bright-font-color)}.navigation button:focus{outline:none}.navigation button:focus-visible{outline:3px solid var(--primary)}.navigation button span{font-size:.9rem}.navigation button svg rect{fill:var(--font-color)}.navigation nav{gap:.6rem;height:100%}.navigation nav,.navigation nav a{align-items:center;display:flex;justify-content:center}.navigation nav a{border-radius:8px;color:var(--font-color);font-size:.9rem;font-weight:500;gap:.4rem;line-height:1.1;padding:.5rem}.navigation nav a.active{color:var(--bright-font-color)}.navigation nav a.brand{font-size:1rem;font-weight:600}.navigation nav a.brand span{white-space:nowrap}.navigation nav a:hover{background:var(--navbar-color-hover);color:var(--bright-font-color)}.navigation nav img{max-height:20px;max-width:25px}.theme-switcher{margin-left:.5rem}.theme-switcher img{max-width:20px}.toolbar-section{align-items:center;display:flex;flex:0 0 155px;justify-content:flex-end}.navigation nav .brand-section{flex:0 0 155px;justify-content:flex-start}.hero{padding:1rem 0}.hero .flex-content{align-items:center}.hero header{padding:2rem 0 0;text-align:left}.hero h1{color:var(--bright-font-color);font-size:3rem;margin-bottom:1.5rem}.hero p.subtitle{color:var(--dark-font-color);font-family:var(--heading-font-family);font-size:1.3rem}.hero .hero-buttons{display:flex;gap:1.5rem}.hero-buttons a.hero-button{align-items:center;border:none;color:var(--dark-font-color);display:flex;font-size:.9rem;gap:.4rem;justify-content:space-between}.hero-buttons a.hero-button:hover{background:transparent;border:none;color:var(--font-color)}.hero-buttons a.hero-button img{display:block;max-height:18px}.bright{color:var(--bright-font-color)}article{padding-bottom:3rem}article header{padding-top:2rem;text-align:center}article h1{color:var(--bright-font-color);font-size:2.5rem;font-weight:700;margin-bottom:.75rem}article h2,article h3,article h4,article h5{margin:0 0 1.25rem}article h4{border-bottom:1px solid var(--light-border-color);margin-bottom:.75rem}article .description{color:var(--dark-font-color);font-family:var(--heading-font-family);font-size:1.45rem;margin-bottom:0}.post-image{margin-bottom:1rem}.post-details{color:var(--dark-font-color);font-family:var(--heading-font-family);font-size:.9rem;margin:.5rem 0}.post-details a{border-bottom:none}.tags{align-items:center;display:flex;flex-wrap:wrap;font-family:var(--heading-font-family);gap:.5rem;justify-content:center;margin:1.5rem 0}.tags a{border:1px solid var(--light-border-color);border-radius:8px;color:var(--bright-font-color);display:inline-block;font-size:.9rem;font-weight:600;line-height:normal;padding:.4rem .6rem;vertical-align:middle}.tags a,.tags a:hover{background:var(--reverse)}.tags a:hover{border:1px solid var(--primary);color:var(--primary)}article a{border-top:2px solid transparent;color:var(--link-color);font-weight:600}article a,article a:hover{border-bottom:2px solid var(--primary)}article a:hover{background:var(--primary);border-top:2px solid var(--primary);color:var(--reverse)}article li a,article li a:hover{border-bottom:none;border-top:none}article img{display:block;max-width:100%}article h2{font-size:1.9rem;padding-bottom:.25rem}article h2 code{border-bottom:1px solid var(--border-color);font-size:2.2rem!important}article h3{font-size:1.75rem}article h3 code{font-size:1.6rem!important}article h4{font-size:1.15rem;padding-bottom:.25rem;text-transform:uppercase}article h4 code{font-size:1.25rem!important}article h5{font-size:1rem;text-transform:uppercase}h2:not(:first-child),h3:not(:first-child),h4:not(:first-child){margin-top:3rem}blockquote{background:var(--blockquote-background-color);border:1px solid var(--light-border-color);border-left:4px solid var(--primary);border-radius:8px;font-family:var(--heading-font-family);padding:1.5rem}blockquote p{color:var(--blockquote-color)}blockquote ul{margin-top:1rem}blockquote p:last-of-type,blockquote ul:last-of-type{margin-bottom:0}.comments{padding-bottom:2rem}.comments h3{font-size:1.75rem}.blog-page h2{border-bottom:1px solid var(--light-border-color);margin-top:2.5rem}a.post{grid-gap:1rem;align-items:center;border:1px solid transparent;display:grid;grid-template-columns:auto 60px;margin-left:-1rem;margin-right:-1rem;padding:.4rem 1rem}a.post.new,a.post:hover{background:var(--dark-opacity);border:1px solid transparent;border-radius:8px;font-family:var(--heading-font-family)}a.post.new{background:transparent;border:1px solid transparent}a.post.new:hover{background:var(--dark-opacity)}a.post.new time{color:var(--secondary)!important}a.post.new h3{color:var(--bright-font-color)}a.post.new .new-badge{color:var(--yellow);margin-left:.75rem}a.post h3{color:var(--font-color);-webkit-filter:brightness(1);filter:brightness(1);font-size:1.1rem;font-weight:500;margin:0}a.post:hover h3{color:var(--bright-font-color)}a.post time,a.post:hover time{color:var(--dark-font-color)}a.post time{display:block;font-family:var(--code-font-family);font-size:.8rem;font-weight:400;text-align:center}.projects{display:flex;flex-direction:column}@media screen and (min-width:600px){.projects{grid-gap:2rem;display:grid;grid-template-columns:repeat(auto-fill,300px);justify-content:center}}.project{background:var(--dark-opacity);border:1px solid var(--border-color);border-radius:8px;color:var(--dark-font-color);display:flex;flex-direction:column;padding:1.5rem}.project h2{border-bottom:none;font-size:1.5rem;margin-bottom:0;text-align:center}.project img{height:auto;margin-top:.5rem;max-height:100px;max-width:100%;-o-object-fit:contain;object-fit:contain}.project .description{color:var(--font-color);font-family:var(--heading-font-family);font-size:1.2rem;line-height:1.3;margin-bottom:1rem;text-align:center}.project .links{display:flex;gap:.5rem}.project .stars{align-items:center;display:flex;gap:.75rem;justify-content:center;margin-top:auto}.project .stars img{margin-top:0;max-width:20px}a.anchor.before{border:none}a.anchor.before:hover{background:transparent}a.anchor.before svg{fill:#fff}a.image-link,a.image-link:hover{border-bottom:none;border-top:none}a.image-link:hover{background:none}.primary-color{color:var(--primary)}.primary-underline{border-bottom:3px solid var(--primary)}.deemphasized{color:var(--dark-font-color)}.gatsby-resp-image-wrapper{margin-left:0!important}a.gatsby-resp-image-link{background:transparent!important;border-bottom:none!important;border-top:none!important}.highlighted{background:var(--primary);color:var(--reverse)}.not-found-image{margin:0 auto}.flex{display:flex}.flex-align-center{align-items:center}.flex-justify-between{justify-content:space-between}.flex-content{gap:1.5rem}.flex-content,.main-header{display:flex;justify-content:space-between}.main-header{align-items:center;border-bottom:1px solid var(--light-border-color)}.main-header a{font-size:1rem}.main-image{border:1px solid var(--light-border-color);border-radius:8px;height:auto;margin-left:2rem;width:250px}.search-bar{grid-gap:1rem;align-items:center;display:grid;grid-template-columns:auto 50px}.search-icon{cursor:pointer;max-width:30px}.search-input{-webkit-appearance:none;background:var(--input-background);border:1px solid var(--light-border-color);border-radius:8px;color:var(--bright-font-color);font-size:1.1rem;line-height:1.1;padding:.75rem 1rem;width:100%}.search-input:active,.search-input:focus,.search-input:hover{border-color:var(--primary)}.search-input:focus{box-shadow:1px 1px 1px var(--primary);-webkit-filter:brightness(1.1);filter:brightness(1.1);outline:none}::-webkit-scrollbar{background:var(--scrollbar);height:8px;width:8px}::-webkit-scrollbar-thumb{background:var(--scrollbar-track);border-radius:0}::selection{background:var(--primary);color:var(--reverse)}::-moz-selection{background:var(--primary);color:var(--reverse)}::marker{color:var(--primary)}.search-input::-webkit-search-cancel-button{color:var(--bright-font-color)}.collapsed .sidebar{display:none}.desktop-only{display:block!important}main{background:var(--background-color);margin-top:60px;min-height:calc(100vh - 215px)}.footer{background:var(--navbar-color);border-top:1px solid var(--light-border-color);font-family:var(--heading-font-family);padding:3rem 0}.footer section{align-items:center;display:flex;flex-direction:column;gap:1.25rem}.footer img{display:inline-block;max-height:20px;width:auto}.footer nav{display:flex;gap:.25rem;margin:0 1rem}.footer a,.footer span{align-items:center;color:var(--dark-font-color);display:flex;font-size:.9rem;line-height:1.2;padding:0 .5rem}.footer span{color:var(--toolbar-color)}.footer a:hover{color:var(--link-color)}@media screen and (max-width:800px){blockquote,ol,p,table,ul{font-size:1.1rem;margin:0 0 1.5rem}.flex-content{flex-direction:column;gap:.5rem}main{margin-top:60px}ol,ul{padding-left:1rem}.navigation nav.social-nav,.sidebar{display:none}.navigation-inner{justify-content:space-between;padding-right:0}.navigation nav{gap:.5rem}.navigation nav a{flex-direction:column;font-size:.8rem;gap:.25rem;padding:0 .25rem}.navigation nav a:hover{background:transparent}.navigation button.theme-switcher{margin-left:0;margin-right:-.5rem;min-width:auto}.navigation nav a.brand{font-size:.9rem;margin-left:0;margin-right:0;padding:0}.navigation nav img{max-width:20px}.toolbar-section{flex:initial;margin-left:0}.navigation nav .brand-section{flex:initial}.navbar img{max-width:30px}.projects{grid-gap:1rem;grid-template-columns:repeat(2,50%)}.project .stars{justify-content:center}.desktop-only{display:none!important}.hero{padding:0}.hero h1{font-size:2.25rem}.hero header{padding:1rem 0 0}.hero .container{padding-bottom:1rem}.hero p.subtitle{font-size:1.2rem}.hero .flex-content,.hero .hero-buttons{align-items:flex-start}.hero .hero-buttons{flex-direction:column;gap:.5rem}.post-image{max-height:75px;max-width:75px}.main-image{margin:0 0 1rem;width:150px}.flex-content div{order:2}.flex-content img{order:1}.container{padding:1rem}.navigation-inner{padding:0 1rem}article{padding-bottom:0}article h1{font-size:2.2rem;line-height:1.2}article h2{font-size:1.8rem}article header{padding-top:1.5rem}article .description{font-size:1.3rem}a.post h3{font-size:1rem}.project img{max-height:50px}}#resume header{text-align:left}#resume section h2,#resume section h3,#resume section h4,#resume section h5{margin-bottom:1rem;margin-top:0}#resume section h2{border-bottom:1px solid var(--light-border-color);font-size:1.1rem;margin-top:2.5rem;text-transform:uppercase}#resume section h3{align-items:center;display:flex;font-weight:600;justify-content:space-between}#resume section h3 span{display:block;font-size:1rem;font-weight:400}#resume section h3{font-size:1.3rem;margin-bottom:.5rem}#resume section li,#resume section p{font-size:1rem;line-height:1.3}#resume section li{margin-bottom:.5rem}.hidden{display:none}:root{--code-font-color:#b3b9c5;--code-background-color:#353535;--string:#92d192;--variable:#f2777a;--property:#abb2bf;--number:#fca369;--operator:#ac8d58;--punctuation:#d5d8df;--comment:#848991;--function:#62cfcf;--keyword:#ffeead;--attribute:#ffd479;--class:#e1a6f2;--tag:#6ab0f3;--error:#f2777a;--terminal-color:var(--code-font-color)}code[class*=language-],pre[class*=language-]{word-wrap:normal;color:var(--code-font-color);font-family:var(--code-font-family);font-size:.9rem!important;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{-webkit-font-smoothing:subpixel-antialiased;background:var(--code-background-color);border:1px solid var(--light-border-color);border-radius:8px;font-family:Menlo,monospace;margin-bottom:2rem;margin-top:2rem;overflow:initial;padding:1rem}:not(pre)>code[class*=language-]{-webkit-font-smoothing:antialiased;background:var(--inline-code-background-color)!important;color:var(--inline-code-color)!important;font-size:1rem!important;font-weight:600;padding:2px 3px;white-space:pre-wrap}article a:hover code{color:var(--reverse)!important}pre.language-text{background:transparent;margin-left:-1.5rem;padding-bottom:0;padding-top:.5rem}.line-numbers-rows{display:none}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:1rem;position:relative}@media screen and (min-width:800px){.line-numbers-rows{display:block}pre.language-text.line-numbers{padding-left:1.5rem!important}pre[class*=language-].line-numbers{padding-left:4rem}pre.language-shell,pre.language-terminal{padding-left:1.5rem!important}pre.language-shell .line-numbers-rows,pre.language-terminal .line-numbers-rows,pre.language-text .line-numbers-rows{display:none}}code.language-text{background:var(--light-background)!important;box-shadow:none;color:var(--font-color)!important}pre.language-text code.language-text{border:none}code.language-shell:before{color:var(--comment);content:"$ "}pre.language-terminal{-webkit-text-size-adjust:none;background:var(--reverse);border:1px solid var(--light-border-color);border-top-left-radius:8px;border-top-right-radius:8px;color:var(--font-color);margin:2rem 0;padding-top:3rem;position:relative;white-space:normal}code.language-terminal{-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;color:var(--terminal-color)}pre.language-terminal:before{background:var(--category-background-color);border-bottom:1px solid var(--light-border-color);border-top-left-radius:8px;border-top-right-radius:8px;color:var(--dark-font-color);content:"\2022 \2022 \2022";font-size:2.5rem;left:0;letter-spacing:-5px;line-height:0;margin:0;padding:15px 0 12px;position:absolute;text-indent:6px;top:0;width:100%}.line-numbers .line-numbers-rows{border-right:1px solid #444;font-size:100%;left:-3.8rem;letter-spacing:-1px;padding-right:.5rem;pointer-events:none;position:absolute;top:1rem!important;width:3rem!important}.line-numbers-rows>span:before{color:#777}.gatsby-highlight{-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none;font-size:.9rem;margin-bottom:1.5rem;margin-top:1.5rem;max-width:999999px;overflow-x:auto;overflow-y:hidden}.gatsby-highlight pre[class*=language-]{float:left;margin-bottom:0;margin-top:0;min-width:100%}.gatsby-highlight-code-line{background-color:#222;border-left:.25rem solid #74cf74;display:block;margin-left:-1.25rem;margin-right:-1rem;padding-left:1rem;padding-right:1rem}.filename{align-items:center;background:#171717;border-top-left-radius:8px;border-top-right-radius:8px;color:#ccc;display:flex;font-family:var(--heading-font-family);font-size:.9rem;line-height:1;margin-bottom:-2rem;padding:.5rem 1.5rem .9rem}.token.cdata,.token.comment,.token.doctype,.token.important,.token.prolog{color:var(--comment)}.token.punctuation{color:var(--punctuation)}.token.namespace{opacity:.7}.token.property{color:var(--property)}.token.constant,.token.deleted,.token.symbol,.token.tag{color:var(--tag)}.token.number{color:var(--number)}.token.builtin,.token.char,.token.inserted,.token.url{color:var(--code-font-color)}.token.attr-name,.token.selector{color:var(--attribute)}.token.attr-value,.token.string{color:var(--string)}.token.operator{color:var(--operator)}.token.atrule,.token.keyword{color:var(--keyword)}.token.function{color:var(--function)}.language-css,.token.boolean,.token.class-name{color:var(--class)!important}.token.regex{color:var(--keyword)}.token.variable{color:var(--variable)}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.language-jsx .token.class-name{color:var(--tag)!important}code::selection,pre::selection{background:hsla(0,0%,59%,.3)!important;color:inherit;text-shadow:none}code[class*=language-] ::selection,pre[class*=language-]::selection{background:hsla(0,0%,59%,.3)!important;color:inherit;text-shadow:none}pre[class*=language-]{margin-bottom:1.5rem;margin-top:1.5rem}.filename{margin-bottom:-1.9rem}.light{--primary:#16868f;--secondary:#444;--heading-font-color:#222;--link-color:#111;--border-color:#bbb;--light-border-color:#e0e0e0;--background-color:#fff;--sidebar-color:#f0f0f0;--navbar-color:#f0f0f0;--navbar-color-hover:#ddd;--sidebar-color-hover:#dedede;--sidebar-color-focus:#fff;--category-background-color:#d5d5d5;--category-background-color-hover:silver;--toolbar-color:#333;--toolbar-background-color:#f0f0f0;--font-color:#454545;--medium-font-color:#555;--dark-font-color:#888;--input-background:transparent;--bright-font-color:#222;--blockquote-background-color:rgba(0,0,0,.02);--blockquote-color:#111;--inline-code-background-color:rgba(0,0,0,.05);--inline-code-color:#111;--icon-filter:brightness(0.8);--dark-opacity:rgba(0,0,0,.03);--dark-opacity-hover:rgba(0,0,0,.1);--reverse:#fff;--terminal-color:var(--bright-font-color);--scrollbar:#888;--scrollbar-track:#bbb;--yellow:#16868f;--button-color:var(--primary)}.light pre[class*=language-]{border-color:var(--heading-font-color)}.light pre.language-terminal,.light table{border-color:var(--border-color)}.light blockquote{border-left-color:var(--border-color);border-color:var(--border-color) var(--border-color) var(--border-color) var(--primary)}.sepia{--primary:#6c71c4;--secondary:#cb4b16;--heading-font-color:#211806;--link-color:#332810;--border-color:#332810;--light-border-color:#6b4a00;--background-color:#ebdbb2;--sidebar-color:#fef0cf;--navbar-color:#f0d69a;--navbar-color-hover:#e2c175;--sidebar-color-hover:#eed18e;--sidebar-color-focus:#fff6e3;--category-background-color:#d8ba76;--category-background-color-hover:#c8a961;--toolbar-color:#332810;--toolbar-background-color:#fdf6e3;--font-color:#372e19;--medium-font-color:#6b4a00;--dark-font-color:#6b4a00;--input-background:transparent;--bright-font-color:#211806;--blockquote-background-color:rgba(0,0,0,.02);--blockquote-color:#111;--inline-code-background-color:rgba(0,0,0,.05);--inline-code-color:#111;--icon-filter:brightness(0.8);--dark-opacity:rgba(0,0,0,.03);--dark-opacity-hover:rgba(0,0,0,.1);--reverse:#fdf6e3;--terminal-color:var(--bright-font-color);--scrollbar:#a48337;--scrollbar-track:#c8a961;--yellow:#e59e32;--button-color:var(--primary)}.sepia .comments{background:#444;border-radius:8px;margin-bottom:2rem;padding:2rem}.sepia pre[class*=language-]{border-color:var(--heading-font-color)}</style><meta name="generator" content="Gatsby 3.14.6"/><title data-react-helmet="true">Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks | Astrid Günther</title><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="me" href="https://fimidi.com/@astrid"/><link data-react-helmet="true" rel="me" href="https://github.com/astridx"/><link data-react-helmet="true" rel="me" href="https://codeberg.org/astrid"/><link data-react-helmet="true" rel="me" href="mailto:info@astrid-guenther.de"/><link data-react-helmet="true" rel="me" href="https://twitter.com/astridguenther"/><link data-react-helmet="true" rel="me" href="https://astrid-guenther.de"/><link data-react-helmet="true" rel="webmention" href="https://webmention.io/blog.astrid-guenther.de/webmention"/><link data-react-helmet="true" rel="pingback" href="https://webmention.io/blog.astrid-guenther.de/xmlrpc"/><meta data-react-helmet="true" name="description" content="Ich gestalte gerne Webseiten mit Gatsby und habe vor kurzem angefangen, MapLibre GL zu benutzen. Ich wünsche mir, beides zu kombinieren. Die…"/><meta data-react-helmet="true" name="image" content="https://blog.astrid-guenther.de/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png"/><meta data-react-helmet="true" property="og:url" content="https://blog.astrid-guenther.de/maplibre-blog-with-gatsby/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks"/><meta data-react-helmet="true" property="og:description" content="Ich gestalte gerne Webseiten mit Gatsby und habe vor kurzem angefangen, MapLibre GL zu benutzen. Ich wünsche mir, beides zu kombinieren. Die…"/><meta data-react-helmet="true" property="og:image" content="https://blog.astrid-guenther.de/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks"/><meta data-react-helmet="true" name="twitter:description" content="Ich gestalte gerne Webseiten mit Gatsby und habe vor kurzem angefangen, MapLibre GL zu benutzen. Ich wünsche mir, beides zu kombinieren. Die…"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.astrid-guenther.de/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://blog.astrid-guenther.de","name":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","alternateName":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://blog.astrid-guenther.de/maplibre-blog-with-gatsby/","name":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","image":"https://blog.astrid-guenther.de/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://blog.astrid-guenther.de","name":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","alternateName":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","headline":"Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks","image":{"@type":"ImageObject","url":"https://blog.astrid-guenther.de/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png"},"description":"Ich gestalte gerne Webseiten mit Gatsby und habe vor kurzem angefangen, MapLibre GL zu benutzen. Ich wünsche mir, beides zu kombinieren. Die…"}]</script><link rel="alternate" type="application/rss+xml" title="Astrid Günther | RSS Feed" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-151198cf60371e4ceaea.js"/><link as="script" rel="preload" href="/framework-a8bc927eb7481ca28d49.js"/><link as="script" rel="preload" href="/app-24df0ae8e19938884045.js"/><link as="script" rel="preload" href="/commons-dead6f2aafd4c57f7eb7.js"/><link as="script" rel="preload" href="/b84efa9b784e27572a845759437622c93533bed1-af3eca6a1f9625807cd6.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-32d6c559e8f7d98e8c24.js"/><link as="fetch" rel="preload" href="/page-data/maplibre-blog-with-gatsby/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/352937542.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><article class="h-entry"><section class="p-author h-card hidden"><p><a class="u-url" href="https://blog.astrid-guenther.de/maplibre-blog-with-gatsby/">Astrid Günther</a>created by<img src="/static/me-f1824a760e002339b4da1b33f0f0b776.jpg" alt="Me" class="u-photo"/><span class="p-name" rel="me">Astrid Günther</span>in<span class="p-country-name">Germany</span>.</p><p><span class="p-note">Hi, I’m Astrid, webworker, writer and I like open-source.</span></p></section><header><div class="container"><div class="post-details"><div><div class="post-image gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:150px;height:150px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAADKUlEQVQ4y3VUy0sqURj3z2ihC9853ktQrSJ6QJtWQSjNqM0EdRF6SUW0aFERrryX66LSgqiscRxnNNIszB5OqRWZSyGiGrBVBdEbzZzLOCbT4x7O4vCd8/t+v/PxfT8B875yuRzDMA/PaQ913m2N1PX61AipRsg6k6/bGvFQ5w/P6eIzbgn4SH+UbuhfFWmdIq1ToceVBnYr9DgXaehf9cdoPr4AfsvlzI6ESOsUgy41QioMLhmEccwyCFMY2KAYdIm0TrMj8VYEc4fxheOS5iUAJgCEkEJYVc96p/10jLwZI2867adVPetSCAMQAoCJkual8YXjPH+e2R+lRRpUBbN3MgirH9i0Bp/nDxg79WqnXucPmL/B5/qBTRmEATChggmhBvVFWf2Cp5dMQ/+qGGQTl7a6VbB7jLye22eGFi9r+kI1faGhxcu5fWaMvFbB7tJWN4AQYhBr6F99eskIvNSZUIOqETalDMKqTcGpnVfrxkuF0S9uQcUtaIXRb914mdp5rTYFZRCmggk1wpJ7qHNBlzXCB9f2hWzhrCVwr4JZIXkthCVwbwtna/tCfHCXNSKoM/lkOpyTpNDjZe3LlsDDzF5Oaz6SQpgUwrTmo5m9nCXwUNa+rNDj3NdkOrzO5BOokQIDRyIBncapk9kYM7GZHnSkBh2pic30bIwxTp1IQGdRTmmrW40Qn8FynavS6P+z9minstO7b9O7b3Yq+3vtsdLol+tcn8F82e/kaOPwrj2cndzOTG5nbOFs4/CuBER5VXiXXSxYMSUAE1IQbRrdt4WztnC2aXRfCqLAR85CwTzU+Sew0uBWtrrlOmfTSKxpJCrXOZX54CewlzrjNUk+t9LAtoGHuoifXG/FU1vxVPzk2kNdAAjB4QGY1yQMw/iitDDfnirYLdfj5R3eu6fMSoQedyTGHYmVCH33lCnv8Mr1bGlUMCHSoH6uPT8MRl68GiFC8cskfXuYvDpMXiXp21D8krsCkC+DwR9JCeQCYOJnG1n+y1vcP9pIACYk0JeR/GAGsYIZCDWoFHIpDLjCgEshl1CDFswg+p0ZfGNDpncb6v2vDf0DP3S/D7fd8goAAAAASUVORK5CYII=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png 1x" /><img loading="lazy" width="150" height="150" srcset="/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png 1x" src="/static/7c1705d3acc30aff7fec6028c9c6c6b0/92ab1/maplibre.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div>Written by<!-- --> <a class="u-url" href="https://astrid-guenther.de"><span>Astrid Günther</span></a> <!-- -->on<a href="https://blog.astrid-guenther.de/maplibre-blog-with-gatsby/"><time datetime="2021-11-07" class="dt-published"> <!-- -->2021-11-07</time></a></div><h1 class="p-name">Gatsby Blog mit maplibre GL JS unter Verwendung von React Hooks</h1><div class="post-meta"><div class="tags p-category"><a class="tag-MaplibreGL" href="/tags/maplibre-gl">MaplibreGL</a><a class="tag-geografische Daten" href="/tags/geografische-daten">geografische Daten</a><a class="tag-Geoinformationssystem" href="/tags/geoinformationssystem">Geoinformationssystem</a><a class="tag-JavaScript-Bibliothek" href="/tags/java-script-bibliothek">JavaScript-Bibliothek</a><a class="tag-Vektor-Tiles" href="/tags/vektor-tiles">Vektor-Tiles</a><a class="tag-Karten" href="/tags/karten">Karten</a><a class="tag-Gatsby" href="/tags/gatsby">Gatsby</a></div></div><div class="post-syndication">Syndications:</div></div></header><div id="/maplibre-blog-with-gatsby/" class="container post-content e-content"><p>Ich gestalte gerne Webseiten mit <a href="https://www.gatsbyjs.com/">Gatsby</a> und habe vor kurzem angefangen, <a href="https://maplibre.org/">MapLibre GL</a> zu benutzen. Ich wünsche mir, beides zu kombinieren. Die Idee ist, einen Reiseblog zu erstellen, bei dem die Karte den Textinhalt verdeutlicht, indem sie dynamisch in den relevanten Bereich zoomt. Idealerweise werden die Orte aus einem Blogbeitrag mit einem Marker markiert. Beim Navigieren zwischen verschiedenen Beiträgen hebt die digitale Map kontinuierlich die neuen Bereiche hervor, anstatt jedes Mal die gesamte Karte zu aktualisieren. Dadurch ist es für den Leser leichter, den räumlicher Kontext zu erkennen.</p>
<h2 id="einrichtung" style="position:relative;"><a href="#einrichtung" aria-label="einrichtung permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Einrichtung</h2>
<p>Im nachfolgenden Beispielcode gehe ich nicht auf jede einzelne Codezeile ein. Dafür stelle ich das Ergebnis online in meinem <a href="https://github.com/astridx/gatsby-maplibre-blog-tutorial">Github Repo</a> zur Verfügung. Der Branch <code class="language-text">main</code> ist für MapLibre GL in Version 1.x erstellt. Der Branch <code class="language-text">test_maplibre_v2</code> enthält Ergänzungen für MapLibre GL 2.x.</p>
<blockquote>
<p>Ich gehe davon aus, dass du mit Gatsby und React vertraut bist und die grundlegenden Abhängigkeiten installiert hast: Erste Schritte mit <a href="https://de.reactjs.org/docs/getting-started.html">React</a> oder <a href="https://www.gatsbyjs.com/docs/tutorial/">Gatsby</a></p>
</blockquote>
<p>Als erstes erstellen wir ein leeres Gatsby-Projekt. Ich verwende das von Gatsby zur Verfügung gestellt <a href="https://www.gatsbyjs.com/docs/starters/">Startprojekt</a>. So ist das Wesentliche vorkonfiguriert. Das Endergebnis dieses Tutorials ist eine Boilerplate-Struktur. Passe die im Anschluß gerne an deine individuellen Bedürfnisse an.</p>
<pre class="grvsc-container default-dark" data-language="" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ gatsby new gatsby-maplibre-blog</span></span></code></pre>
<p>Nachdem du das Projekt erstellt hast, wechsele mittels <code class="language-text">cd gatsby-maplibre-blog</code> in das Projektverzeichnis und rufe <code class="language-text">gatsby develop</code> auf. Als Ergebnis siehst du die folgende Ausgabe unter der URL <code class="language-text">http://localhost:8000/</code> im Browser:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/25deba7b0d00540365f0eafe2efd017f/191e2/bloggatsby1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVQoz5WQTUoDQRCF50oqeAgV9BAq3kAleA91rShZeQNXOptZBJIIYoxi7GhmbGI0cf66+xMnkwmjktAFD5p6VR+v2tlaPGSi7aUj9tfOONioUlk/Z2/1lN2VE3aWj9lcmM7NkvPQ6JGp6dNu9Ki5t7iXNVp1wfOdRLQkjzc+xdwcOfyqj+GANxkQJiNAY1uO1oZCSqNSlRmB6NP3P7P3T780N0NFQmNMvmy4v/K4rnq8B2HhTfy5CXNcacm7cHmqd8aONnYnjxOUU760B8RfaalnCTTF8ms3oduJiMNkCrSA/gFKGSNExGiorP/vX6A2KUonRJHOg9kBvwFb/eym0DbugAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Ein Bildschirmfoto des Gatsby-Standard-Starters"
        title="Ein Bildschirmfoto des Gatsby-Standard-Starters"
        src="/static/25deba7b0d00540365f0eafe2efd017f/5a190/bloggatsby1.png"
        srcset="/static/25deba7b0d00540365f0eafe2efd017f/772e8/bloggatsby1.png 200w,
/static/25deba7b0d00540365f0eafe2efd017f/e17e5/bloggatsby1.png 400w,
/static/25deba7b0d00540365f0eafe2efd017f/5a190/bloggatsby1.png 800w,
/static/25deba7b0d00540365f0eafe2efd017f/c1b63/bloggatsby1.png 1200w,
/static/25deba7b0d00540365f0eafe2efd017f/29007/bloggatsby1.png 1600w,
/static/25deba7b0d00540365f0eafe2efd017f/191e2/bloggatsby1.png 1836w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Um etwas aufzuräumen habe ich im Ordner <code class="language-text">src</code> die Dateien <code class="language-text">components/layout.js</code>, <code class="language-text">pages/404.js</code> und <code class="language-text">pages/index.js</code> abgeändert.</p>
<blockquote>
<p>Wenn du mit Gatsby vertraut bist, kannst du auch noch weitere Inhalte des Boilerplates löschen. Um diese Beispiel übersichtlich zu halten, reicht das Ändern der Dateien <code class="language-text">components/layout.js</code>, <code class="language-text">pages/404.js</code> und <code class="language-text">pages/index.js</code> aus. Nachfolgend siehst du den von mir ausgewechselten Code.</p>
</blockquote>
<pre class="grvsc-container default-dark" data-language="js" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// index.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">Layout</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;../components/layout&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">IndexPage</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;</span><span class="mtk10">Layout</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span><span class="mtk1">Reise Blog</span><span class="mtk17">&lt;/</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;/</span><span class="mtk10">Layout</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">IndexPage</span></span></span></code></pre>
<pre class="grvsc-container default-dark" data-language="js" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// layout.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;prop-types&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Layout</span><span class="mtk1"> = ({ </span><span class="mtk12">children</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk4">main</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">children</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk4">main</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">Layout</span><span class="mtk1">.</span><span class="mtk12">propTypes</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">children:</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1">.</span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">isRequired</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">Layout</span></span></span></code></pre>
<pre class="grvsc-container default-dark" data-language="js" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// 404.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">NotFoundPage</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span><span class="mtk1">Page Not Found</span><span class="mtk17">&lt;/</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">NotFoundPage</span></span></span></code></pre>
<p>Weiterhin habe ich die Datei <code class="language-text">gatsby-config.js</code> aufgeräumt. Auch hier wollte ich mit einem Minimum beginnen. So habe ich eine Menge entfernt und den Quellpfad der Datei in <code class="language-text">content</code> geändert.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// gatsby-config.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">module</span><span class="mtk1">.</span><span class="mtk10">exports</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">siteMetadata:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">title:</span><span class="mtk1"> </span><span class="mtk8">`Gatsby MapLibre Blog`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">description:</span><span class="mtk1"> </span><span class="mtk8">``</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">author:</span><span class="mtk1"> </span><span class="mtk8">`Me`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">plugins:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-plugin-react-helmet`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">resolve:</span><span class="mtk1"> </span><span class="mtk8">`gatsby-source-filesystem`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">options:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">`content`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">path:</span><span class="mtk1"> </span><span class="mtk8">`</span><span class="mtk4">${</span><span class="mtk12">__dirname</span><span class="mtk4">}</span><span class="mtk8">/content`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-transformer-sharp`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-plugin-sharp`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<p>Zusätzlich stelle ich sicher, dass es den Ordner namens <code class="language-text">content</code> im Stammverzeichnis meines Projekts gibt. Weil es ihn im Projekt noch nicht gibt, lege ich ihn an. Wir benötigen ihn im Moment nicht, aber hier werde ich später Markdown-Dateien für Blogbeiträge anlegen.</p>
<pre class="grvsc-container default-dark" data-language="" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">mkdir content</span></span></code></pre>
<p>Starte an dieser Stelle den Entwicklungsserver neu, um sicherzustellen, dass kein Fehler vorliegt. Führe <code class="language-text">gatsby develop</code> erneut aus. Wenn du keine Fehlermeldungen siehst ist alles gut.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/07366bd56fb5e0eea5cfe415c6dd0054/191e2/bloggatsby2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVQoz2N4/Pjx/+/fv/8HgX///v2nFDD8+fPn/9+/f6lnIIxBDcPABoIMghlGVRdSC4waOAgNBABPchyBJOOx8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="A screenshot of Gatsby default starter after tidy up"
        title="A screenshot of Gatsby default starter after tidy up"
        src="/static/07366bd56fb5e0eea5cfe415c6dd0054/5a190/bloggatsby2.png"
        srcset="/static/07366bd56fb5e0eea5cfe415c6dd0054/772e8/bloggatsby2.png 200w,
/static/07366bd56fb5e0eea5cfe415c6dd0054/e17e5/bloggatsby2.png 400w,
/static/07366bd56fb5e0eea5cfe415c6dd0054/5a190/bloggatsby2.png 800w,
/static/07366bd56fb5e0eea5cfe415c6dd0054/c1b63/bloggatsby2.png 1200w,
/static/07366bd56fb5e0eea5cfe415c6dd0054/29007/bloggatsby2.png 1600w,
/static/07366bd56fb5e0eea5cfe415c6dd0054/191e2/bloggatsby2.png 1836w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2 id="maplibre-gl-js-installieren" style="position:relative;"><a href="#maplibre-gl-js-installieren" aria-label="maplibre gl js installieren permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MapLibre GL JS installieren</h2>
<p>Wir werden MapLibre GL JS von NPM installieren. Du kannst <a href="https://www.npmjs.com/package/maplibre-gl">der Anleitung</a> folgen. Im Grunde genommen reicht es aus, den nachfolgenden Befehl im Terminal auszuführen:</p>
<pre class="grvsc-container default-dark" data-language="" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ npm i maplibre-gl</span></span></code></pre>
<blockquote>
<p>Anmerkung: Die aktuelle Version von <code class="language-text">maplibre-gl</code> ist <code class="language-text">2.0.0-pre.6</code> zum Zeitpunkt des Schreibens. Ich möchte diese Version installieren, auch wenn es keine stabile Version ist. Deshalb rufe ich <code class="language-text">npm i maplibre-gl@2.0.0-pre.6</code> auf.</p>
</blockquote>
<p>Das NPM Paket beinhaltet eine CSS-Datei. Diese werde ich später direkt aus dem npm-Modul in meine Komponente importiere.</p>
<blockquote>
<p>Alternativ ist es möglich, die CSS-Datei mittels der Zeile <code class="language-text">&lt;link href='https://unpkg.com/maplibre-gl@1.15.2/dist/maplibre-gl.css' rel='stylesheet' /></code> im Kopfbereich der <a href="https://www.gatsbyjs.com/docs/custom-html/">statischen HTML-Seite zu importieren</a>. MapLibre verwendet <a href="https://github.com/maplibre/maplibre-gl-js/blob/main/docs/README-unpkg.md">unpkg.com</a>.</p>
</blockquote>
<h2 id="die-karte-anzeigen" style="position:relative;"><a href="#die-karte-anzeigen" aria-label="die karte anzeigen permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Die Karte anzeigen</h2>
<p>Ich möchte, dass dieselbe Karte in allen Blogeinträgen verwendet wird. Anstatt also auf jeder Seite eine Karte hinzuzufügen, werde ich sie in die Komponente <code class="language-text">Layout</code> einfügen. So wird jede Seite meiner Website die Karte beinhalten. Um den Code wiederverwendbar zu machen, werde ich eine separate Komponente namens <code class="language-text">Map</code> erstellen. Beginnen wir mit der Datei <code class="language-text">components/map.js</code>.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// map.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1">, { </span><span class="mtk12">useRef</span><span class="mtk1">, </span><span class="mtk12">useEffect</span><span class="mtk1">, </span><span class="mtk12">useState</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">maplibregl</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;maplibre-gl&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk8">&#39;maplibre-gl/dist/maplibre-gl.css&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">mapContainerStyle</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">width:</span><span class="mtk1"> </span><span class="mtk8">&#39;100%&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">height:</span><span class="mtk1"> </span><span class="mtk8">&#39;120px&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Map</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">mapContainerRef</span><span class="mtk1"> = </span><span class="mtk11">useRef</span><span class="mtk1">(</span><span class="mtk4">null</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> [</span><span class="mtk12">map</span><span class="mtk1">, </span><span class="mtk12">setMap</span><span class="mtk1">] = </span><span class="mtk11">useState</span><span class="mtk1">(</span><span class="mtk4">null</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk11">useEffect</span><span class="mtk1">(() </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">map</span><span class="mtk1"> = </span><span class="mtk4">new</span><span class="mtk1"> </span><span class="mtk10">maplibregl</span><span class="mtk1">.</span><span class="mtk10">Map</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">container:</span><span class="mtk1"> </span><span class="mtk12">mapContainerRef</span><span class="mtk1">.</span><span class="mtk12">current</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">style:</span><span class="mtk1"> </span><span class="mtk8">&#39;https://demotiles.maplibre.org/style.json&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">center:</span><span class="mtk1"> [-</span><span class="mtk7">0.687787</span><span class="mtk1">, </span><span class="mtk7">38.185674462487874</span><span class="mtk1">],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">zoom:</span><span class="mtk1"> </span><span class="mtk7">10</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">addControl</span><span class="mtk1">(</span><span class="mtk4">new</span><span class="mtk1"> </span><span class="mtk10">maplibregl</span><span class="mtk1">.</span><span class="mtk10">NavigationControl</span><span class="mtk1">(), </span><span class="mtk8">&#39;top-right&#39;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk11">setMap</span><span class="mtk1">(</span><span class="mtk12">map</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">return</span><span class="mtk1"> () </span><span class="mtk4">=&gt;</span><span class="mtk1"> </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">remove</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }, [])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">ref</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerRef</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">style</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerStyle</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk10">Map</span></span></span></code></pre>
<blockquote>
<p>Der Kartenstil '<a href="https://demotiles.maplibre.org/style.json">https://demotiles.maplibre.org/style.json</a>' zeigt eine sehr einfach gehaltene Karte an. Diese ist für Demoseiten ideal, weil kein Zugriffstoken notwendig ist. Sieh dir das <a href="https://maplibre.org/maplibre-gl-js-docs/example/simple-map/">Beispiel</a> in der MapLibre Dokumentation an, um weitere Informationen zu erhalten. Beispiele mit detaillierteren Karten findest du ebenfalls in der <a href="https://maplibre.org/maplibre-gl-js-docs/">MapLibre Dokumentation</a> inklusive Erläuterungen zur Nutzung von Tokens.</p>
</blockquote>
<p>Und integriere die Kartenkomponente in die Datei ´layout.js´.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// layout.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;prop-types&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">Map</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;./map&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Layout</span><span class="mtk1"> = ({ </span><span class="mtk12">children</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk10">Map</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk4">main</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">children</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk4">main</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">Layout</span><span class="mtk1">.</span><span class="mtk12">propTypes</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">children:</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1">.</span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">isRequired</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">Layout</span></span></span></code></pre>
<p>Starte an dieser Stelle den Entwicklungsserver neu, um sicherzustellen, dass die Karte korrekt angezeigt wird. Führe <code class="language-text">gatsby develop</code> erneut aus. Wenn du die Karte im oberen Bereich siehst ist alles gut.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/cfd311d61a7754d612bfeaa9d2343130/191e2/bloggatsby3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQoz+WMbUvCYBSGn///H/oUEX0MjAoJrBCXhQzZplOXTYf4Mufm1ovWc65oU5HoW33rgotzzs3hVo1pl04MvVQ2Fns31Xgp2JGF07vE8x+5D1yurSqVwKEya2MODG7bMTXT4K7Rodr1UK0UnCVYsWDFYCfQXAjNhaa1hJvA5fjpirPApDEaUnX7HPXqnJqH1LwDSkGZE/MCu1yi5p6jWoMJo+SVaA3hmzBffUlutNI4CRihjx3VmSczwixjmsHz2CdZ1vGzB+KJQdjpMw6HqJcsRT7eKZC9Kd+yfX7KCtTuRQQRNspOnatz93PJ722uEV1MtX3Ylv4WxR/zDws/AbfuBqnK+HqrAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Anzeige einer Karte auf der Indexseite"
        title="Anzeige einer Karte auf der Indexseite"
        src="/static/cfd311d61a7754d612bfeaa9d2343130/5a190/bloggatsby3.png"
        srcset="/static/cfd311d61a7754d612bfeaa9d2343130/772e8/bloggatsby3.png 200w,
/static/cfd311d61a7754d612bfeaa9d2343130/e17e5/bloggatsby3.png 400w,
/static/cfd311d61a7754d612bfeaa9d2343130/5a190/bloggatsby3.png 800w,
/static/cfd311d61a7754d612bfeaa9d2343130/c1b63/bloggatsby3.png 1200w,
/static/cfd311d61a7754d612bfeaa9d2343130/29007/bloggatsby3.png 1600w,
/static/cfd311d61a7754d612bfeaa9d2343130/191e2/bloggatsby3.png 1836w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Ich verwende React Hooks - <code class="language-text">useRef()</code> um auf das Map Container DOM Element zuzugreifen. <code class="language-text">UseState()</code>, um das Map-Objekt als Status zu speichern, so dass ich den Wert in anderen Teilen der Komponente verwenden kann, und <code class="language-text">UseEffect()</code>, um das Map-Objekt zu erstellen, wenn die Komponente aktiviert wird. Das leere Abhängigkeits-Array als zweites Argument für <code class="language-text">useEffect()</code> ist wichtig. Wenn du das zweite Argument entfernst, wirst du feststellen, dass die Funktion in eine Endlosschleife gerät. Das liegt daran, dass <code class="language-text">useEffect()</code> immer dann ausgeführt wird, wenn sich der Zustand ändert. Da wir <code class="language-text">setMap(map)</code> innerhalb desselben Hooks verwenden, wird es immer wieder ausgeführt. Durch das leere Array wird der Effekt-Hook nur einmal ausgeführt, wenn die Komponente initialisiert wird. Das ist das was wir erzielen möchten. Uns ist wichtig, dass nur einmal eine neue Map erstellt wird. Danach soll dieselbe Map verwendet werden. Mit <code class="language-text">return () => map.remove()</code> wird aufgeräumt, wenn die Komponente entfernt wird.</p>
<h2 id="marker-hinzufügen" style="position:relative;"><a href="#marker-hinzuf%C3%BCgen" aria-label="marker hinzufügen permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Marker hinzufügen</h2>
<p>Erstellen wir nun einige Marker auf der Karte. Jeder Blogbeitrag wird ein Array von Ortsdaten enthalten, und ich möchte für jeden Ort eine Markierung erstellen. Später wird dies über das Formatieren der Markdown-Dateien erfolgen, aber für den Anfang erstellen wir ein einfaches Objekt mit den Koordinaten als Datenquelle.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// on top of map.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">places</span><span class="mtk1"> = [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">&#39;Spanien&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">longitude:</span><span class="mtk1"> -</span><span class="mtk7">0.687787</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">latitude:</span><span class="mtk1"> </span><span class="mtk7">38.185674462487874</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">&#39;Germany&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">longitude:</span><span class="mtk1"> </span><span class="mtk7">7.587787</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">latitude:</span><span class="mtk1"> </span><span class="mtk7">50.7438</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">&#39;Frankreich&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">longitude:</span><span class="mtk1"> </span><span class="mtk7">3.687787</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">latitude:</span><span class="mtk1"> </span><span class="mtk7">45.753</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">]</span></span></span></code></pre>
<blockquote>
<p>Die Koordinaten meiner Plätze sind mir bekannt. Dies ist nicht in jedem Anwendungsfall so. Eventuell kennst du nur die Adreese oder den Namen eines POI. In diesem Fall wäre es schön, wenn ein Dienst integriert wäre, der anhand eines Textes die Koordinate errechnet. Ein solcher Dienst nennt sich Geocoding. Falls du einen solchen integrieren möchtest, schaue dir die Variante von Openstreetmap an. Dies ist <a href="https://nominatim.org/">Nominatim</a>.</p>
</blockquote>
<p>Als nächstes werde ich zwei neue Komponenten erstellen: <code class="language-text">Marker</code> and <code class="language-text">Markers</code>. Beide implementiere ich in der Datei <code class="language-text">markers.js</code></p>
<pre class="grvsc-container default-dark" data-language="js" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// markers.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1">, { </span><span class="mtk12">useRef</span><span class="mtk1">, </span><span class="mtk12">useEffect</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">maplibregl</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;maplibre-gl&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Marker</span><span class="mtk1"> = ({ </span><span class="mtk12">map</span><span class="mtk1">, </span><span class="mtk12">place</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">markerRef</span><span class="mtk1"> = </span><span class="mtk11">useRef</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk11">useEffect</span><span class="mtk1">(() </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">marker</span><span class="mtk1"> = </span><span class="mtk4">new</span><span class="mtk1"> </span><span class="mtk10">maplibregl</span><span class="mtk1">.</span><span class="mtk10">Marker</span><span class="mtk1">(</span><span class="mtk12">markerRef</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      .</span><span class="mtk11">setLngLat</span><span class="mtk1">([</span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">longitude</span><span class="mtk1">, </span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">latitude</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      .</span><span class="mtk11">addTo</span><span class="mtk1">(</span><span class="mtk12">map</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">return</span><span class="mtk1"> () </span><span class="mtk4">=&gt;</span><span class="mtk1"> </span><span class="mtk12">marker</span><span class="mtk1">.</span><span class="mtk11">remove</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">ref</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">markerRef</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Markers</span><span class="mtk1"> = ({ </span><span class="mtk12">map</span><span class="mtk1">, </span><span class="mtk12">places</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">{</span><span class="mtk12">places</span><span class="mtk1"> &amp;&amp;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk11">map</span><span class="mtk1">((</span><span class="mtk12">place</span><span class="mtk1">) </span><span class="mtk4">=&gt;</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk17">&lt;</span><span class="mtk10">Marker</span><span class="mtk1"> </span><span class="mtk12">key</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">name</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">map</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">map</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">place</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">place</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        ))</span><span class="mtk4">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">Markers</span></span></span></code></pre>
<p>Die Komponente <code class="language-text">Markers</code> verwendet zwei Eigenschaften der Komponente <code class="language-text">Map</code>. In React werden die Eigenschaften 'props' genannt. Das erste 'props' ist ein Verweis auf die Karte 'map'. Das zweite <code class="language-text">props</code> sind die Daten der Marker. Diese geben wir in der Eigenschaft 'Places' an die Komponente 'Marker' weiter. Diese Komponente kümmert sich dann um die Darstellung auf der Karte.</p>
<p>Ich verwende die <a href="http://turfjs.org/">Turf.js-Bibliothek</a>, um den Bereich der Karte zu berechnen, der angezeigt werden soll. Dieser Bereich wird als Bounding Box bezeichnet. Ich möchte, dass alle Markierungen, die zum Blogbeitrag gehören, sichtbar sind. Es kann also sein, dass die Bounding Box einen kleinen Ausschnitt der Welt darstellt. Es kann aber auch sein, dass die ganze Welt relevant ist. Bei jedem neuen Aufruf ist es daher wichtig, dass die Karte den Mittelpunkt und die Zoomstufe neu berechnet. Neben <code class="language-text">Turf.js</code> installiere ich <code class="language-text">@turf/helpers</code>, damit die Werte in ein GeoJson-Objekt umgewandelt werden. Das ist es, was <code class="language-text">Turf.js</code> erwarten.</p>
<pre class="grvsc-container default-dark" data-language="" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ npm install @turf/bbox @turf/helpers</span></span></code></pre>
<p>In the <code class="language-text">map.js</code>, I will create a new <code class="language-text">useEffect()</code> hook. The first effect hook we used was to run <em>once</em> to create a new map, but the markers will be created and removed many times whenever we navigate between pages, so the new effect hook with different dependency array will be necessary.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// map.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1">, { </span><span class="mtk12">useRef</span><span class="mtk1">, </span><span class="mtk12">useEffect</span><span class="mtk1">, </span><span class="mtk12">useState</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">maplibregl</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;maplibre-gl&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">bbox</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;@turf/bbox&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> { </span><span class="mtk12">multiPoint</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;@turf/helpers&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">Markers</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;./markers&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk8">&#39;maplibre-gl/dist/maplibre-gl.css&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// ... variables</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Map</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk3">// add new effect hook</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk11">useEffect</span><span class="mtk1">(() </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (!</span><span class="mtk12">map</span><span class="mtk1">) </span><span class="mtk15">return</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (</span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk12">length</span><span class="mtk1"> !== </span><span class="mtk7">0</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">coords</span><span class="mtk1"> = []</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk11">forEach</span><span class="mtk1">((</span><span class="mtk12">place</span><span class="mtk1">) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">coords</span><span class="mtk1">.</span><span class="mtk11">push</span><span class="mtk1">([</span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">longitude</span><span class="mtk1">, </span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">latitude</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">feature</span><span class="mtk1"> = </span><span class="mtk11">multiPoint</span><span class="mtk1">(</span><span class="mtk12">coords</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">box</span><span class="mtk1"> = </span><span class="mtk11">bbox</span><span class="mtk1">(</span><span class="mtk12">feature</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">fitBounds</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          [</span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">0</span><span class="mtk1">], </span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">1</span><span class="mtk1">]],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          [</span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">2</span><span class="mtk1">], </span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">3</span><span class="mtk1">]],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">padding:</span><span class="mtk1"> </span><span class="mtk7">20</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">maxZoom:</span><span class="mtk1"> </span><span class="mtk7">14</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">duration:</span><span class="mtk1"> </span><span class="mtk7">2000</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    } </span><span class="mtk15">else</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">easeTo</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">center:</span><span class="mtk1"> [-</span><span class="mtk7">73.9856</span><span class="mtk1">, </span><span class="mtk7">40.7497</span><span class="mtk1">],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">zoom:</span><span class="mtk1"> </span><span class="mtk7">10</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">duration:</span><span class="mtk1"> </span><span class="mtk7">2000</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }, [</span><span class="mtk12">map</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">ref</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerRef</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">style</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerStyle</span><span class="mtk4">}</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">{</span><span class="mtk12">places</span><span class="mtk1"> &amp;&amp; </span><span class="mtk12">map</span><span class="mtk1"> &amp;&amp; </span><span class="mtk17">&lt;</span><span class="mtk10">Markers</span><span class="mtk1"> </span><span class="mtk12">map</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">map</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">places</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">places</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span><span class="mtk4">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk10">Map</span></span></span></code></pre>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9fd345cf08b5b6e67fe79fdb1b216dc8/191e2/bloggatsby4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQoz+WMXUvCYBiG3/8PnfQHOg4Cg5YgURmYNL9lW+aa0xUpOjU/9qaGe65AnXkY1FkXXPDcN9yPcsrglqBqLai/ftKKwJvLxpaGSu8D8z6DY59Rs238qmbQPaVcb3KXn5K+hVypT88/YfKcQt141+TdKsWuxhqBMxXsyVZnBmZQpFC44MEzSZsmhvuE2U6RqfsYWYvLrMu5dUXOP6JhHaOKLYNg9sZkDaOVMFrBcCkMFsJ4CcHUo60j+npFO+xSGT/ivjfpzEMaYY9h2OFFVwiiGp2ohlrqNawFODTh8P4ZKpmJCCLslH2OJSbe5XhjvO+++20nEqOSMbunv0Xxx/zDh19+GQRvaXGzpQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Neu hinzugefügte Marker"
        title="Neu hinzugefügte Marker"
        src="/static/9fd345cf08b5b6e67fe79fdb1b216dc8/5a190/bloggatsby4.png"
        srcset="/static/9fd345cf08b5b6e67fe79fdb1b216dc8/772e8/bloggatsby4.png 200w,
/static/9fd345cf08b5b6e67fe79fdb1b216dc8/e17e5/bloggatsby4.png 400w,
/static/9fd345cf08b5b6e67fe79fdb1b216dc8/5a190/bloggatsby4.png 800w,
/static/9fd345cf08b5b6e67fe79fdb1b216dc8/c1b63/bloggatsby4.png 1200w,
/static/9fd345cf08b5b6e67fe79fdb1b216dc8/29007/bloggatsby4.png 1600w,
/static/9fd345cf08b5b6e67fe79fdb1b216dc8/191e2/bloggatsby4.png 1836w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Wir haben jetzt Marker auf der Karte für einen Ort in Spanien, einen Ort in Frankreich und einen in Deutschland. MapLibre bietet sehr nützliche Methoden wie <code class="language-text">fitBounds()</code> und <code class="language-text">easeTo()</code>. Es gibt noch mehr Funktionen und Optionen. Sieh dir die MapLibre Dokumentation an.</p>
<h2 id="hinzufügen-von-markdown-dateien" style="position:relative;"><a href="#hinzuf%C3%BCgen-von-markdown-dateien" aria-label="hinzufügen von markdown dateien permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hinzufügen von Markdown-Dateien</h2>
<p>Es ist an der Zeit, die Daten von echten Blog-Einträgen anstelle des "Places"-Objekts zu verwenden. Ich habe Markdown <code class="language-text">.md</code>-Dateien im <code class="language-text">content</code>-Ordner erstellt, welche die Daten für die Marker beinhalten. Hier ist ein Beispiel (<code class="language-text">content/spanien.md</code>):</p>
<pre class="grvsc-container default-dark" data-language="" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">---</span></span>
<span class="grvsc-line"><span class="grvsc-source">title: Spanien</span></span>
<span class="grvsc-line"><span class="grvsc-source">date: 2021-12-27</span></span>
<span class="grvsc-line"><span class="grvsc-source">places:</span></span>
<span class="grvsc-line"><span class="grvsc-source">- {</span></span>
<span class="grvsc-line"><span class="grvsc-source">    name: &quot;Spanien&quot;,</span></span>
<span class="grvsc-line"><span class="grvsc-source">    longitude: -0.687787,</span></span>
<span class="grvsc-line"><span class="grvsc-source">    latitude: 38.185674462487874,</span></span>
<span class="grvsc-line"><span class="grvsc-source">  }</span></span>
<span class="grvsc-line"><span class="grvsc-source">---</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">Die Anreise war ein Abenteuer.</span></span></code></pre>
<h2 id="seiten-pages-generieren" style="position:relative;"><a href="#seiten-pages-generieren" aria-label="seiten pages generieren permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Seiten (Pages) generieren</h2>
<p>Um Seiten aus Markdown-Seiten in Gatsby zu generieren, sind zusätzliche Schritte erforderlich. Hier gehe ich nur auf den Code ein, der für unseres Projekts relevant ist. Installiere als erstes das Plugin <code class="language-text">gatsby-transformer-remark</code>.</p>
<pre class="grvsc-container default-dark" data-language="" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">$ npm install gatsby-transformer-remark</span></span></code></pre>
<p>Dann aktualisiere die Dateien <code class="language-text">gatsby-config.js</code> und <code class="language-text">gatsby-node.js</code> so, dass das Plugin <code class="language-text">gatsby-transformer-remark</code> eingebunden wird.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="15"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// gatsby-config.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">module</span><span class="mtk1">.</span><span class="mtk10">exports</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">siteMetadata:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">title:</span><span class="mtk1"> </span><span class="mtk8">`Gatsby MapLibre Blog`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">description:</span><span class="mtk1"> </span><span class="mtk8">``</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">author:</span><span class="mtk1"> </span><span class="mtk8">`Me`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">plugins:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-plugin-react-helmet`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">resolve:</span><span class="mtk1"> </span><span class="mtk8">`gatsby-source-filesystem`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">options:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">`content`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">path:</span><span class="mtk1"> </span><span class="mtk8">`</span><span class="mtk4">${</span><span class="mtk12">__dirname</span><span class="mtk4">}</span><span class="mtk8">/content`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-transformer-remark`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-transformer-sharp`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk8">`gatsby-plugin-sharp`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<pre class="grvsc-container default-dark" data-language="js" data-index="16"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// gatsby-node.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">path</span><span class="mtk1"> = </span><span class="mtk11">require</span><span class="mtk1">(</span><span class="mtk8">&#39;path&#39;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> { </span><span class="mtk12">createFilePath</span><span class="mtk1"> } = </span><span class="mtk11">require</span><span class="mtk1">(</span><span class="mtk8">`gatsby-source-filesystem`</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">exports</span><span class="mtk1">.</span><span class="mtk11">onCreateNode</span><span class="mtk1"> = ({ </span><span class="mtk12">node</span><span class="mtk1">, </span><span class="mtk12">getNode</span><span class="mtk1">, </span><span class="mtk12">actions</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> { </span><span class="mtk12">createNodeField</span><span class="mtk1"> } = </span><span class="mtk12">actions</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">if</span><span class="mtk1"> (</span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">internal</span><span class="mtk1">.</span><span class="mtk12">type</span><span class="mtk1"> === </span><span class="mtk8">&#39;MarkdownRemark&#39;</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">slug</span><span class="mtk1"> = </span><span class="mtk11">createFilePath</span><span class="mtk1">({ </span><span class="mtk12">node</span><span class="mtk1">, </span><span class="mtk12">getNode</span><span class="mtk1"> })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk11">createNodeField</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">node</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">name:</span><span class="mtk1"> </span><span class="mtk8">`slug`</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">value:</span><span class="mtk1"> </span><span class="mtk12">slug</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">exports</span><span class="mtk1">.</span><span class="mtk11">onCreateWebpackConfig</span><span class="mtk1"> = ({ </span><span class="mtk12">stage</span><span class="mtk1">, </span><span class="mtk12">loaders</span><span class="mtk1">, </span><span class="mtk12">actions</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">if</span><span class="mtk1"> (</span><span class="mtk12">stage</span><span class="mtk1"> === </span><span class="mtk8">&#39;build-html&#39;</span><span class="mtk1"> || </span><span class="mtk12">stage</span><span class="mtk1"> === </span><span class="mtk8">&#39;develop-html&#39;</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk12">actions</span><span class="mtk1">.</span><span class="mtk11">setWebpackConfig</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">module:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">rules:</span><span class="mtk1"> [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk12">test:</span><span class="mtk5"> /maplibre-gl/</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk12">use:</span><span class="mtk1"> </span><span class="mtk12">loaders</span><span class="mtk1">.</span><span class="mtk11">null</span><span class="mtk1">(),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">exports</span><span class="mtk1">.</span><span class="mtk11">createPages</span><span class="mtk1"> = </span><span class="mtk4">async</span><span class="mtk1"> ({ </span><span class="mtk12">graphql</span><span class="mtk1">, </span><span class="mtk12">actions</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> { </span><span class="mtk12">createPage</span><span class="mtk1"> } = </span><span class="mtk12">actions</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">result</span><span class="mtk1"> = </span><span class="mtk15">await</span><span class="mtk1"> </span><span class="mtk11">graphql</span><span class="mtk1">(</span><span class="mtk8">`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    query {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      allMarkdownRemark {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        edges {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          node {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">            fields {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">              slug</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">            }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">  `</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">result</span><span class="mtk1">.</span><span class="mtk12">data</span><span class="mtk1">.</span><span class="mtk12">allMarkdownRemark</span><span class="mtk1">.</span><span class="mtk12">edges</span><span class="mtk1">.</span><span class="mtk11">forEach</span><span class="mtk1">(({ </span><span class="mtk12">node</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk11">createPage</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">path:</span><span class="mtk1"> </span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">fields</span><span class="mtk1">.</span><span class="mtk12">slug</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">component:</span><span class="mtk1"> </span><span class="mtk12">path</span><span class="mtk1">.</span><span class="mtk11">resolve</span><span class="mtk1">(</span><span class="mtk8">`./src/templates/postTemplate.js`</span><span class="mtk1">),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">context:</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">slug:</span><span class="mtk1"> </span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">fields</span><span class="mtk1">.</span><span class="mtk12">slug</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<p>Wir erstellen die Datei <code class="language-text">./src/templates/postTemplate.js</code>, welche als Template für unsere Markdown-Dateien verwendet wird.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="17"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// postTemplate.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> { </span><span class="mtk12">Link</span><span class="mtk1">, </span><span class="mtk12">graphql</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;gatsby&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">Layout</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;../components/layout&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">PostTemplate</span><span class="mtk1"> = ({ </span><span class="mtk12">data</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">frontmatter</span><span class="mtk1"> = </span><span class="mtk12">data</span><span class="mtk1">.</span><span class="mtk12">markdownRemark</span><span class="mtk1">.</span><span class="mtk12">frontmatter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">html</span><span class="mtk1"> = </span><span class="mtk12">data</span><span class="mtk1">.</span><span class="mtk12">markdownRemark</span><span class="mtk1">.</span><span class="mtk12">html</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk10">Layout</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">frontmatter</span><span class="mtk1">.</span><span class="mtk12">title</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk4">h1</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">dangerouslySetInnerHTML</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk1">{ </span><span class="mtk12">__html:</span><span class="mtk1"> </span><span class="mtk12">html</span><span class="mtk1"> }</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;/</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk10">Link</span><span class="mtk1"> </span><span class="mtk12">to</span><span class="mtk1">=</span><span class="mtk8">&quot;/&quot;</span><span class="mtk17">&gt;</span><span class="mtk1">Back to Index</span><span class="mtk17">&lt;/</span><span class="mtk10">Link</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk10">Layout</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">PostTemplate</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">pageQuery</span><span class="mtk1"> = </span><span class="mtk11">graphql</span><span class="mtk8">`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">  query ($slug: String!) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    markdownRemark(fields: { slug: { eq: $slug } }) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      html</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      frontmatter {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        title</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        places {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          name</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          longitude</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          latitude</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">  }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">`</span></span></span></code></pre>
<p>Nun ist es erforderlich den Entwicklungsserver neu zu starten, da wir die <code class="language-text">gatsby-node.js</code> aktualisiert haben. Wenn alles gut geht, wird Gatsby Seiten für uns generieren.</p>
<h2 id="add-navigation" style="position:relative;"><a href="#add-navigation" aria-label="add navigation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Navigation</h2>
<p>Damit wir die einzelnen Seiten aufrufen können, fügen wir eine einfache Navigation in einer neuen <code class="language-text">PostList</code> Komponente in der Datei <code class="language-text">postList.js</code> hinzu. Wir verwenden <code class="language-text">useStaticQuery</code>, um GraphQL Abfragen zu nutzen.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="18"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// components/postList.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> { </span><span class="mtk12">Link</span><span class="mtk1">, </span><span class="mtk12">graphql</span><span class="mtk1">, </span><span class="mtk12">useStaticQuery</span><span class="mtk1"> } </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;gatsby&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">query</span><span class="mtk1"> = </span><span class="mtk11">graphql</span><span class="mtk8">`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">  query MyQuery {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    allMarkdownRemark {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      nodes {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        frontmatter {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          title</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        fields {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">          slug</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">      }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">  }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk8">`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">PostList</span><span class="mtk1"> = () </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">data</span><span class="mtk1"> = </span><span class="mtk11">useStaticQuery</span><span class="mtk1">(</span><span class="mtk12">query</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">nodes</span><span class="mtk1"> = </span><span class="mtk12">data</span><span class="mtk1">.</span><span class="mtk12">allMarkdownRemark</span><span class="mtk1">.</span><span class="mtk12">nodes</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">ul</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">style</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">listStyleType:</span><span class="mtk1"> </span><span class="mtk8">&#39;none&#39;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">padding:</span><span class="mtk1"> </span><span class="mtk7">0</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      }</span><span class="mtk4">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">{</span><span class="mtk12">nodes</span><span class="mtk1">.</span><span class="mtk11">map</span><span class="mtk1">((</span><span class="mtk12">node</span><span class="mtk1">) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">title</span><span class="mtk1"> = </span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">frontmatter</span><span class="mtk1">.</span><span class="mtk12">title</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk17">&lt;</span><span class="mtk4">li</span><span class="mtk1"> </span><span class="mtk12">key</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">title</span><span class="mtk4">}</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk17">&lt;</span><span class="mtk10">Link</span><span class="mtk1"> </span><span class="mtk12">to</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">fields</span><span class="mtk1">.</span><span class="mtk12">slug</span><span class="mtk4">}</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">title</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk10">Link</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk17">&lt;/</span><span class="mtk4">li</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span><span class="mtk4">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">ul</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">PostList</span></span></span></code></pre>
<p>Am Ende integrieren wir die Navigation <code class="language-text">&lt;PostList /></code> in das Layout, also in die Datei <code class="language-text">layout.js</code>.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="19"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// components/layout.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;react&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;prop-types&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">Map</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;./map&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">import</span><span class="mtk1"> </span><span class="mtk12">PostList</span><span class="mtk1"> </span><span class="mtk15">from</span><span class="mtk1"> </span><span class="mtk8">&#39;./postList&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Layout</span><span class="mtk1"> = ({ </span><span class="mtk12">children</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk10">Map</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">style</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk1">{ </span><span class="mtk12">margin:</span><span class="mtk1"> </span><span class="mtk8">&#39;0 40px&#39;</span><span class="mtk1"> }</span><span class="mtk4">}</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk4">main</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">children</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk4">main</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk17">&lt;</span><span class="mtk10">PostList</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk17">&lt;/</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk12">Layout</span><span class="mtk1">.</span><span class="mtk12">propTypes</span><span class="mtk1"> = {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk12">children:</span><span class="mtk1"> </span><span class="mtk12">PropTypes</span><span class="mtk1">.</span><span class="mtk12">node</span><span class="mtk1">.</span><span class="mtk12">isRequired</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">export</span><span class="mtk1"> </span><span class="mtk15">default</span><span class="mtk1"> </span><span class="mtk12">Layout</span></span></span></code></pre>
<p>Wir können jetzt zwischen den Seiten navigieren. Alles passt aber noch nicht. Die Karte wird bei jedem Laden der Seite neu geladen. Das verursacht unnötige API-Aufrufe und beeinträchtigt die Benutzerfreundlichkeit. Ein weiteres Problem ist, dass die Marker auf allen Seiten gleich sind. Wir haben bisher die GraphQL-Abfragedaten noch nicht mit unserer Kartenkomponente verbunden. Wir benötigen Props , um das zu handhaben.</p>
<h2 id="gatsby-browser-api" style="position:relative;"><a href="#gatsby-browser-api" aria-label="gatsby browser api permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gatsby Browser API</h2>
<p>Warum die Karte neu geladen wird, <a href="https://www.gatsbyjs.com/docs/how-to/routing/layout-components/#how-to-prevent-layout-components-from-unmounting">findest du auf der Gatsby-Website</a> erklärt. Kurz: Wir müssen die umhüllende <code class="language-text">Layout</code> Komponente von unseren Seiten entfernen und die <code class="language-text">wrapPageElement</code> Browser API in <code class="language-text">gatsby-browser.js</code> verwenden. Mehr Informationen zu dieser Schnittstelle findest du unter <a href="https://www.gatsbyjs.com/docs/reference/config-files/gatsby-browser/#wrapPageElement">der API-Referenz</a>.
Verwendet den gleichen Code in <code class="language-text">gatsby-ssr.js</code> für Server-Side Rendering.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="20"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// gatsby-browser.js &amp; gatsby-ssr.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">React</span><span class="mtk1"> = </span><span class="mtk11">require</span><span class="mtk1">(</span><span class="mtk8">&#39;react&#39;</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">Layout</span><span class="mtk1"> = </span><span class="mtk11">require</span><span class="mtk1">(</span><span class="mtk8">&#39;./src/components/layout&#39;</span><span class="mtk1">).</span><span class="mtk12">default</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk10">exports</span><span class="mtk1">.</span><span class="mtk11">wrapPageElement</span><span class="mtk1"> = ({ </span><span class="mtk12">element</span><span class="mtk1">, </span><span class="mtk12">props</span><span class="mtk1"> }) </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> </span><span class="mtk17">&lt;</span><span class="mtk10">Layout</span><span class="mtk1"> </span><span class="mtk4">{</span><span class="mtk1">...</span><span class="mtk12">props</span><span class="mtk4">}</span><span class="mtk17">&gt;</span><span class="mtk4">{</span><span class="mtk12">element</span><span class="mtk4">}</span><span class="mtk17">&lt;/</span><span class="mtk10">Layout</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<blockquote>
<p>Denke daran, alle Layout-Komponenten, zu entfernen. Es tritt zwar kein Fehler auf, aber du siehst die Karte zweimal.</p>
</blockquote>
<p>Wenn du nun zwischen den Seiten navigierst, wird die Karte nicht neu geladen. Im nächsten Schritt sorgen wir nun dafür, dass sich der Inhalt der Karte dynamisch an die Eigenschaften des Blogbeitrags anpasst.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9c46e78647711a2aed93c3369bb08779/191e2/bloggatsby5.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVQoz82OXUvCABSG9/+hm/5A10FgkAoSlYGF83tty5y2adRE57dbOm3nCVx+XAZ50QMv57wvnJejmGWwikJVX6C9r3j1oTWXjV4DqHQ/UR8ymMYFNcPArgb03XPKWoP7xynpO8iVenTtMybNBMpt84Z8S6PoBjwNwZwKxiSWOQO1U6RQuCLfUkmrKknrBdVJkNFsklmdVNbiUr8mZ59Q109RSk4K020wXsMwFIYhDJZCfyGMltCZtnACn14Q4nguldEz1rhBe+5R97oMvDZvQYWOX6Pt11D6HxNm4xnytSZG2HO4/w4lXKziUxFEtlN2PpKI6MdHG0W7bJ/HmUiEsi07nH9BOfzoGKUKR+b/F34DRgsD3kKYvLUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Pages and navigation and no reload"
        title="Pages and navigation and no reload"
        src="/static/9c46e78647711a2aed93c3369bb08779/5a190/bloggatsby5.png"
        srcset="/static/9c46e78647711a2aed93c3369bb08779/772e8/bloggatsby5.png 200w,
/static/9c46e78647711a2aed93c3369bb08779/e17e5/bloggatsby5.png 400w,
/static/9c46e78647711a2aed93c3369bb08779/5a190/bloggatsby5.png 800w,
/static/9c46e78647711a2aed93c3369bb08779/c1b63/bloggatsby5.png 1200w,
/static/9c46e78647711a2aed93c3369bb08779/29007/bloggatsby5.png 1600w,
/static/9c46e78647711a2aed93c3369bb08779/191e2/bloggatsby5.png 1836w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2 id="die-kartenkomponente-für-die-verwendung-von-props-anpassen" style="position:relative;"><a href="#die-kartenkomponente-f%C3%BCr-die-verwendung-von-props-anpassen" aria-label="die kartenkomponente für die verwendung von props anpassen permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Die Kartenkomponente für die Verwendung von props anpassen.</h2>
<p>Um unterschiedliche Koordinaten von den Blogbeiträgen an unsere "Map"-Komponente zu senden, müssen wir die <code class="language-text">Map</code>-Komponente ändern. Wir verwenden wieder Eigenschaften oder <code class="language-text">props</code>.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="21"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// in map.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// ... remove const places</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// add props &amp; update places to props.places</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk11">Map</span><span class="mtk1"> = </span><span class="mtk12">props</span><span class="mtk1"> </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">	</span><span class="mtk3">// ...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk11">useEffect</span><span class="mtk1">(() </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (!</span><span class="mtk12">map</span><span class="mtk1">) </span><span class="mtk15">return</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (</span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1"> &amp;&amp; </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk12">length</span><span class="mtk1"> !== </span><span class="mtk7">0</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">coords</span><span class="mtk1"> = []</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk11">forEach</span><span class="mtk1">(</span><span class="mtk12">place</span><span class="mtk1"> </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">coords</span><span class="mtk1">.</span><span class="mtk11">push</span><span class="mtk1">([</span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">longitude</span><span class="mtk1">, </span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">latitude</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk3">// ...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }, [</span><span class="mtk12">map</span><span class="mtk1">, </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk3">// ...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk11">useEffect</span><span class="mtk1">(() </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (!</span><span class="mtk12">map</span><span class="mtk1">) </span><span class="mtk15">return</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk15">if</span><span class="mtk1"> (</span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1"> &amp;&amp; </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk12">length</span><span class="mtk1"> !== </span><span class="mtk7">0</span><span class="mtk1">) {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">coords</span><span class="mtk1"> = []</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">.</span><span class="mtk11">forEach</span><span class="mtk1">(</span><span class="mtk12">place</span><span class="mtk1"> </span><span class="mtk4">=&gt;</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">coords</span><span class="mtk1">.</span><span class="mtk11">push</span><span class="mtk1">([</span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">longitude</span><span class="mtk1">, </span><span class="mtk12">place</span><span class="mtk1">.</span><span class="mtk12">latitude</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">feature</span><span class="mtk1"> = </span><span class="mtk11">multiPoint</span><span class="mtk1">(</span><span class="mtk12">coords</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">const</span><span class="mtk1"> </span><span class="mtk12">box</span><span class="mtk1"> = </span><span class="mtk11">bbox</span><span class="mtk1">(</span><span class="mtk12">feature</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">fitBounds</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        [</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          [</span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">0</span><span class="mtk1">], </span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">1</span><span class="mtk1">]],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          [</span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">2</span><span class="mtk1">], </span><span class="mtk12">box</span><span class="mtk1">[</span><span class="mtk7">3</span><span class="mtk1">]],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">padding:</span><span class="mtk1"> </span><span class="mtk7">20</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">maxZoom:</span><span class="mtk1"> </span><span class="mtk7">14</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk12">duration:</span><span class="mtk1"> </span><span class="mtk7">2000</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    } </span><span class="mtk15">else</span><span class="mtk1"> {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk12">map</span><span class="mtk1">.</span><span class="mtk11">easeTo</span><span class="mtk1">({</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">center:</span><span class="mtk1"> [-</span><span class="mtk7">73.9856</span><span class="mtk1">, </span><span class="mtk7">40.7497</span><span class="mtk1">],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">zoom:</span><span class="mtk1"> </span><span class="mtk7">10</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk12">duration:</span><span class="mtk1"> </span><span class="mtk7">2000</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      })</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  }, [</span><span class="mtk12">map</span><span class="mtk1">, </span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1">])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk4">div</span><span class="mtk1"> </span><span class="mtk12">ref</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerRef</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">style</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">mapContainerStyle</span><span class="mtk4">}</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">{</span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk1"> &amp;&amp; </span><span class="mtk12">map</span><span class="mtk1"> &amp;&amp; </span><span class="mtk17">&lt;</span><span class="mtk10">Markers</span><span class="mtk1"> </span><span class="mtk12">map</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">map</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk12">places</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">props</span><span class="mtk1">.</span><span class="mtk12">places</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span><span class="mtk4">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;/</span><span class="mtk4">div</span><span class="mtk17">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<h2 id="die-koordinaten-in-der-layout-komponente-verwenden" style="position:relative;"><a href="#die-koordinaten-in-der-layout-komponente-verwenden" aria-label="die koordinaten in der layout komponente verwenden permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Die Koordinaten in der Layout-Komponente verwenden</h2>
<p>Last but not least werden die Koordinaten an die Komponente <code class="language-text">Layout</code> weiter gegeben. Ich verwende den <code class="language-text">useState()</code>-Hook, weil die Daten für jede Seite unterschiedlich sind. So werden diese jedem neuen Seitenaufruf aktualisiert. Der <code class="language-text">useEffect()</code>-Hook bewirkt, dass die Daten nur wenn <code class="language-text">props</code> sich ändert aktualisiert werden.</p>
<pre class="grvsc-container default-dark" data-language="js" data-index="22"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// components/layout.js</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// ...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk15">return</span><span class="mtk1"> (</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk17">&lt;</span><span class="mtk10">Map</span><span class="mtk1"> </span><span class="mtk12">places</span><span class="mtk1">=</span><span class="mtk4">{</span><span class="mtk12">places</span><span class="mtk4">}</span><span class="mtk1"> </span><span class="mtk17">/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    // ...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk17">&lt;/&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">// ...</span></span></span></code></pre>
<p>Das war's! Jetzt werden die Daten und Markierungen korrekt aktualisieren.</p>
<p>Todo</p>
<ul>
<li>Popup für jede Markierung hinzufügen</li>
<li>Hinzufügen eines eigenen Markierungsdesigns (z.B. SVG)</li>
<li>Hinzufügen von Marker-Animationen</li>
<li>Hinzufügen von benutzerdefinierten Kartenstilen</li>
</ul>
<h2 id="referenzen" style="position:relative;"><a href="#referenzen" aria-label="referenzen permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Referenzen</h2>
<ul>
<li><a href="https://github.com/mapbox/mapbox-react-examples">Mapbox React examples repo</a>: There are only a few examples but I got a lot of help from the repo as they covered almost everything I needed to know.</li>
<li><a href="https://maplibre.org/maplibre-gl-js-docs/api/">MapLibre examples</a></li>
<li><a href="https://erraticgenerator.com/blog/gatsby-blog-with-mapbox-gl-js-using-react-hooks/">Mapbox Gatsby Blog with Hooks</a>.</li>
</ul>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk17 { color: #808080; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk7 { color: #B5CEA8; }
  .default-dark .mtk5 { color: #D16969; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></article><section id="comments" class="comments container"><h3>Comments</h3><div></div></section><section id="webmentions" class="comments webmentions__list container"><h3>Webmentions</h3><br/></section></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/maplibre-blog-with-gatsby/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-87f5ae838a3e11ab908d.js"],"app":["/app-24df0ae8e19938884045.js"],"component---src-pages-404-js":["/component---src-pages-404-js-5f1261b30b7ee352090a.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-7be8df31721789d53c28.js"],"component---src-pages-books-js":["/component---src-pages-books-js-ffee86f2ac01d1e02a72.js"],"component---src-pages-index-js":["/component---src-pages-index-js-05dcf5a41b92b2479436.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-a01e40860ee25e8046f1.js"],"component---src-templates-category-js":["/component---src-templates-category-js-49bc4748c0cd1500052b.js"],"component---src-templates-post-js":["/component---src-templates-post-js-32d6c559e8f7d98e8c24.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-26ffbf608cbeadb83d5e.js"]};/*]]>*/</script><script src="/polyfill-87f5ae838a3e11ab908d.js" nomodule=""></script><script src="/component---src-templates-post-js-32d6c559e8f7d98e8c24.js" async=""></script><script src="/b84efa9b784e27572a845759437622c93533bed1-af3eca6a1f9625807cd6.js" async=""></script><script src="/commons-dead6f2aafd4c57f7eb7.js" async=""></script><script src="/app-24df0ae8e19938884045.js" async=""></script><script src="/framework-a8bc927eb7481ca28d49.js" async=""></script><script src="/webpack-runtime-151198cf60371e4ceaea.js" async=""></script></body></html>